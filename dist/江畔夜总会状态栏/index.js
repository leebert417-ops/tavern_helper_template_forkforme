var n={d:(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(n,t)=>Object.prototype.hasOwnProperty.call(n,t)},t={};n.d(t,{d:()=>u}),console.log('ğŸŒ™ åŠ è½½æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶...');let e=null,i=null,a=null;let o=0,l='club';const c=new Set;function s(n,t,e='æœªçŸ¥'){if(!n)return e;const i=t.split('.');let a=n;for(const n of i){if(null==a||'object'!=typeof a)return e;a=a[n]}return null==a||''===String(a)?e:String(a)}function r(){let n;console.log('ğŸš€ åˆå§‹åŒ–æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶...');try{n=window.top?window.top.document:document}catch(t){console.warn('âš ï¸ æ— æ³•è®¿é—® window.topï¼Œä½¿ç”¨å½“å‰ document'),n=document}n.getElementById('nightclub-toggle-btn')&&(console.log('âš ï¸ æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ å·²å­˜åœ¨ï¼Œå…ˆç§»é™¤æ—§çš„'),n.getElementById('nightclub-toggle-btn')?.remove(),n.getElementById('nightclub-main-panel')?.remove(),n.getElementById('nightclub-plugin-styles')?.remove(),$(n).off('.nightclub-plugin')),n.getElementById('nightclub-plugin-styles')||(n.head.insertAdjacentHTML('beforeend','\n<style id="nightclub-plugin-styles">\n:root {\n  --nightclub-primary: #e94560;\n  --nightclub-secondary: #0f3460;\n  --nightclub-bg-dark: #16213e;\n  --nightclub-bg-mid: #1a2332;\n  --nightclub-bg-light: #2a3447;\n  --nightclub-text-light: #e4e7eb;\n  --nightclub-text-dim: #a0a8b5;\n}\n\n/* ==================== æ‹–åŠ¨æŒ‰é’® */\n.nightclub-toggle-btn {\n  position: fixed !important;\n  top: 100px;\n  left: 20px;\n  width: 64px;\n  height: 64px;\n  background: linear-gradient(135deg, #e94560 0%, #c8365a 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: grab;\n  z-index: 10000 !important;\n  box-shadow: 0 4px 12px rgba(233, 69, 96, 0.4);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: none;\n  font-size: 28px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  /* åªå¯¹ transform å’Œ box-shadow æ·»åŠ è¿‡æ¸¡ï¼Œä¸å½±å“æ‹–åŠ¨ */\n  transition: transform 0.2s, box-shadow 0.2s, opacity 0.2s;\n}\n\n.nightclub-toggle-btn:hover {\n  transform: scale(1.05);\n}\n\n.nightclub-toggle-btn.dragging {\n  cursor: grabbing !important;\n  opacity: 0.9;\n  z-index: 10001 !important;\n  /* æ‹–åŠ¨æ—¶å®Œå…¨ç¦ç”¨è¿‡æ¸¡ */\n  transition: none !important;\n}\n\n/* ==================== ä¸»é¢æ¿å®¹å™¨ */\n.nightclub-main-panel {\n  position: fixed !important;\n  top: 50vh !important;\n  left: 50vw !important;\n  transform: translate(-50%, -50%) !important;\n  width: 90vw !important;\n  max-width: 800px !important;\n  height: 85vh !important;\n  max-height: 600px !important;\n  background: var(--nightclub-bg-dark);\n  background: linear-gradient(135deg, var(--nightclub-bg-dark) 0%, var(--nightclub-bg-mid) 100%);\n  border: 2px solid var(--nightclub-primary);\n  border-radius: 12px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n  z-index: 9999 !important;\n  display: none;\n  flex-direction: column;\n  overflow: hidden;\n  color: var(--nightclub-text-light);\n  font-family: \'Microsoft YaHei\', \'Segoe UI\', sans-serif;\n}\n\n.nightclub-main-panel.active {\n  display: flex;\n}\n\n.nightclub-main-panel.dragging {\n  transition: none !important;\n}\n\n/* ==================== å¤´éƒ¨ */\n.nightclub-header {\n  flex-shrink: 0;\n  padding: 16px 20px;\n  background: var(--nightclub-primary);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: 600;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  cursor: move;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  transition: opacity 0.2s;\n  touch-action: none !important;\n}\n\n.nightclub-header.dragging {\n  opacity: 0.8;\n  cursor: grabbing !important;\n  transition: none !important;\n}\n\n/* ==================== æ ‡ç­¾é¡µå¯¼èˆª */\n.nightclub-tabs {\n  display: flex;\n  flex-shrink: 0;\n  border-bottom: 2px solid rgba(255, 255, 255, 0.1);\n}\n\n.nightclub-tab {\n  flex: 1;\n  padding: 12px 16px;\n  background: transparent;\n  border: none;\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.3s;\n  border-bottom: 2px solid transparent;\n  text-align: center;\n}\n\n.nightclub-tab:hover {\n  background: rgba(255, 255, 255, 0.05);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.nightclub-tab.active {\n  color: var(--nightclub-primary);\n  border-bottom-color: var(--nightclub-primary);\n}\n\n.nightclub-tab-badge {\n  display: inline-block;\n  margin-left: 6px;\n  padding: 2px 6px;\n  background: var(--nightclub-primary);\n  border-radius: 10px;\n  font-size: 11px;\n  font-weight: 700;\n}\n\n.nightclub-header-left {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.nightclub-header-title {\n  font-size: 18px;\n}\n\n.nightclub-header-subtitle {\n  font-size: 12px;\n  opacity: 0.9;\n}\n\n.nightclub-close-btn {\n  background: transparent;\n  border: none;\n  color: white;\n  font-size: 32px;\n  cursor: pointer;\n  line-height: 1;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.2s;\n}\n\n.nightclub-close-btn:hover {\n  transform: scale(1.1);\n}\n\n/* ==================== å†…å®¹åŒºåŸŸ */\n.nightclub-content {\n     flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n}\n\n.nightclub-content::-webkit-scrollbar {\n  width: 8px;\n}\n\n.nightclub-content::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n.nightclub-content::-webkit-scrollbar-thumb {\n  background: var(--nightclub-primary);\n  border-radius: 4px;\n}\n\n/* ==================== å¡ç‰‡æ ·å¼ */\n.nightclub-card {\n  background: var(--nightclub-bg-light);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  margin-bottom: 16px;\n  overflow: hidden;\n}\n\n.nightclub-card-title {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 16px;\n  background: rgba(233, 69, 96, 0.2);\n  font-weight: 600;\n  font-size: 16px;\n}\n\n.nightclub-card-content {\n  padding: 16px;\n}\n\n.nightclub-info-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.nightclub-info-row:last-child {\n  border-bottom: none;\n}\n\n.nightclub-info-label {\n  color: var(--nightclub-text-dim);\n  font-size: 14px;\n}\n\n.nightclub-info-value {\n  color: var(--nightclub-text-light);\n  font-weight: 500;\n  text-align: right;\n}\n\n/* ==================== è¿›åº¦æ¡ */\n.nightclub-progress-bar {\n  width: 100%;\n  height: 8px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 4px;\n  overflow: hidden;\n  margin-top: 8px;\n}\n\n.nightclub-progress-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #e94560 0%, #ff6b81 100%);\n  border-radius: 4px;\n  transition: width 0.3s;\n}\n\n/* ==================== åŸ¹å…»å¯¹è±¡åˆ—è¡¨ */\n.nightclub-trainee-item {\n  background: rgba(255, 255, 255, 0.03);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 8px;\n  padding: 12px;\n  margin-bottom: 12px;\n  transition: all 0.3s;\n}\n\n.nightclub-trainee-item:hover {\n  border-color: var(--nightclub-primary);\n  background: rgba(233, 69, 96, 0.1);\n  transform: translateX(4px);\n}\n\n.nightclub-trainee-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.nightclub-trainee-name {\n  font-weight: 600;\n  font-size: 15px;\n  color: var(--nightclub-primary);\n}\n\n.nightclub-trainee-status {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n}\n\n/* ==================== å½’æ¡£è‰ºäºº */\n.nightclub-archived-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n  gap: 12px;\n}\n\n.nightclub-archived-item {\n  background: rgba(255, 255, 255, 0.03);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 8px;\n  padding: 12px;\n  text-align: center;\n  transition: all 0.3s;\n}\n\n.nightclub-archived-item:hover {\n  border-color: var(--nightclub-primary);\n  transform: translateY(-2px);\n}\n\n.nightclub-archived-name {\n  font-weight: 600;\n  margin-bottom: 4px;\n}\n\n.nightclub-archived-type {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n}\n\n/* å½’æ¡£è‰ºäººç®€è¿°æ ·å¼ */\n.archived-description {\n  padding: 8px 0;\n  line-height: 1.6;\n}\n\n.archived-description-label {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--nightclub-primary);\n  margin-right: 4px;\n}\n\n.archived-description-text {\n  font-size: 14px;\n  color: var(--nightclub-text-light);\n  line-height: 1.6;\n}\n\n/* ==================== ç©ºçŠ¶æ€ */\n.nightclub-empty {\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--nightclub-text-dim);\n}\n\n.nightclub-empty-icon {\n  font-size: 48px;\n  margin-bottom: 12px;\n  opacity: 0.5;\n}\n\n.nightclub-empty-text {\n  font-size: 14px;\n}\n\n/* ==================== åŠ è½½çŠ¶æ€ */\n.nightclub-loading {\n  text-align: center;\n  padding: 40px;\n  color: var(--nightclub-text-dim);\n}\n\n.nightclub-loading-icon {\n  font-size: 32px;\n  margin-bottom: 12px;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* ==================== å¯¹è±¡ä¾¦æµ‹é¡µé¢ */\n.detection-current-display {\n  margin-bottom: 16px;\n}\n\n.detection-display-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: rgba(255, 255, 255, 0.15);\n  border-radius: 8px 8px 0 0;\n}\n\n.detection-display-title {\n  font-weight: 600;\n  font-size: 14px;\n}\n\n/* ä¾¦æµ‹ç»“æœæ˜¾ç¤ºæ¡† */\n.detection-results-display {\n  background: rgba(76, 175, 80, 0.1);\n  border: 1px solid rgba(76, 175, 80, 0.3);\n  border-radius: 8px;\n  margin-bottom: 16px;\n  overflow: hidden;\n}\n\n.detection-results-header {\n  padding: 12px 16px;\n  background: rgba(76, 175, 80, 0.2);\n}\n\n.detection-results-title {\n  font-weight: 600;\n  font-size: 14px;\n  color: #4caf50;\n}\n\n.detection-results-content {\n  padding: 12px;\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.detection-result-item {\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  padding: 10px;\n  margin-bottom: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.detection-result-item:hover {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(76, 175, 80, 0.5);\n  transform: translateX(2px);\n}\n\n.detection-result-item:last-child {\n  margin-bottom: 0;\n}\n\n.detection-result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.detection-result-name {\n  font-weight: 600;\n  color: #4caf50;\n}\n\n.detection-result-toggle {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n}\n\n.detection-result-toggle:hover {\n  color: var(--nightclub-text-light);\n}\n\n.detection-result-data {\n  display: grid;\n  grid-template-rows: 0fr;\n  transition: grid-template-rows 0.3s ease;\n  overflow: hidden;\n}\n\n.detection-result-data.expanded {\n  grid-template-rows: 1fr;\n}\n\n.detection-result-data-inner {\n  min-height: 0;\n  padding-top: 8px;\n  margin-top: 8px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  font-size: 13px;\n  line-height: 1.8;\n  white-space: pre-wrap;\n}\n\n.detection-results-empty {\n  text-align: center;\n  padding: 24px;\n  color: var(--nightclub-text-dim);\n  font-style: italic;\n}\n\n.detection-display-content {\n  padding: 12px;\n  min-height: 80px;\n  max-height: 200px;\n  overflow-y: auto;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 0 0 8px 8px;\n}\n\n.detection-display-empty {\n  text-align: center;\n  padding: 20px;\n  color: var(--nightclub-text-dim);\n  font-size: 13px;\n}\n\n.detection-display-item {\n  background: rgba(255, 255, 255, 0.08);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-radius: 6px;\n  padding: 10px;\n  margin-bottom: 8px;\n}\n\n.detection-display-item:last-child {\n  margin-bottom: 0;\n}\n\n.detection-display-item-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 6px;\n}\n\n.detection-display-item-name {\n  font-weight: 600;\n  color: var(--nightclub-primary);\n}\n\n.detection-display-item-category {\n  font-size: 12px;\n  padding: 2px 8px;\n  background: rgba(255, 255, 255, 0.25);\n  border-radius: 4px;\n  color: white;\n  white-space: nowrap;\n}\n\n.detection-display-item-remove {\n  background: transparent;\n  border: none;\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 20px;\n  cursor: pointer;\n  padding: 0;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n}\n\n.detection-display-item-remove:hover {\n  color: var(--nightclub-primary);\n  transform: scale(1.2);\n}\n\n.detection-display-item-info {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n  line-height: 1.4;\n}\n\n.detection-description {\n  padding: 12px 16px;\n  background: rgba(255, 193, 7, 0.1);\n  border-left: 3px solid rgba(255, 193, 7, 0.5);\n  border-radius: 4px;\n  margin-bottom: 16px;\n  font-size: 13px;\n  line-height: 1.6;\n  color: var(--nightclub-text-light);\n}\n\n.detection-clear-btn {\n  background: rgba(255, 69, 58, 0.2);\n  border: 1px solid rgba(255, 69, 58, 0.5);\n  color: #ff453a;\n  padding: 4px 12px;\n  border-radius: 4px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.detection-clear-btn:hover {\n  background: rgba(255, 69, 58, 0.3);\n}\n\n.detection-targets-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 12px;\n  margin-bottom: 16px;\n}\n\n.detection-target-item {\n  background: rgba(255, 255, 255, 0.05);\n  border: 2px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  padding: 12px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.detection-target-item:hover {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(233, 69, 96, 0.6);\n  transform: translateY(-2px);\n}\n\n.detection-target-item.selected {\n  background: rgba(233, 69, 96, 0.2);\n  border-color: var(--nightclub-primary);\n}\n\n.detection-target-item.detected {\n  background: rgba(255, 215, 0, 0.15);\n  border-color: rgba(255, 215, 0, 0.5);\n  cursor: not-allowed;\n  opacity: 0.8;\n}\n\n.detection-target-item.detected:hover {\n  transform: none;\n  border-color: rgba(255, 215, 0, 0.5);\n}\n\n.detection-target-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.detection-target-name {\n  font-weight: 600;\n  color: var(--nightclub-text-light);\n}\n\n.detection-target-category {\n  font-size: 11px;\n  padding: 2px 6px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 4px;\n}\n\n.detection-target-info {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n  margin-bottom: 8px;\n}\n\n.detection-target-status {\n  font-size: 12px;\n  color: var(--nightclub-primary);\n  text-align: center;\n  padding: 4px;\n  background: rgba(233, 69, 96, 0.1);\n  border-radius: 4px;\n}\n\n.detection-actions {\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n}\n\n.detection-action-btn {\n  flex: 1;\n  max-width: 250px;\n  padding: 12px 24px;\n  background: var(--nightclub-primary);\n  border: none;\n  border-radius: 8px;\n  color: white;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.detection-action-btn:hover:not(:disabled) {\n  background: #c8365a;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(233, 69, 96, 0.4);\n}\n\n.detection-action-btn:disabled {\n  background: #555;\n  cursor: not-allowed;\n  opacity: 0.4;\n}\n\n.detection-action-btn.detection-remove-btn {\n  background: #444;\n}\n\n.detection-action-btn.detection-remove-btn:hover:not(:disabled) {\n  background: #666;\n}\n\n/* ==================== ç§»åŠ¨ç«¯é€‚é… */\n@media (max-width: 768px) {\n  .nightclub-main-panel {\n    width: 95vw;\n    height: 90vh;\n  }\n\n  .nightclub-toggle-btn {\n    width: 56px;\n    height: 56px;\n    font-size: 24px;\n  }\n\n  .nightclub-tab {\n    font-size: 11px;\n    padding: 10px 8px;\n  }\n\n  .detection-targets-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  /* ç¡®ä¿æŒ‰é’®å¯äº¤äº’ */\n  .nightclub-toggle-btn {\n    pointer-events: auto;\n    z-index: 10002;\n  }\n}\n\n/* ç«–å±ä¼˜åŒ– */\n@media (max-width: 480px) and (orientation: portrait) {\n  .nightclub-main-panel {\n    width: 100vw;\n    height: 100vh;\n    max-width: none;\n    max-height: none;\n    border-radius: 0;\n    border: none;\n  }\n\n  .nightclub-toggle-btn {\n    width: 50px;\n    height: 50px;\n    font-size: 22px;\n  }\n\n  .nightclub-tab {\n    font-size: 10px;\n    padding: 8px 4px;\n  }\n\n  /* ç¡®ä¿æŒ‰é’®åœ¨å°å±å¹•ä¸‹ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ */\n  .nightclub-toggle-btn {\n    z-index: 10002;\n  }\n\n  .detection-targets-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n/* æ¨ªå±ä¼˜åŒ– */\n@media (max-height: 600px) and (orientation: landscape) {\n  .nightclub-main-panel {\n    height: 95vh;\n    max-height: none;\n  }\n\n  .nightclub-content {\n    padding: 10px;\n  }\n}\n\n/* ==================== å…¨å±€ç§»åŠ¨ç«¯ä¼˜åŒ– */\n/* é˜²æ­¢åŒå‡»ç¼©æ”¾ */\n* {\n  touch-action: manipulation;\n}\n\n/* å…è®¸æŒ‰é’®å®Œå…¨æ§åˆ¶è§¦æ‘¸è¡Œä¸º */\n.nightclub-toggle-btn {\n  touch-action: none !important;\n}\n\n/* ç§»é™¤è§¦æ‘¸é«˜äº® */\n* {\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n\n/* ä¼˜åŒ–æ»šåŠ¨ä½“éªŒï¼ˆiOS å¹³æ»‘æ»šåŠ¨ï¼‰*/\n.nightclub-content {\n  -webkit-overflow-scrolling: touch;\n}\n\n/* ç§»åŠ¨ç«¯å­—ä½“ä¼˜åŒ– */\nbody {\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n}\n\n/* æ”¯æŒåˆ˜æµ·å±ç­‰å®‰å…¨åŒºåŸŸ - ä»…åœ¨å°å±å¹•åº”ç”¨ */\n@supports (padding: max(0px)) {\n  @media (max-width: 480px) {\n    .nightclub-main-panel {\n      padding-top: max(0px, env(safe-area-inset-top));\n      padding-bottom: max(0px, env(safe-area-inset-bottom));\n      padding-left: max(0px, env(safe-area-inset-left));\n      padding-right: max(0px, env(safe-area-inset-right));\n    }\n  }\n}\n\n/* ç§»é™¤æ‰€æœ‰æŒ‰é’®å’Œå¯äº¤äº’å…ƒç´ çš„ç„¦ç‚¹æ¡† */\nbutton:focus,\n  button:active,\n.nightclub-toggle-btn:focus,\n.nightclub-toggle-btn:active,\n.nightclub-close-btn:focus,\n.nightclub-close-btn:active,\n.nightclub-trainee-item:focus,\n.nightclub-trainee-item:active {\n  outline: none;\n  outline-color: transparent;\n}\n  </style>\n'),console.log('âœ… æ ·å¼å·²æ³¨å…¥')),n.body.insertAdjacentHTML('beforeend','\n\x3c!-- æ‹–åŠ¨æŒ‰é’® --\x3e\n<div id="nightclub-toggle-btn" class="nightclub-toggle-btn">\n  <span>ğŸŒ™</span>\n</div>\n\n\x3c!-- ä¸»é¢æ¿ --\x3e\n<div id="nightclub-main-panel" class="nightclub-main-panel">\n  <div class="nightclub-header">\n    <div class="nightclub-header-left">\n      <div class="nightclub-header-title">ğŸŒ™ æ±Ÿç•”å¤œæ€»ä¼š</div>\n      <div class="nightclub-header-subtitle" id="nightclub-time-display">åŠ è½½ä¸­...</div>\n    </div>\n    <button class="nightclub-close-btn" id="nightclub-close-btn">Ã—</button>\n  </div>\n  \n  \x3c!-- æ ‡ç­¾é¡µå¯¼èˆª --\x3e\n  <div class="nightclub-tabs">\n    <button class="nightclub-tab active" data-page="club">\n      ğŸ¢ ä¼šæ‰€çŠ¶æ€\n    </button>\n    <button class="nightclub-tab" data-page="workshop">\n      ğŸ­ å·¥åŠçŠ¶æ€<span class="nightclub-tab-badge" id="tab-badge-workshop">0</span>\n    </button>\n    <button class="nightclub-tab" data-page="trainees">\n      ğŸ‘¥ åŸ¹å…»å¯¹è±¡<span class="nightclub-tab-badge" id="tab-badge-trainees">0</span>\n    </button>\n    <button class="nightclub-tab" data-page="archived">\n      ğŸ“ å·²å½’æ¡£<span class="nightclub-tab-badge" id="tab-badge-archived">0</span>\n    </button>\n    <button class="nightclub-tab" data-page="detection">\n      ğŸ” å¯¹è±¡ä¾¦æµ‹<span class="nightclub-tab-badge" id="tab-badge-detection">0</span>\n    </button>\n  </div>\n  \n  <div class="nightclub-content" id="nightclub-content">\n    <div class="nightclub-loading">\n      <div class="nightclub-loading-icon">â³</div>\n      <div>æ­£åœ¨åŠ è½½æ•°æ®...</div>\n    </div>\n  </div>\n</div>\n'),console.log('âœ… HTML å·²æ³¨å…¥');const t=n.getElementById('nightclub-toggle-btn');if(t)try{const n=localStorage.getItem('nightclub-btn-position');if(n){const e=JSON.parse(n);t.style.left=e.left+'px',t.style.top=e.top+'px',console.log('ğŸ“ æ¢å¤æŒ‰é’®ä½ç½®:',e)}}catch(n){console.warn('âš ï¸ æ¢å¤æŒ‰é’®ä½ç½®å¤±è´¥')}!function(n){const t=n.getElementById('nightclub-toggle-btn'),i=n.getElementById('nightclub-main-panel'),a=$(n);function l(n,i){if(e)return!1;const a=window.getComputedStyle(t),o=parseInt(a.left)||0,l=parseInt(a.top)||0;return e={startX:n,startY:i,initialLeft:o,initialTop:l},t.classList.add('dragging'),console.log('ğŸ–±ï¸ å¼€å§‹æ‹–åŠ¨æŒ‰é’®'),!0}function c(n,i){if(!e)return;const a=n-e.startX,o=i-e.startY;let l=e.initialLeft+a,c=e.initialTop+o;const s=window.top||window,r=$(s).width()-80,d=$(s).height()-80;l=Math.max(0,Math.min(l,r)),c=Math.max(0,Math.min(c,d)),t.style.left=l+'px',t.style.top=c+'px'}function s(a,l){if(!e)return;t.classList.remove('dragging');const c=a-e.startX,s=l-e.startY,r=Math.sqrt(c*c+s*s),g=window.getComputedStyle(t),p={left:parseInt(g.left)||0,top:parseInt(g.top)||0};localStorage.setItem('nightclub-btn-position',JSON.stringify(p)),console.log('âœ… æŒ‰é’®æ‹–åŠ¨ç»“æŸï¼Œä¿å­˜ä½ç½®:',p),e=null,r<5&&(console.log('ğŸ¨ æ£€æµ‹åˆ°ç‚¹å‡»ï¼Œåˆ‡æ¢é¢æ¿'),i.classList.toggle('active'),i.classList.contains('active')&&(o=0,d(n)))}$(t).on('mousedown.nightclub-plugin',function(n){l(n.clientX,n.clientY)&&(n.preventDefault(),n.stopPropagation())}),$(t).on('touchstart.nightclub-plugin',function(n){const t=n.originalEvent.touches[0];l(t.clientX,t.clientY)&&(n.preventDefault(),n.stopPropagation())}),a.on('mousemove.nightclub-plugin',function(n){c(n.clientX,n.clientY),e&&n.preventDefault()}),a.on('touchmove.nightclub-plugin',function(n){const t=n.originalEvent.touches[0];c(t.clientX,t.clientY),e&&n.preventDefault()}),a.on('mouseup.nightclub-plugin',function(n){s(n.clientX,n.clientY)}),a.on('touchend.nightclub-plugin touchcancel.nightclub-plugin',function(n){const t=n.originalEvent.changedTouches[0];t?s(t.clientX,t.clientY):s(0,0)}),console.log('âœ… æŒ‰é’®æ‹–åŠ¨åŠŸèƒ½å·²åˆå§‹åŒ–')}(n),function(n){const t=n.getElementById('nightclub-close-btn');t&&t.addEventListener('click',t=>{t.stopPropagation();const e=n.getElementById('nightclub-main-panel');e&&e.classList.remove('active')});(function(n){const t=n.querySelectorAll('.nightclub-tab');t.forEach(e=>{e.addEventListener('click',function(e){e.stopPropagation();const i=this.getAttribute('data-page');i&&(l=i,t.forEach(n=>n.classList.remove('active')),this.classList.add('active'),a&&p(n,a),console.log('ğŸ“„ åˆ‡æ¢åˆ°é¡µé¢:',i))})}),console.log('âœ… æ ‡ç­¾é¡µåˆ‡æ¢å·²åˆå§‹åŒ–')})(n),function(n){const t=$('#nightclub-main-panel',n)[0],e=$('.nightclub-header',n)[0],a=$(n);if(!t||!e)return void console.error('âŒ é¢æ¿æˆ–å¤´éƒ¨å…ƒç´ æœªæ‰¾åˆ°');function o(n,a){console.log('ğŸ–±ï¸ å¼€å§‹æ‹–åŠ¨é¢æ¿');const o=t.getBoundingClientRect();t.style.setProperty('transform','none','important'),t.style.setProperty('left',`${o.left}px`,'important'),t.style.setProperty('top',`${o.top}px`,'important'),i={startX:n,startY:a,initialLeft:o.left,initialTop:o.top},$(t).addClass('dragging'),$(e).addClass('dragging'),console.log('âœ… é¢æ¿æ‹–åŠ¨æ•°æ®å·²è®¾ç½®:',i)}function l(n,e){if(!i)return;const a=n-i.startX,o=e-i.startY,l=i.initialLeft+a,c=i.initialTop+o;console.log(`ğŸ“ ç§»åŠ¨é¢æ¿: deltaX=${a}, deltaY=${o}, newLeft=${l}, newTop=${c}`),t.style.setProperty('left',`${l}px`,'important'),t.style.setProperty('top',`${c}px`,'important')}function c(){if(console.log('ğŸ–±ï¸ é¢æ¿æ‹–åŠ¨ç»“æŸ'),i){const n=t.getBoundingClientRect(),e={left:n.left,top:n.top};localStorage.setItem('nightclub-panel-position',JSON.stringify(e)),console.log('âœ… é¢æ¿æ‹–åŠ¨ç»“æŸï¼Œä¿å­˜ä½ç½®:',e)}i=null,$(t).removeClass('dragging'),$(e).removeClass('dragging')}$(e).on('mousedown.nightclub-panel-drag',function(n){$(n.target).closest('#nightclub-close-btn').length>0?console.log('âš ï¸ ç‚¹å‡»äº†å…³é—­æŒ‰é’®ï¼Œè·³è¿‡æ‹–åŠ¨'):(n.preventDefault(),o(n.clientX,n.clientY))}),a.on('mousemove.nightclub-panel-drag',function(n){l(n.clientX,n.clientY)}),a.on('mouseup.nightclub-panel-drag',function(){c()}),$(e).on('touchstart.nightclub-panel-drag',function(n){if($(n.target).closest('#nightclub-close-btn').length>0)return void console.log('âš ï¸ è§¦æ‘¸äº†å…³é—­æŒ‰é’®ï¼Œè·³è¿‡æ‹–åŠ¨');const t=n.originalEvent.touches[0];t&&(n.preventDefault(),o(t.clientX,t.clientY))}),a.on('touchmove.nightclub-panel-drag',function(n){const t=n.originalEvent.touches[0];t&&l(t.clientX,t.clientY)}),a.on('touchend.nightclub-panel-drag touchcancel.nightclub-panel-drag',function(){c()});const s=localStorage.getItem('nightclub-panel-position');if(s)try{const n=JSON.parse(s);t.style.setProperty('transform','none','important'),t.style.setProperty('left',`${n.left}px`,'important'),t.style.setProperty('top',`${n.top}px`,'important'),console.log('âœ… å·²æ¢å¤é¢æ¿ä½ç½®:',n)}catch(n){console.error('âŒ æ¢å¤é¢æ¿ä½ç½®å¤±è´¥:',n)}console.log('âœ… é¢æ¿æ‹–åŠ¨åŠŸèƒ½å·²åˆå§‹åŒ–')}(n),console.log('âœ… é¢æ¿ç³»ç»Ÿå·²åˆå§‹åŒ–')}(n),console.log('âœ… æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶åˆå§‹åŒ–å®Œæˆï¼')}async function d(n){try{if('undefined'==typeof Mvu)try{if(!window.parent||void 0===window.parent.Mvu)throw new Error('çˆ¶çª—å£ä¸­ä¹Ÿæ²¡æœ‰ MVU');window.Mvu=window.parent.Mvu,console.log('âœ… å·²ä»çˆ¶çª—å£å¼•ç”¨ MVU')}catch(t){return console.warn('âš ï¸ MVU æ¡†æ¶æœªåŠ è½½æˆ–æ— æ³•è®¿é—®çˆ¶çª—å£'),void(o<5?(o++,console.log(`ğŸ”„ ç¬¬ ${o}/5 æ¬¡é‡è¯•åŠ è½½ MVU...`),setTimeout(()=>d(n),400)):g(n,'MVU æ¡†æ¶æœªåŠ è½½ï¼Œè¯·ç¡®ä¿å·²å®‰è£…é…’é¦†åŠ©æ‰‹å¹¶å¯ç”¨ MVU æ¡†æ¶'))}const t=Mvu.getMvuData({type:'message',message_id:'latest'}),e=t?.stat_data;if(!e)return console.warn('âš ï¸ MVU æ•°æ®ä¸ºç©º'),void(o<5?(o++,setTimeout(()=>d(n),400)):g(n,'æœªèƒ½åŠ è½½æ•°æ®'));a=e,console.log('âœ… æ•°æ®åŠ è½½æˆåŠŸ',e),p(n,e)}catch(t){console.error('âŒ åŠ è½½æ•°æ®å‡ºé”™:',t),g(n,'åŠ è½½å‡ºé”™: '+t.message)}}function g(n,t){const e=n.getElementById('nightclub-content');e&&(e.innerHTML=`\n      <div class="nightclub-empty">\n        <div class="nightclub-empty-icon">âš ï¸</div>\n        <div class="nightclub-empty-text">${t}</div>\n      </div>\n    `)}function p(n,t){const e=n.getElementById('nightclub-content'),i=n.getElementById('nightclub-time-display');if(!e)return;if(i&&t.æ—¶é—´ä¿¡æ¯){const n=s(t,'æ—¶é—´ä¿¡æ¯.å½“å‰æ—¥æœŸ',''),e=s(t,'æ—¶é—´ä¿¡æ¯.å½“å‰æ—¶é—´',''),a=s(t,'æ—¶é—´ä¿¡æ¯.è¥ä¸šçŠ¶æ€',''),o=s(t,'åœ°ç‚¹ä¿¡æ¯.å½“å‰ä½ç½®','');i.textContent=`${n} ${e} | ${a}${o?` | ${o}`:''}`}const o=t.å¤œæ€»ä¼šç»è¥?.å¾…å¤„ç†è®¢å•?.length||0,r=t.å·¥åŠåŸ¹å…»å¯¹è±¡?.åŸ¹å…»åˆ—è¡¨?.length||0,d=t.å·²å½’æ¡£?.æ¡£æ¡ˆåˆ—è¡¨?.length||0,g=t.ä¾¦æµ‹æ•°æ®?Object.keys(t.ä¾¦æµ‹æ•°æ®).length:0,u=n.getElementById('tab-badge-workshop'),h=n.getElementById('tab-badge-trainees'),v=n.getElementById('tab-badge-archived'),m=n.getElementById('tab-badge-detection');u&&(u.textContent=String(o)),h&&(h.textContent=String(r)),v&&(v.textContent=String(d)),m&&(m.textContent=String(g));let f='';'club'===l?f+=function(n){let t='';n.å¤œæ€»ä¼šç»è¥&&(t+=`\n      <div class="nightclub-card">\n        <div class="nightclub-card-title">\n          <span>ğŸ’¼</span>\n          <span>ç»è¥çŠ¶å†µ</span>\n        </div>\n        <div class="nightclub-card-content">\n          <div class="nightclub-info-row">\n            <span class="nightclub-info-label">VIPå®¢æˆ·</span>\n            <span class="nightclub-info-value">${s(n,'å¤œæ€»ä¼šç»è¥.VIPå®¢æˆ·æ•°','0')} äºº</span>\n          </div>\n        </div>\n      </div>\n    `);return t+='\n    <div class="nightclub-card">\n      <div class="nightclub-card-title">\n        <span>ğŸ¢</span>\n        <span>åœ°ä¸ŠåŒºåŸŸ</span>\n      </div>\n      <div class="nightclub-card-content">\n          <div class="nightclub-info-row">\n          <span class="nightclub-info-label">é…’æ°´å§å°</span>\n          <span class="nightclub-info-value">æ­£å¸¸è¥ä¸š</span>\n          </div>\n        <div class="nightclub-info-row">\n          <span class="nightclub-info-label">è±ªåèˆå…</span>\n          <span class="nightclub-info-value">æ­£å¸¸è¥ä¸š</span>\n        </div>\n        <div class="nightclub-info-row">\n          <span class="nightclub-info-label">KTVåŒ…å¢</span>\n          <span class="nightclub-info-value">æ­£å¸¸è¥ä¸š</span>\n        </div>\n        <div class="nightclub-info-row">\n          <span class="nightclub-info-label">VIPä¼‘æ¯å®¤</span>\n          <span class="nightclub-info-value">æ­£å¸¸è¥ä¸š</span>\n        </div>\n        </div>\n      </div>\n    ',t}(t):'workshop'===l?f+=function(n){let t='';if(t+=`\n    <div class="nightclub-card">\n      <div class="nightclub-card-title">\n        <span>ğŸ­</span>\n        <span>åœ°ä¸‹åŒºåŸŸ</span>\n      </div>\n      <div class="nightclub-card-content">\n        <div class="nightclub-info-row">\n          <span class="nightclub-info-label">åŸºç¡€åŸ¹è®­ä¸­å¿ƒ</span>\n          <span class="nightclub-info-value">è¿è¡Œä¸­</span>\n        </div>\n        <div class="nightclub-info-row">\n          <span class="nightclub-info-label">å½¢ä½“å¡‘é€ ä¸­å¿ƒ</span>\n          <span class="nightclub-info-value">è¿è¡Œä¸­</span>\n        </div>\n        <div class="nightclub-info-row">\n          <span class="nightclub-info-label">ä¿å…»æŠ¤ç†ä¸­å¿ƒ</span>\n          <span class="nightclub-info-value">è¿è¡Œä¸­</span>\n        </div>\n        <div class="nightclub-info-row">\n          <span class="nightclub-info-label">å½“å‰åŸ¹å…»äººæ•°</span>\n          <span class="nightclub-info-value">${n.å·¥åŠåŸ¹å…»å¯¹è±¡?.å½“å‰åŸ¹å…»äººæ•°||0} äºº</span>\n        </div>\n      </div>\n    </div>\n  `,n.å¤œæ€»ä¼šç»è¥?.å¾…å¤„ç†è®¢å•&&n.å¤œæ€»ä¼šç»è¥.å¾…å¤„ç†è®¢å•.length>0){const e=n.å¤œæ€»ä¼šç»è¥.å¾…å¤„ç†è®¢å•;t+=`\n      <div class="nightclub-card">\n        <div class="nightclub-card-title">\n          <span>ğŸ“‹</span>\n          <span>è®¢å•è¯¦æƒ… (${e.length})</span>\n        </div>\n        <div class="nightclub-card-content">\n    `,e.forEach(n=>{const e=n.å§”æ‰˜äºº||'æœªçŸ¥å§”æ‰˜äºº',i=n.éœ€æ±‚ç±»å‹||'',a=n.å…·ä½“è¦æ±‚||'',o=n.æˆªæ­¢æ—¥æœŸ||'';t+=`\n        <div class="nightclub-trainee-item">\n          <div class="nightclub-trainee-header">\n            <span class="nightclub-trainee-name">${e}</span>\n          </div>\n          ${i?`\n          <div class="nightclub-info-row">\n            <span class="nightclub-info-label">éœ€æ±‚ç±»å‹</span>\n            <span class="nightclub-info-value">${i}</span>\n          </div>`:''}\n          ${a?`\n          <div class="nightclub-info-row">\n            <span class="nightclub-info-label">å…·ä½“è¦æ±‚</span>\n            <span class="nightclub-info-value">${a}</span>\n          </div>`:''}\n          ${o?`\n          <div class="nightclub-info-row">\n            <span class="nightclub-info-label">æˆªæ­¢æ—¥æœŸ</span>\n            <span class="nightclub-info-value">${o}</span>\n          </div>`:''}\n        </div>\n      `}),t+='\n        </div>\n      </div>\n    '}else t+='\n      <div class="nightclub-empty">\n        <div class="nightclub-empty-icon">ğŸ“­</div>\n        <div class="nightclub-empty-text">æš‚æ— å¾…å¤„ç†è®¢å•</div>\n      </div>\n    ';return t}(t):'trainees'===l?f+=function(n){let t='';if(n.å·¥åŠåŸ¹å…»å¯¹è±¡){const e=n.å·¥åŠåŸ¹å…»å¯¹è±¡.åŸ¹å…»åˆ—è¡¨||[];0===e.length?t+='\n          <div class="nightclub-empty">\n            <div class="nightclub-empty-icon">ğŸ“­</div>\n            <div class="nightclub-empty-text">æš‚æ— åŸ¹å…»å¯¹è±¡</div>\n          </div>\n      ':(t+=`\n        <div class="nightclub-card">\n          <div class="nightclub-card-title">\n            <span>ğŸ‘¥</span>\n            <span>å·¥åŠåŸ¹å…»å¯¹è±¡ (${e.length})</span>\n          </div>\n          <div class="nightclub-card-content">\n      `,e.forEach(n=>{const e=n.å§“å||'æœªçŸ¥',i=n.åŸºæœ¬ä¿¡æ¯?.å¹´é¾„||'',a=n.åŸºæœ¬ä¿¡æ¯?.æ¥æº||'',o=n.åŸºæœ¬ä¿¡æ¯?.åŸå§‹å¤–è²Œ||'',l='number'==typeof n.åŸ¹å…»è¿›åº¦?n.åŸ¹å…»è¿›åº¦:n.åŸ¹å…»è¿›åº¦||'0',c=n.å®šåˆ¶ä¿¡æ¯?.å¯¹åº”è®¢å•||'æ— ',s=n.å®šåˆ¶ä¿¡æ¯?.ç›®æ ‡å½¢è±¡||'æœªå®š',r=n.å®šåˆ¶ä¿¡æ¯?.ç‰¹æ®Šè¦æ±‚||'';t+=`\n          <div class="nightclub-trainee-item">\n            <div class="nightclub-trainee-header">\n              <span class="nightclub-trainee-name">${e}</span>\n            </div>\n            <div class="nightclub-info-row">\n              <span class="nightclub-info-label">å¹´é¾„ / æ¥æº</span>\n              <span class="nightclub-info-value">${i}å² / ${a}</span>\n            </div>\n            ${o?`\n            <div class="nightclub-info-row">\n              <span class="nightclub-info-label">åŸå§‹å¤–è²Œ</span>\n              <span class="nightclub-info-value">${o}</span>\n            </div>`:''}\n            <div class="nightclub-info-row">\n              <span class="nightclub-info-label">åŸ¹å…»è¿›åº¦</span>\n              <span class="nightclub-info-value">${l}%</span>\n            </div>\n            <div class="nightclub-progress-bar">\n              <div class="nightclub-progress-fill" style="width: ${l}%"></div>\n            </div>\n            <div class="nightclub-info-row">\n              <span class="nightclub-info-label">å¯¹åº”è®¢å•</span>\n              <span class="nightclub-info-value">${c}</span>\n            </div>\n            <div class="nightclub-info-row">\n              <span class="nightclub-info-label">ç›®æ ‡å½¢è±¡</span>\n              <span class="nightclub-info-value">${s}</span>\n            </div>\n            ${r?`\n            <div class="nightclub-info-row">\n              <span class="nightclub-info-label">ç‰¹æ®Šè¦æ±‚</span>\n              <span class="nightclub-info-value">${r}</span>\n            </div>`:''}\n          </div>\n        `}),t+='\n        </div>\n      </div>\n    ')}return t}(t):'archived'===l?f+=function(n){let t='';if(n.å·²å½’æ¡£){const e=n.å·²å½’æ¡£.æ¡£æ¡ˆåˆ—è¡¨||[];0===e.length?t+='\n          <div class="nightclub-empty">\n            <div class="nightclub-empty-icon">ğŸ“­</div>\n            <div class="nightclub-empty-text">æš‚æ— å½’æ¡£è‰ºäºº</div>\n          </div>\n      ':(t+=`\n        <div class="nightclub-card">\n          <div class="nightclub-card-title">\n            <span>ğŸ“</span>\n            <span>å·²å½’æ¡£ (${e.length})</span>\n          </div>\n          <div class="nightclub-card-content">\n      `,e.forEach(n=>{const e=n.å§“å||'',i=n.è‰ºå||'æœªçŸ¥',a=n.ç®€è¿°||'';t+=`\n          <div class="nightclub-trainee-item">\n            <div class="nightclub-trainee-header">\n              <span class="nightclub-trainee-name">${i}${e?` (${e})`:''}</span>\n            </div>\n            ${a?`\n            <div class="archived-description">\n              <span class="archived-description-label">ç®€è¿°ï¼š</span><span class="archived-description-text">${a}</span>\n            </div>`:''}\n          </div>\n        `}),t+='\n          </div>\n          </div>\n        ')}return t}(t):'detection'===l&&(f+=function(n){let t='';const e=n.ä¾¦æµ‹æ•°æ®||{},i=Object.keys(e).length,a=n=>n.replace(/\\n/g,'<br>').replace(/\n/g,'<br>'),o=[];n.å·¥åŠåŸ¹å…»å¯¹è±¡?.åŸ¹å…»åˆ—è¡¨&&n.å·¥åŠåŸ¹å…»å¯¹è±¡.åŸ¹å…»åˆ—è¡¨.forEach(n=>{n.å§“å&&o.push({name:n.å§“å,category:'åŸ¹å…»å¯¹è±¡',info:`ç¼–å·: ${n.ç¼–å·||'æœªçŸ¥'} | åŸ¹å…»è¿›åº¦: ${n.åŸ¹å…»è¿›åº¦||'0'}%`})});n.å·²å½’æ¡£?.æ¡£æ¡ˆåˆ—è¡¨&&n.å·²å½’æ¡£.æ¡£æ¡ˆåˆ—è¡¨.forEach(n=>{n.è‰ºå&&o.push({name:n.è‰ºå,category:'å·²å½’æ¡£',info:n.ç®€è¿°||'æš‚æ— ç®€è¿°'})});return o.push({name:'äº‘èˆ’',category:'ç®¡ç†å±‚',info:'ä¼šæ‰€ç®¡ç†è€… | åœ°ä¸Šä¸šåŠ¡è´Ÿè´£äºº'},{name:'äº‘å·',category:'ç®¡ç†å±‚',info:'å·¥åŠç®¡ç†è€… | åœ°ä¸‹ä¸šåŠ¡è´Ÿè´£äºº'}),t+=`\n    <div class="nightclub-card">\n      <div class="nightclub-card-title">\n        <span>ğŸ”</span>\n        <span>å¯¹è±¡ä¾¦æµ‹</span>\n        </div>\n      <div class="nightclub-card-content">\n        \x3c!-- å·²æœ‰ä¾¦æµ‹ç»“æœæ˜¾ç¤ºæ¡† --\x3e\n        <div class="detection-results-display">\n          <div class="detection-results-header">\n            <span class="detection-results-title">ğŸ“Š ä¾¦æµ‹ç»“æœ (${i})</span>\n          </div>\n          <div class="detection-results-content">\n            ${0===i?'<div class="detection-results-empty">æš‚æ— ä¾¦æµ‹æ•°æ®</div>':Object.entries(e).map(([n,t])=>`\n                      <div class="detection-result-item" data-detection-target="${n.replace(/'/g,'\\\'')}">\n                        <div class="detection-result-header">\n                          <span class="detection-result-name">${n}</span>\n                          <span class="detection-result-toggle">ç‚¹å‡»å±•å¼€/æ”¶èµ·</span>\n                        </div>\n                        <div class="detection-result-data">\n                          <div class="detection-result-data-inner">${a(t)}</div>\n                        </div>\n                      </div>\n                    `).join('')}\n          </div>\n        </div>\n        \n        \x3c!-- å½“å‰é€‰ä¸­å¯¹è±¡æ˜¾ç¤ºæ¡† --\x3e\n        <div class="detection-current-display">\n          <div class="detection-display-header">\n            <span class="detection-display-title">ğŸ“‹ å½“å‰é€‰ä¸­å¯¹è±¡ (${c.size}/3)</span>\n            ${c.size>0?'<button class="detection-clear-btn" id="detection-clear-all">æ¸…ç©º</button>':''}\n          </div>\n          <div class="detection-display-content">\n            ${0===c.size?'<div class="detection-display-empty">æš‚æœªé€‰æ‹©ä»»ä½•å¯¹è±¡ï¼Œè¯·ä»ä¸‹æ–¹åˆ—è¡¨ä¸­é€‰æ‹©</div>':Array.from(c).map(n=>{const t=o.find(t=>t.name===n);return t?`\n                      <div class="detection-display-item">\n                        <div class="detection-display-item-header">\n                          <span class="detection-display-item-name">${t.name}</span>\n                          <span class="detection-display-item-category">${t.category}</span>\n                          <button class="detection-display-item-remove" data-remove-target="${t.name}">Ã—</button>\n                        </div>\n      </div>\n    `:''}).join('')}\n          </div>\n        </div>\n        \n        <div class="detection-description">\n          ğŸ’¡ æç¤ºï¼šç‚¹å‡»ä¸‹æ–¹å¡ç‰‡é€‰æ‹©å¯¹è±¡ï¼ˆå»ºè®®3ä¸ªä»¥ä¸‹ï¼‰ï¼Œä¾¦æµ‹å°†åŒ…æ‹¬ï¼šæ•´ä½“æƒ…å†µã€ç¥æƒ…ã€å˜´éƒ¨ã€èƒ¸éƒ¨ã€ä¹³å¤´ã€ä¹³æ™•ã€å±è‚¡ã€å°ç©´ã€å±çœ¼ç­‰è¯¦ç»†æ•°æ®\n        </div>\n        \n        <div class="detection-targets-grid">\n  `,o.forEach(n=>{const i=c.has(n.name),a=e.hasOwnProperty(n.name),o=a?'ğŸ” å·²ä¾¦æµ‹':i?'âœ“ å·²é€‰æ‹©':'ç‚¹å‡»é€‰æ‹©';t+=`\n      <div class="detection-target-item ${a?'detected':i?'selected':''}" data-target-name="${n.name}" ${a?'data-detected="true"':''}>\n        <div class="detection-target-header">\n          <span class="detection-target-name">${n.name}</span>\n          <span class="detection-target-category">${n.category}</span>\n        </div>\n        <div class="detection-target-status">${o}</div>\n      </div>\n    `}),t+=`\n        </div>\n        \n        <div class="detection-actions">\n          <button class="detection-action-btn" id="detection-start-btn" ${0===c.size?'disabled':''}>\n            ğŸ” å¼€å§‹ä¾¦æµ‹\n          </button>\n          <button class="detection-action-btn detection-remove-btn" id="detection-remove-btn" ${0===i?'disabled':''}>\n            ğŸ—‘ï¸ åˆ é™¤ä¾¦æµ‹æ•°æ®\n          </button>\n        </div>\n      </div>\n    </div>\n  `,t}(t)),e.innerHTML=f,'detection'===l&&function(n){console.log('ğŸ”§ åˆå§‹åŒ–ä¾¦æµ‹é¡µé¢äº‹ä»¶ï¼Œå½“å‰é€‰ä¸­å¯¹è±¡:',c);const t=n.querySelectorAll('.detection-result-item');t.forEach(n=>{n.addEventListener('click',function(n){n.stopPropagation();const t=this.querySelector('.detection-result-data');t&&t.classList.toggle('expanded')})});const e=n.querySelectorAll('.detection-target-item');console.log('ğŸ¯ æ‰¾åˆ°ç›®æ ‡å¡ç‰‡æ•°é‡:',e.length),e.forEach(t=>{t.addEventListener('click',function(t){t.stopPropagation();if('true'===this.getAttribute('data-detected'))return void console.log('âš ï¸ è¯¥å¯¹è±¡å·²æœ‰ä¾¦æµ‹æ•°æ®ï¼Œæ— æ³•é€‰æ‹©');const e=this.getAttribute('data-target-name');if(console.log('ğŸ‘† ç‚¹å‡»äº†å¡ç‰‡:',e),e){if(c.has(e))c.delete(e),console.log('â– å–æ¶ˆé€‰æ‹©:',e);else{if(c.size>=3)return void alert('å»ºè®®æœ€å¤šé€‰æ‹©3ä¸ªå¯¹è±¡è¿›è¡Œä¾¦æµ‹');c.add(e),console.log('â• æ·»åŠ é€‰æ‹©:',e)}console.log('ğŸ“Š æ›´æ–°åçš„é€‰ä¸­å¯¹è±¡:',c),a&&p(n,a)}})});const i=n.getElementById('detection-clear-all');i&&i.addEventListener('click',t=>{t.stopPropagation(),console.log('ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰é€‰æ‹©'),c.clear(),a&&p(n,a)});const o=n.querySelectorAll('.detection-display-item-remove');o.forEach(t=>{t.addEventListener('click',function(t){t.stopPropagation();const e=this.getAttribute('data-remove-target');console.log('âŒ ç§»é™¤å•ä¸ªå¯¹è±¡:',e),e&&c.has(e)&&(c.delete(e),a&&p(n,a))})});const l=n.getElementById('detection-start-btn');l&&l.addEventListener('click',()=>{if(0===c.size)return;const n=Array.from(c);let t='request: æœ¬å›åˆä¸è¦è¾“å‡ºæ­£æ–‡å†…å®¹ï¼ï¼ï¼\n\nå¯¹ä»¥ä¸‹å¯¹è±¡è¿›è¡Œè¯¦ç»†èº«ä½“æ•°æ®ä¾¦æµ‹ï¼š';n.forEach((e,i)=>{t+=`ã€${e}ã€‘`,i<n.length-1&&(t+='ã€')}),t+='\n\nè¯·ä¾¦æµ‹ä»¥ä¸‹éƒ¨ä½ï¼ˆæ¯ä¸ªéƒ¨ä½æè¿°åç”¨æ¢è¡Œç¬¦åˆ†å‰²ï¼‰ï¼š1. æ•´ä½“æƒ…å†µ 2. ç¥æƒ… 3. å˜´éƒ¨ 4. èƒ¸éƒ¨ 5. ä¹³å¤´ 6. ä¹³æ™• 7. å±è‚¡ 8. å°ç©´ 9. å±çœ¼',b(t)});const s=n.getElementById('detection-remove-btn');s&&s.addEventListener('click',()=>{const n=a?.ä¾¦æµ‹æ•°æ®||{},t=Object.keys(n);if(0===t.length)return;let e='åˆ é™¤ä»¥ä¸‹å¯¹è±¡çš„ä¾¦æµ‹æ•°æ®ï¼š\n\n';t.forEach(n=>{e+=`_.remove('ä¾¦æµ‹æ•°æ®', '${n}')\n`}),b(e)})}(n)}function b(n){try{const t=(parent.document||document).querySelector('#send_textarea');if(!t)throw new Error('æœªæ‰¾åˆ°è¾“å…¥æ¡†');''!==t.value.trim()?t.value+='\n\n'+n:t.value=n,t.focus(),console.log('âœ… å‘½ä»¤å·²å¡«å……åˆ°è¾“å…¥æ¡†')}catch(t){alert('æœªèƒ½è‡ªåŠ¨æ‰¾åˆ°è¾“å…¥æ¡†ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶å‘½ä»¤ï¼š\n\n'+n),console.error('å¡«å……å‘½ä»¤å¤±è´¥:',t)}}!function n(t){'undefined'!=typeof jQuery||'undefined'!=typeof $?(console.log('âœ… jQuery å·²å°±ç»ª'),t()):(console.log('â³ ç­‰å¾… jQuery...'),setTimeout(()=>n(t),100))}(()=>{$(()=>{console.log('âœ… å¼€å§‹åˆå§‹åŒ–æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ '),r()})}),console.log('âœ… æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶è„šæœ¬åŠ è½½å®Œæˆ');const u=!0,h=t.d;export{h as __initialized__};
//# sourceMappingURL=index.js.map