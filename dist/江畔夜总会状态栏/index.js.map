{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/src/æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ /index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// ==================== æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ  ====================\n// ä½¿ç”¨ TypeScript + åŸç”Ÿå®ç°ï¼ˆä¸ä½¿ç”¨ Vueï¼Œå‚è€ƒæŒä¸Šå…¬å¯“çš„å®ç°æ–¹å¼ï¼‰\n// ç‰ˆæœ¬ï¼šè§„èŒƒåŒ–é‡æ„ç‰ˆ\n\nconsole.log('ğŸŒ™ åŠ è½½æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶...');\n\n// ==================== ç±»å‹å®šä¹‰ ====================\ninterface NightclubData {\n  æ—¶é—´ä¿¡æ¯?: {\n    å½“å‰æ—¥æœŸ?: string;\n    å½“å‰æ—¶é—´?: string;\n    æ˜ŸæœŸ?: string;\n    è¥ä¸šçŠ¶æ€?: string;\n  };\n  åœ°ç‚¹ä¿¡æ¯?: {\n    å½“å‰ä½ç½®?: string;\n  };\n  å¤œæ€»ä¼šç»è¥?: {\n    åœ¨èŒå‘˜å·¥æ•°?: number | string;\n    VIPå®¢æˆ·æ•°?: number | string;\n    å¾…å¤„ç†è®¢å•?: Array<{\n      å§”æ‰˜äºº?: string;\n      éœ€æ±‚ç±»å‹?: string;\n      å…·ä½“è¦æ±‚?: string;\n      æˆªæ­¢æ—¥æœŸ?: string;\n      [key: string]: any;\n    }>;\n  };\n  å·¥åŠåŸ¹å…»å¯¹è±¡?: {\n    å½“å‰åŸ¹å…»äººæ•°?: number | string;\n    åŸ¹å…»åˆ—è¡¨?: Array<{\n      å§“å?: string;\n      ç¼–å·?: string;\n      åŸºæœ¬ä¿¡æ¯?: {\n        å¹´é¾„?: number | string;\n        åŸå§‹å¤–è²Œ?: string;\n        æ¥æº?: string;\n      };\n      åŸ¹å…»è¿›åº¦?: number | string;\n      å®šåˆ¶ä¿¡æ¯?: {\n        å¯¹åº”è®¢å•?: string;\n        ç›®æ ‡å½¢è±¡?: string;\n        ç‰¹æ®Šè¦æ±‚?: string;\n      };\n      å¤‡æ³¨?: string[];\n    }>;\n  };\n  å·²å½’æ¡£?: {\n    æ€»æ•°?: number | string;\n    æ¡£æ¡ˆåˆ—è¡¨?: Array<{\n      å§“å?: string;\n      è‰ºå?: string;\n      ç®€è¿°?: string;\n      [key: string]: any;\n    }>;\n  };\n  ä¾¦æµ‹æ•°æ®?: {\n    [key: string]: string;\n  };\n}\n\n// ==================== æ ·å¼å®šä¹‰ ====================\n/* eslint-disable */\nconst styles = `\n<style id=\"nightclub-plugin-styles\">\n:root {\n  --nightclub-primary: #e94560;\n  --nightclub-secondary: #0f3460;\n  --nightclub-bg-dark: #16213e;\n  --nightclub-bg-mid: #1a2332;\n  --nightclub-bg-light: #2a3447;\n  --nightclub-text-light: #e4e7eb;\n  --nightclub-text-dim: #a0a8b5;\n}\n\n/* ==================== æ‹–åŠ¨æŒ‰é’® */\n.nightclub-toggle-btn {\n  position: fixed !important;\n  top: 100px;\n  left: 20px;\n  width: 64px;\n  height: 64px;\n  background: linear-gradient(135deg, #e94560 0%, #c8365a 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: grab;\n  z-index: 10000 !important;\n  box-shadow: 0 4px 12px rgba(233, 69, 96, 0.4);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: none;\n  font-size: 28px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  /* åªå¯¹ transform å’Œ box-shadow æ·»åŠ è¿‡æ¸¡ï¼Œä¸å½±å“æ‹–åŠ¨ */\n  transition: transform 0.2s, box-shadow 0.2s, opacity 0.2s;\n}\n\n.nightclub-toggle-btn:hover {\n  transform: scale(1.05);\n}\n\n.nightclub-toggle-btn.dragging {\n  cursor: grabbing !important;\n  opacity: 0.9;\n  z-index: 10001 !important;\n  /* æ‹–åŠ¨æ—¶å®Œå…¨ç¦ç”¨è¿‡æ¸¡ */\n  transition: none !important;\n}\n\n/* ==================== ä¸»é¢æ¿å®¹å™¨ */\n.nightclub-main-panel {\n  position: fixed !important;\n  top: 50vh !important;\n  left: 50vw !important;\n  transform: translate(-50%, -50%) !important;\n  width: 90vw !important;\n  max-width: 800px !important;\n  height: 85vh !important;\n  max-height: 600px !important;\n  background: var(--nightclub-bg-dark);\n  background: linear-gradient(135deg, var(--nightclub-bg-dark) 0%, var(--nightclub-bg-mid) 100%);\n  border: 2px solid var(--nightclub-primary);\n  border-radius: 12px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n  z-index: 9999 !important;\n  display: none;\n  flex-direction: column;\n  overflow: hidden;\n  color: var(--nightclub-text-light);\n  font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;\n}\n\n.nightclub-main-panel.active {\n  display: flex;\n}\n\n.nightclub-main-panel.dragging {\n  transition: none !important;\n}\n\n/* ==================== å¤´éƒ¨ */\n.nightclub-header {\n  flex-shrink: 0;\n  padding: 16px 20px;\n  background: var(--nightclub-primary);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: 600;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  cursor: move;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  transition: opacity 0.2s;\n  touch-action: none !important;\n}\n\n.nightclub-header.dragging {\n  opacity: 0.8;\n  cursor: grabbing !important;\n  transition: none !important;\n}\n\n/* ==================== æ ‡ç­¾é¡µå¯¼èˆª */\n.nightclub-tabs {\n  display: flex;\n  flex-shrink: 0;\n  border-bottom: 2px solid rgba(255, 255, 255, 0.1);\n}\n\n.nightclub-tab {\n  flex: 1;\n  padding: 12px 16px;\n  background: transparent;\n  border: none;\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.3s;\n  border-bottom: 2px solid transparent;\n  text-align: center;\n}\n\n.nightclub-tab:hover {\n  background: rgba(255, 255, 255, 0.05);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.nightclub-tab.active {\n  color: var(--nightclub-primary);\n  border-bottom-color: var(--nightclub-primary);\n}\n\n.nightclub-tab-badge {\n  display: inline-block;\n  margin-left: 6px;\n  padding: 2px 6px;\n  background: var(--nightclub-primary);\n  border-radius: 10px;\n  font-size: 11px;\n  font-weight: 700;\n}\n\n.nightclub-header-left {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.nightclub-header-title {\n  font-size: 18px;\n}\n\n.nightclub-header-subtitle {\n  font-size: 12px;\n  opacity: 0.9;\n}\n\n.nightclub-close-btn {\n  background: transparent;\n  border: none;\n  color: white;\n  font-size: 32px;\n  cursor: pointer;\n  line-height: 1;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.2s;\n}\n\n.nightclub-close-btn:hover {\n  transform: scale(1.1);\n}\n\n/* ==================== å†…å®¹åŒºåŸŸ */\n.nightclub-content {\n     flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n}\n\n.nightclub-content::-webkit-scrollbar {\n  width: 8px;\n}\n\n.nightclub-content::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n.nightclub-content::-webkit-scrollbar-thumb {\n  background: var(--nightclub-primary);\n  border-radius: 4px;\n}\n\n/* ==================== å¡ç‰‡æ ·å¼ */\n.nightclub-card {\n  background: var(--nightclub-bg-light);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  margin-bottom: 16px;\n  overflow: hidden;\n}\n\n.nightclub-card-title {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 16px;\n  background: rgba(233, 69, 96, 0.2);\n  font-weight: 600;\n  font-size: 16px;\n}\n\n.nightclub-card-content {\n  padding: 16px;\n}\n\n.nightclub-info-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.nightclub-info-row:last-child {\n  border-bottom: none;\n}\n\n.nightclub-info-label {\n  color: var(--nightclub-text-dim);\n  font-size: 14px;\n}\n\n.nightclub-info-value {\n  color: var(--nightclub-text-light);\n  font-weight: 500;\n  text-align: right;\n}\n\n/* ==================== è¿›åº¦æ¡ */\n.nightclub-progress-bar {\n  width: 100%;\n  height: 8px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 4px;\n  overflow: hidden;\n  margin-top: 8px;\n}\n\n.nightclub-progress-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #e94560 0%, #ff6b81 100%);\n  border-radius: 4px;\n  transition: width 0.3s;\n}\n\n/* ==================== åŸ¹å…»å¯¹è±¡åˆ—è¡¨ */\n.nightclub-trainee-item {\n  background: rgba(255, 255, 255, 0.03);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 8px;\n  padding: 12px;\n  margin-bottom: 12px;\n  transition: all 0.3s;\n}\n\n.nightclub-trainee-item:hover {\n  border-color: var(--nightclub-primary);\n  background: rgba(233, 69, 96, 0.1);\n  transform: translateX(4px);\n}\n\n.nightclub-trainee-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.nightclub-trainee-name {\n  font-weight: 600;\n  font-size: 15px;\n  color: var(--nightclub-primary);\n}\n\n.nightclub-trainee-status {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n}\n\n/* ==================== å½’æ¡£è‰ºäºº */\n.nightclub-archived-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n  gap: 12px;\n}\n\n.nightclub-archived-item {\n  background: rgba(255, 255, 255, 0.03);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 8px;\n  padding: 12px;\n  text-align: center;\n  transition: all 0.3s;\n}\n\n.nightclub-archived-item:hover {\n  border-color: var(--nightclub-primary);\n  transform: translateY(-2px);\n}\n\n.nightclub-archived-name {\n  font-weight: 600;\n  margin-bottom: 4px;\n}\n\n.nightclub-archived-type {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n}\n\n/* å½’æ¡£è‰ºäººç®€è¿°æ ·å¼ */\n.archived-description {\n  padding: 8px 0;\n  line-height: 1.6;\n}\n\n.archived-description-label {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--nightclub-primary);\n  margin-right: 4px;\n}\n\n.archived-description-text {\n  font-size: 14px;\n  color: var(--nightclub-text-light);\n  line-height: 1.6;\n}\n\n/* ==================== ç©ºçŠ¶æ€ */\n.nightclub-empty {\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--nightclub-text-dim);\n}\n\n.nightclub-empty-icon {\n  font-size: 48px;\n  margin-bottom: 12px;\n  opacity: 0.5;\n}\n\n.nightclub-empty-text {\n  font-size: 14px;\n}\n\n/* ==================== åŠ è½½çŠ¶æ€ */\n.nightclub-loading {\n  text-align: center;\n  padding: 40px;\n  color: var(--nightclub-text-dim);\n}\n\n.nightclub-loading-icon {\n  font-size: 32px;\n  margin-bottom: 12px;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* ==================== å¯¹è±¡ä¾¦æµ‹é¡µé¢ */\n.detection-current-display {\n  margin-bottom: 16px;\n}\n\n.detection-display-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: rgba(255, 255, 255, 0.15);\n  border-radius: 8px 8px 0 0;\n}\n\n.detection-display-title {\n  font-weight: 600;\n  font-size: 14px;\n}\n\n/* ä¾¦æµ‹ç»“æœæ˜¾ç¤ºæ¡† */\n.detection-results-display {\n  background: rgba(76, 175, 80, 0.1);\n  border: 1px solid rgba(76, 175, 80, 0.3);\n  border-radius: 8px;\n  margin-bottom: 16px;\n  overflow: hidden;\n}\n\n.detection-results-header {\n  padding: 12px 16px;\n  background: rgba(76, 175, 80, 0.2);\n}\n\n.detection-results-title {\n  font-weight: 600;\n  font-size: 14px;\n  color: #4caf50;\n}\n\n.detection-results-content {\n  padding: 12px;\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.detection-result-item {\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  padding: 10px;\n  margin-bottom: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.detection-result-item:hover {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(76, 175, 80, 0.5);\n  transform: translateX(2px);\n}\n\n.detection-result-item:last-child {\n  margin-bottom: 0;\n}\n\n.detection-result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.detection-result-name {\n  font-weight: 600;\n  color: #4caf50;\n}\n\n.detection-result-toggle {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n}\n\n.detection-result-toggle:hover {\n  color: var(--nightclub-text-light);\n}\n\n.detection-result-data {\n  display: grid;\n  grid-template-rows: 0fr;\n  transition: grid-template-rows 0.3s ease;\n  overflow: hidden;\n}\n\n.detection-result-data.expanded {\n  grid-template-rows: 1fr;\n}\n\n.detection-result-data-inner {\n  min-height: 0;\n  padding-top: 8px;\n  margin-top: 8px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  font-size: 13px;\n  line-height: 1.8;\n  white-space: pre-wrap;\n}\n\n.detection-results-empty {\n  text-align: center;\n  padding: 24px;\n  color: var(--nightclub-text-dim);\n  font-style: italic;\n}\n\n.detection-display-content {\n  padding: 12px;\n  min-height: 80px;\n  max-height: 200px;\n  overflow-y: auto;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 0 0 8px 8px;\n}\n\n.detection-display-empty {\n  text-align: center;\n  padding: 20px;\n  color: var(--nightclub-text-dim);\n  font-size: 13px;\n}\n\n.detection-display-item {\n  background: rgba(255, 255, 255, 0.08);\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  border-radius: 6px;\n  padding: 10px;\n  margin-bottom: 8px;\n}\n\n.detection-display-item:last-child {\n  margin-bottom: 0;\n}\n\n.detection-display-item-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 6px;\n}\n\n.detection-display-item-name {\n  font-weight: 600;\n  color: var(--nightclub-primary);\n}\n\n.detection-display-item-category {\n  font-size: 12px;\n  padding: 2px 8px;\n  background: rgba(255, 255, 255, 0.25);\n  border-radius: 4px;\n  color: white;\n  white-space: nowrap;\n}\n\n.detection-display-item-remove {\n  background: transparent;\n  border: none;\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 20px;\n  cursor: pointer;\n  padding: 0;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n}\n\n.detection-display-item-remove:hover {\n  color: var(--nightclub-primary);\n  transform: scale(1.2);\n}\n\n.detection-display-item-info {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n  line-height: 1.4;\n}\n\n.detection-description {\n  padding: 12px 16px;\n  background: rgba(255, 193, 7, 0.1);\n  border-left: 3px solid rgba(255, 193, 7, 0.5);\n  border-radius: 4px;\n  margin-bottom: 16px;\n  font-size: 13px;\n  line-height: 1.6;\n  color: var(--nightclub-text-light);\n}\n\n.detection-clear-btn {\n  background: rgba(255, 69, 58, 0.2);\n  border: 1px solid rgba(255, 69, 58, 0.5);\n  color: #ff453a;\n  padding: 4px 12px;\n  border-radius: 4px;\n  font-size: 12px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.detection-clear-btn:hover {\n  background: rgba(255, 69, 58, 0.3);\n}\n\n.detection-targets-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 12px;\n  margin-bottom: 16px;\n}\n\n.detection-target-item {\n  background: rgba(255, 255, 255, 0.05);\n  border: 2px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  padding: 12px;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.detection-target-item:hover {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(233, 69, 96, 0.6);\n  transform: translateY(-2px);\n}\n\n.detection-target-item.selected {\n  background: rgba(233, 69, 96, 0.2);\n  border-color: var(--nightclub-primary);\n}\n\n.detection-target-item.detected {\n  background: rgba(255, 215, 0, 0.15);\n  border-color: rgba(255, 215, 0, 0.5);\n  cursor: not-allowed;\n  opacity: 0.8;\n}\n\n.detection-target-item.detected:hover {\n  transform: none;\n  border-color: rgba(255, 215, 0, 0.5);\n}\n\n.detection-target-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.detection-target-name {\n  font-weight: 600;\n  color: var(--nightclub-text-light);\n}\n\n.detection-target-category {\n  font-size: 11px;\n  padding: 2px 6px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 4px;\n}\n\n.detection-target-info {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n  margin-bottom: 8px;\n}\n\n.detection-target-status {\n  font-size: 12px;\n  color: var(--nightclub-primary);\n  text-align: center;\n  padding: 4px;\n  background: rgba(233, 69, 96, 0.1);\n  border-radius: 4px;\n}\n\n.detection-actions {\n  display: flex;\n  gap: 12px;\n  justify-content: center;\n}\n\n.detection-action-btn {\n  flex: 1;\n  max-width: 250px;\n  padding: 12px 24px;\n  background: var(--nightclub-primary);\n  border: none;\n  border-radius: 8px;\n  color: white;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.detection-action-btn:hover:not(:disabled) {\n  background: #c8365a;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(233, 69, 96, 0.4);\n}\n\n.detection-action-btn:disabled {\n  background: #555;\n  cursor: not-allowed;\n  opacity: 0.4;\n}\n\n.detection-action-btn.detection-remove-btn {\n  background: #444;\n}\n\n.detection-action-btn.detection-remove-btn:hover:not(:disabled) {\n  background: #666;\n}\n\n/* ==================== ç§»åŠ¨ç«¯é€‚é… */\n@media (max-width: 768px) {\n  .nightclub-main-panel {\n    width: 95vw;\n    height: 90vh;\n  }\n\n  .nightclub-toggle-btn {\n    width: 56px;\n    height: 56px;\n    font-size: 24px;\n  }\n\n  .nightclub-tab {\n    font-size: 11px;\n    padding: 10px 8px;\n  }\n\n  .detection-targets-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  /* ç¡®ä¿æŒ‰é’®å¯äº¤äº’ */\n  .nightclub-toggle-btn {\n    pointer-events: auto;\n    z-index: 10002;\n  }\n}\n\n/* ç«–å±ä¼˜åŒ– */\n@media (max-width: 480px) and (orientation: portrait) {\n  .nightclub-main-panel {\n    width: 100vw;\n    height: 100vh;\n    max-width: none;\n    max-height: none;\n    border-radius: 0;\n    border: none;\n  }\n\n  .nightclub-toggle-btn {\n    width: 50px;\n    height: 50px;\n    font-size: 22px;\n  }\n\n  .nightclub-tab {\n    font-size: 10px;\n    padding: 8px 4px;\n  }\n\n  /* ç¡®ä¿æŒ‰é’®åœ¨å°å±å¹•ä¸‹ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ */\n  .nightclub-toggle-btn {\n    z-index: 10002;\n  }\n\n  .detection-targets-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n/* æ¨ªå±ä¼˜åŒ– */\n@media (max-height: 600px) and (orientation: landscape) {\n  .nightclub-main-panel {\n    height: 95vh;\n    max-height: none;\n  }\n\n  .nightclub-content {\n    padding: 10px;\n  }\n}\n\n/* ==================== å…¨å±€ç§»åŠ¨ç«¯ä¼˜åŒ– */\n/* é˜²æ­¢åŒå‡»ç¼©æ”¾ */\n* {\n  touch-action: manipulation;\n}\n\n/* å…è®¸æŒ‰é’®å®Œå…¨æ§åˆ¶è§¦æ‘¸è¡Œä¸º */\n.nightclub-toggle-btn {\n  touch-action: none !important;\n}\n\n/* ç§»é™¤è§¦æ‘¸é«˜äº® */\n* {\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n\n/* ä¼˜åŒ–æ»šåŠ¨ä½“éªŒï¼ˆiOS å¹³æ»‘æ»šåŠ¨ï¼‰*/\n.nightclub-content {\n  -webkit-overflow-scrolling: touch;\n}\n\n/* ç§»åŠ¨ç«¯å­—ä½“ä¼˜åŒ– */\nbody {\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n}\n\n/* æ”¯æŒåˆ˜æµ·å±ç­‰å®‰å…¨åŒºåŸŸ - ä»…åœ¨å°å±å¹•åº”ç”¨ */\n@supports (padding: max(0px)) {\n  @media (max-width: 480px) {\n    .nightclub-main-panel {\n      padding-top: max(0px, env(safe-area-inset-top));\n      padding-bottom: max(0px, env(safe-area-inset-bottom));\n      padding-left: max(0px, env(safe-area-inset-left));\n      padding-right: max(0px, env(safe-area-inset-right));\n    }\n  }\n}\n\n/* ç§»é™¤æ‰€æœ‰æŒ‰é’®å’Œå¯äº¤äº’å…ƒç´ çš„ç„¦ç‚¹æ¡† */\nbutton:focus,\n  button:active,\n.nightclub-toggle-btn:focus,\n.nightclub-toggle-btn:active,\n.nightclub-close-btn:focus,\n.nightclub-close-btn:active,\n.nightclub-trainee-item:focus,\n.nightclub-trainee-item:active {\n  outline: none;\n  outline-color: transparent;\n}\n  </style>\n`;\n/* eslint-enable */\n\n// ==================== HTML ç»“æ„ ====================\nconst html = `\n<!-- æ‹–åŠ¨æŒ‰é’® -->\n<div id=\"nightclub-toggle-btn\" class=\"nightclub-toggle-btn\">\n  <span>ğŸŒ™</span>\n</div>\n\n<!-- ä¸»é¢æ¿ -->\n<div id=\"nightclub-main-panel\" class=\"nightclub-main-panel\">\n  <div class=\"nightclub-header\">\n    <div class=\"nightclub-header-left\">\n      <div class=\"nightclub-header-title\">ğŸŒ™ æ±Ÿç•”å¤œæ€»ä¼š</div>\n      <div class=\"nightclub-header-subtitle\" id=\"nightclub-time-display\">åŠ è½½ä¸­...</div>\n    </div>\n    <button class=\"nightclub-close-btn\" id=\"nightclub-close-btn\">Ã—</button>\n  </div>\n  \n  <!-- æ ‡ç­¾é¡µå¯¼èˆª -->\n  <div class=\"nightclub-tabs\">\n    <button class=\"nightclub-tab active\" data-page=\"club\">\n      ğŸ¢ ä¼šæ‰€çŠ¶æ€\n    </button>\n    <button class=\"nightclub-tab\" data-page=\"workshop\">\n      ğŸ­ å·¥åŠçŠ¶æ€<span class=\"nightclub-tab-badge\" id=\"tab-badge-workshop\">0</span>\n    </button>\n    <button class=\"nightclub-tab\" data-page=\"trainees\">\n      ğŸ‘¥ åŸ¹å…»å¯¹è±¡<span class=\"nightclub-tab-badge\" id=\"tab-badge-trainees\">0</span>\n    </button>\n    <button class=\"nightclub-tab\" data-page=\"archived\">\n      ğŸ“ å·²å½’æ¡£<span class=\"nightclub-tab-badge\" id=\"tab-badge-archived\">0</span>\n    </button>\n    <button class=\"nightclub-tab\" data-page=\"detection\">\n      ğŸ” å¯¹è±¡ä¾¦æµ‹<span class=\"nightclub-tab-badge\" id=\"tab-badge-detection\">0</span>\n    </button>\n  </div>\n  \n  <div class=\"nightclub-content\" id=\"nightclub-content\">\n    <div class=\"nightclub-loading\">\n      <div class=\"nightclub-loading-icon\">â³</div>\n      <div>æ­£åœ¨åŠ è½½æ•°æ®...</div>\n    </div>\n  </div>\n</div>\n`;\n\n// ==================== å…¨å±€å˜é‡ ====================\nlet btnDragData: {\n  startX: number;\n  startY: number;\n  initialLeft: number;\n  initialTop: number;\n} | null = null;\nlet panelDragData: {\n  startX: number;\n  startY: number;\n  initialLeft: number;\n  initialTop: number;\n} | null = null;\nlet cachedMVUData: any = null;\nconst MAX_RETRIES = 5;\nconst RETRY_DELAY = 400;\nlet currentRetry = 0;\nlet currentPage: 'club' | 'workshop' | 'trainees' | 'archived' | 'detection' = 'club'; // å½“å‰é¡µé¢\nconst selectedDetectionTargets: Set<string> = new Set(); // é€‰ä¸­çš„ä¾¦æµ‹å¯¹è±¡\n\n// ==================== å·¥å…·å‡½æ•° ====================\nfunction safeGet(data: any, path: string, defaultValue: string = 'æœªçŸ¥'): string {\n  if (!data) return defaultValue;\n  const keys = path.split('.');\n  let current = data;\n  for (const key of keys) {\n    if (current === undefined || current === null || typeof current !== 'object') {\n      return defaultValue;\n    }\n    current = current[key];\n  }\n  if (current === undefined || current === null) return defaultValue;\n  return String(current) === '' ? defaultValue : String(current);\n}\n\n// ==================== åˆå§‹åŒ–å‡½æ•° ====================\nfunction initializeNightclubPlugin(): void {\n  console.log('ğŸš€ åˆå§‹åŒ–æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶...');\n\n  // è·å–ç›®æ ‡æ–‡æ¡£ï¼ˆæ·»åŠ é”™è¯¯å¤„ç†ï¼Œé˜²æ­¢è·¨åŸŸé—®é¢˜ï¼‰\n  let targetDoc: Document;\n  try {\n    targetDoc = window.top ? window.top.document : document;\n  } catch (e) {\n    console.warn('âš ï¸ æ— æ³•è®¿é—® window.topï¼Œä½¿ç”¨å½“å‰ document');\n    targetDoc = document;\n  }\n\n  // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨\n  if (targetDoc.getElementById('nightclub-toggle-btn')) {\n    console.log('âš ï¸ æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ å·²å­˜åœ¨ï¼Œå…ˆç§»é™¤æ—§çš„');\n    targetDoc.getElementById('nightclub-toggle-btn')?.remove();\n    targetDoc.getElementById('nightclub-main-panel')?.remove();\n    targetDoc.getElementById('nightclub-plugin-styles')?.remove();\n    // æ¸…ç†äº‹ä»¶\n    $(targetDoc).off('.nightclub-plugin');\n  }\n\n  // æ³¨å…¥æ ·å¼\n  if (!targetDoc.getElementById('nightclub-plugin-styles')) {\n    targetDoc.head.insertAdjacentHTML('beforeend', styles);\n    console.log('âœ… æ ·å¼å·²æ³¨å…¥');\n  }\n\n  // æ³¨å…¥ HTML\n  targetDoc.body.insertAdjacentHTML('beforeend', html);\n  console.log('âœ… HTML å·²æ³¨å…¥');\n\n  // ä» localStorage æ¢å¤æŒ‰é’®ä½ç½®\n  const btn = targetDoc.getElementById('nightclub-toggle-btn');\n  if (btn) {\n    try {\n      const saved = localStorage.getItem('nightclub-btn-position');\n      if (saved) {\n        const pos = JSON.parse(saved);\n        btn.style.left = pos.left + 'px';\n        btn.style.top = pos.top + 'px';\n        console.log('ğŸ“ æ¢å¤æŒ‰é’®ä½ç½®:', pos);\n      }\n    } catch (e) {\n      console.warn('âš ï¸ æ¢å¤æŒ‰é’®ä½ç½®å¤±è´¥');\n    }\n  }\n\n  // åˆå§‹åŒ–æŒ‰é’®æ‹–åŠ¨åŠŸèƒ½\n  initializeButtonDrag(targetDoc);\n\n  // åˆå§‹åŒ–é¢æ¿åŠŸèƒ½\n  initializePanelSystem(targetDoc);\n\n  console.log('âœ… æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶åˆå§‹åŒ–å®Œæˆï¼');\n}\n\n// ==================== æŒ‰é’®æ‹–åŠ¨åŠŸèƒ½ ====================\nfunction initializeButtonDrag(targetDoc: Document): void {\n  const btn = targetDoc.getElementById('nightclub-toggle-btn');\n  const panel = targetDoc.getElementById('nightclub-main-panel');\n  const $targetDoc = $(targetDoc);\n\n  // æ‹–åŠ¨å¼€å§‹\n  function handleBtnDragStart(clientX: number, clientY: number): boolean {\n    if (btnDragData) return false;\n\n    const computedStyle = window.getComputedStyle(btn!);\n    const currentLeft = parseInt(computedStyle.left) || 0;\n    const currentTop = parseInt(computedStyle.top) || 0;\n\n    btnDragData = {\n      startX: clientX,\n      startY: clientY,\n      initialLeft: currentLeft,\n      initialTop: currentTop,\n    };\n\n    btn!.classList.add('dragging');\n    console.log('ğŸ–±ï¸ å¼€å§‹æ‹–åŠ¨æŒ‰é’®');\n    return true;\n  }\n\n  // æ‹–åŠ¨ç§»åŠ¨\n  function handleBtnDragMove(clientX: number, clientY: number): void {\n    if (!btnDragData) return;\n\n    const deltaX = clientX - btnDragData.startX;\n    const deltaY = clientY - btnDragData.startY;\n\n    let newLeft = btnDragData.initialLeft + deltaX;\n    let newTop = btnDragData.initialTop + deltaY;\n\n    // é™åˆ¶èŒƒå›´\n    const targetWindow = window.top || window;\n    const maxX = $(targetWindow).width()! - 80;\n    const maxY = $(targetWindow).height()! - 80;\n\n    newLeft = Math.max(0, Math.min(newLeft, maxX));\n    newTop = Math.max(0, Math.min(newTop, maxY));\n\n    btn!.style.left = newLeft + 'px';\n    btn!.style.top = newTop + 'px';\n  }\n\n  // æ‹–åŠ¨ç»“æŸ\n  function handleBtnDragEnd(clientX: number, clientY: number): void {\n    if (!btnDragData) return;\n\n    btn!.classList.remove('dragging');\n\n    // è®¡ç®—æ‹–åŠ¨è·ç¦»\n    const deltaX = clientX - btnDragData.startX;\n    const deltaY = clientY - btnDragData.startY;\n    const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n\n    // ä¿å­˜ä½ç½®\n    const computedStyle = window.getComputedStyle(btn!);\n    const currentLeft = parseInt(computedStyle.left) || 0;\n    const currentTop = parseInt(computedStyle.top) || 0;\n\n    const position = {\n      left: currentLeft,\n      top: currentTop,\n    };\n\n    localStorage.setItem('nightclub-btn-position', JSON.stringify(position));\n    console.log('âœ… æŒ‰é’®æ‹–åŠ¨ç»“æŸï¼Œä¿å­˜ä½ç½®:', position);\n\n    btnDragData = null;\n\n    // å¦‚æœæ˜¯ç‚¹å‡»ï¼ˆç§»åŠ¨è·ç¦»å°äº5åƒç´ ï¼‰ï¼Œæ‰“å¼€/å…³é—­é¢æ¿\n    if (distance < 5) {\n      console.log('ğŸ¨ æ£€æµ‹åˆ°ç‚¹å‡»ï¼Œåˆ‡æ¢é¢æ¿');\n      panel!.classList.toggle('active');\n      // æ‰“å¼€é¢æ¿æ—¶åŠ è½½æ•°æ®\n      if (panel!.classList.contains('active')) {\n        currentRetry = 0; // é‡ç½®é‡è¯•è®¡æ•°å™¨\n        loadNightclubData(targetDoc);\n      }\n    }\n  }\n\n  // ç»‘å®šäº‹ä»¶\n  $(btn!).on('mousedown.nightclub-plugin', function (e) {\n    if (handleBtnDragStart(e.clientX, e.clientY)) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  });\n\n  $(btn!).on('touchstart.nightclub-plugin', function (e) {\n    const touch = e.originalEvent!.touches[0];\n    if (handleBtnDragStart(touch.clientX, touch.clientY)) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  });\n\n  $targetDoc.on('mousemove.nightclub-plugin', function (e) {\n    handleBtnDragMove(e.clientX, e.clientY);\n    if (btnDragData) e.preventDefault();\n  });\n\n  $targetDoc.on('touchmove.nightclub-plugin', function (e) {\n    const touch = e.originalEvent!.touches[0];\n    handleBtnDragMove(touch.clientX, touch.clientY);\n    if (btnDragData) e.preventDefault();\n  });\n\n  $targetDoc.on('mouseup.nightclub-plugin', function (e) {\n    handleBtnDragEnd(e.clientX, e.clientY);\n  });\n\n  $targetDoc.on('touchend.nightclub-plugin touchcancel.nightclub-plugin', function (e) {\n    const touch = e.originalEvent!.changedTouches[0];\n    if (touch) {\n      handleBtnDragEnd(touch.clientX, touch.clientY);\n    } else {\n      handleBtnDragEnd(0, 0);\n    }\n  });\n\n  console.log('âœ… æŒ‰é’®æ‹–åŠ¨åŠŸèƒ½å·²åˆå§‹åŒ–');\n}\n\n// ==================== é¢æ¿æ‹–åŠ¨ ====================\nfunction initializePanelDrag(targetDoc: Document): void {\n  const panel = $('#nightclub-main-panel', targetDoc)[0];\n  const header = $('.nightclub-header', targetDoc)[0];\n  const $targetDoc = $(targetDoc);\n\n  if (!panel || !header) {\n    console.error('âŒ é¢æ¿æˆ–å¤´éƒ¨å…ƒç´ æœªæ‰¾åˆ°');\n    return;\n  }\n\n  function handlePanelDragStart(clientX: number, clientY: number): void {\n    console.log('ğŸ–±ï¸ å¼€å§‹æ‹–åŠ¨é¢æ¿');\n    const rect = panel!.getBoundingClientRect();\n    \n    // ç§»é™¤ transform å¹¶è®¾ç½®æ–°çš„ left/top (ä½¿ç”¨ important è¦†ç›–)\n    panel!.style.setProperty('transform', 'none', 'important');\n    panel!.style.setProperty('left', `${rect.left}px`, 'important');\n    panel!.style.setProperty('top', `${rect.top}px`, 'important');\n    \n    panelDragData = {\n      startX: clientX,\n      startY: clientY,\n      initialLeft: rect.left,\n      initialTop: rect.top,\n    };\n    $(panel!).addClass('dragging');\n    $(header!).addClass('dragging');\n    console.log('âœ… é¢æ¿æ‹–åŠ¨æ•°æ®å·²è®¾ç½®:', panelDragData);\n  }\n\n  function handlePanelDragMove(clientX: number, clientY: number): void {\n    if (!panelDragData) return;\n\n    const deltaX = clientX - panelDragData.startX;\n    const deltaY = clientY - panelDragData.startY;\n    const newLeft = panelDragData.initialLeft + deltaX;\n    const newTop = panelDragData.initialTop + deltaY;\n\n    console.log(`ğŸ“ ç§»åŠ¨é¢æ¿: deltaX=${deltaX}, deltaY=${deltaY}, newLeft=${newLeft}, newTop=${newTop}`);\n    \n    panel!.style.setProperty('left', `${newLeft}px`, 'important');\n    panel!.style.setProperty('top', `${newTop}px`, 'important');\n  }\n\n  function handlePanelDragEnd(): void {\n    console.log('ğŸ–±ï¸ é¢æ¿æ‹–åŠ¨ç»“æŸ');\n    if (panelDragData) {\n      // ä¿å­˜ä½ç½®\n      const rect = panel!.getBoundingClientRect();\n      const savedPosition = {\n        left: rect.left,\n        top: rect.top,\n      };\n      localStorage.setItem('nightclub-panel-position', JSON.stringify(savedPosition));\n      console.log('âœ… é¢æ¿æ‹–åŠ¨ç»“æŸï¼Œä¿å­˜ä½ç½®:', savedPosition);\n    }\n\n    panelDragData = null;\n    $(panel!).removeClass('dragging');\n    $(header!).removeClass('dragging');\n  }\n\n  // é¼ æ ‡äº‹ä»¶\n  $(header!).on('mousedown.nightclub-panel-drag', function (e) {\n    // å¦‚æœç‚¹å‡»çš„æ˜¯å…³é—­æŒ‰é’®ï¼Œä¸å¼€å§‹æ‹–åŠ¨\n    if ($(e.target).closest('#nightclub-close-btn').length > 0) {\n      console.log('âš ï¸ ç‚¹å‡»äº†å…³é—­æŒ‰é’®ï¼Œè·³è¿‡æ‹–åŠ¨');\n      return;\n    }\n    e.preventDefault();\n    handlePanelDragStart(e.clientX, e.clientY);\n  });\n\n  $targetDoc.on('mousemove.nightclub-panel-drag', function (e) {\n    handlePanelDragMove(e.clientX, e.clientY);\n  });\n\n  $targetDoc.on('mouseup.nightclub-panel-drag', function () {\n    handlePanelDragEnd();\n  });\n\n  // è§¦æ‘¸äº‹ä»¶\n  $(header!).on('touchstart.nightclub-panel-drag', function (e) {\n    // å¦‚æœç‚¹å‡»çš„æ˜¯å…³é—­æŒ‰é’®ï¼Œä¸å¼€å§‹æ‹–åŠ¨\n    if ($(e.target).closest('#nightclub-close-btn').length > 0) {\n      console.log('âš ï¸ è§¦æ‘¸äº†å…³é—­æŒ‰é’®ï¼Œè·³è¿‡æ‹–åŠ¨');\n      return;\n    }\n    const touch = e.originalEvent!.touches[0];\n    if (touch) {\n      e.preventDefault();\n      handlePanelDragStart(touch.clientX, touch.clientY);\n    }\n  });\n\n  $targetDoc.on('touchmove.nightclub-panel-drag', function (e) {\n    const touch = e.originalEvent!.touches[0];\n    if (touch) {\n      handlePanelDragMove(touch.clientX, touch.clientY);\n    }\n  });\n\n  $targetDoc.on('touchend.nightclub-panel-drag touchcancel.nightclub-panel-drag', function () {\n    handlePanelDragEnd();\n  });\n\n  // æ¢å¤ä¿å­˜çš„ä½ç½®\n  const savedPos = localStorage.getItem('nightclub-panel-position');\n  if (savedPos) {\n    try {\n      const pos = JSON.parse(savedPos);\n      panel!.style.setProperty('transform', 'none', 'important');\n      panel!.style.setProperty('left', `${pos.left}px`, 'important');\n      panel!.style.setProperty('top', `${pos.top}px`, 'important');\n      console.log('âœ… å·²æ¢å¤é¢æ¿ä½ç½®:', pos);\n    } catch (e) {\n      console.error('âŒ æ¢å¤é¢æ¿ä½ç½®å¤±è´¥:', e);\n    }\n  }\n\n  console.log('âœ… é¢æ¿æ‹–åŠ¨åŠŸèƒ½å·²åˆå§‹åŒ–');\n}\n\n// ==================== é¢æ¿ç³»ç»Ÿ ====================\nfunction initializePanelSystem(targetDoc: Document): void {\n  const closeBtn = targetDoc.getElementById('nightclub-close-btn');\n  if (closeBtn) {\n    closeBtn.addEventListener('click', e => {\n      e.stopPropagation(); // é˜²æ­¢è§¦å‘æ‹–åŠ¨\n      const panel = targetDoc.getElementById('nightclub-main-panel');\n      if (panel) {\n        panel.classList.remove('active');\n      }\n    });\n  }\n\n  // åˆå§‹åŒ–æ ‡ç­¾é¡µåˆ‡æ¢\n  initializeTabSwitching(targetDoc);\n\n  // åˆå§‹åŒ–é¢æ¿æ‹–åŠ¨\n  initializePanelDrag(targetDoc);\n\n  console.log('âœ… é¢æ¿ç³»ç»Ÿå·²åˆå§‹åŒ–');\n}\n\n// ==================== æ ‡ç­¾é¡µåˆ‡æ¢ ====================\nfunction initializeTabSwitching(targetDoc: Document): void {\n  const tabs = targetDoc.querySelectorAll('.nightclub-tab');\n\n  tabs.forEach(tab => {\n    tab.addEventListener('click', function (e) {\n      e.stopPropagation(); // é˜²æ­¢è§¦å‘æ‹–åŠ¨\n\n      const page = (this as HTMLElement).getAttribute('data-page') as\n        | 'club'\n        | 'workshop'\n        | 'trainees'\n        | 'archived'\n        | 'detection';\n      if (!page) return;\n\n      // æ›´æ–°å½“å‰é¡µé¢\n      currentPage = page;\n\n      // æ›´æ–°æ ‡ç­¾çŠ¶æ€\n      tabs.forEach(t => t.classList.remove('active'));\n      this.classList.add('active');\n\n      // é‡æ–°æ¸²æŸ“å½“å‰é¡µé¢å†…å®¹\n      if (cachedMVUData) {\n        renderNightclubData(targetDoc, cachedMVUData);\n      }\n\n      console.log('ğŸ“„ åˆ‡æ¢åˆ°é¡µé¢:', page);\n    });\n  });\n\n  console.log('âœ… æ ‡ç­¾é¡µåˆ‡æ¢å·²åˆå§‹åŒ–');\n}\n\n// ==================== é¢æ¿æ‹–åŠ¨åŠŸèƒ½ï¼ˆå·²ç¦ç”¨ï¼‰ ====================\n// function initializePanelDrag(targetDoc: Document): void {\n//   é¢æ¿æ‹–åŠ¨åŠŸèƒ½å·²ç§»é™¤ï¼Œä¸“æ³¨äºæŒ‰é’®æ‹–åŠ¨ä¼˜åŒ–\n// }\n\n// togglePanel å‡½æ•°å·²ç§»é™¤ï¼Œé¢æ¿åˆ‡æ¢ç°åœ¨ç›´æ¥åœ¨æŒ‰é’®æ‹–åŠ¨ç»“æŸæ—¶å¤„ç†\n\n// ==================== æ•°æ®åŠ è½½ ====================\nasync function loadNightclubData(targetDoc: Document): Promise<void> {\n  try {\n    // æ£€æŸ¥ MVU æ˜¯å¦å¯ç”¨ï¼ˆæ”¹è¿›ç‰ˆï¼Œæ›´å¥å£®ï¼‰\n    if (typeof Mvu === 'undefined') {\n      // å°è¯•ä»çˆ¶çª—å£è·å–ï¼ˆæ·»åŠ é”™è¯¯å¤„ç†ï¼‰\n      try {\n        if (window.parent && typeof (window.parent as any).Mvu !== 'undefined') {\n          (window as any).Mvu = (window.parent as any).Mvu;\n          console.log('âœ… å·²ä»çˆ¶çª—å£å¼•ç”¨ MVU');\n        } else {\n          throw new Error('çˆ¶çª—å£ä¸­ä¹Ÿæ²¡æœ‰ MVU');\n        }\n      } catch (e) {\n        console.warn('âš ï¸ MVU æ¡†æ¶æœªåŠ è½½æˆ–æ— æ³•è®¿é—®çˆ¶çª—å£');\n        if (currentRetry < MAX_RETRIES) {\n          currentRetry++;\n          console.log(`ğŸ”„ ç¬¬ ${currentRetry}/${MAX_RETRIES} æ¬¡é‡è¯•åŠ è½½ MVU...`);\n          setTimeout(() => loadNightclubData(targetDoc), RETRY_DELAY);\n        } else {\n          showError(targetDoc, 'MVU æ¡†æ¶æœªåŠ è½½ï¼Œè¯·ç¡®ä¿å·²å®‰è£…é…’é¦†åŠ©æ‰‹å¹¶å¯ç”¨ MVU æ¡†æ¶');\n        }\n        return;\n      }\n    }\n\n    // è·å–æœ€æ–°æ¶ˆæ¯çš„ MVU æ•°æ®\n    const mvuResult = Mvu.getMvuData({\n      type: 'message',\n      message_id: 'latest',\n    });\n\n    const data = mvuResult?.stat_data;\n\n    if (!data) {\n      console.warn('âš ï¸ MVU æ•°æ®ä¸ºç©º');\n      if (currentRetry < MAX_RETRIES) {\n        currentRetry++;\n        setTimeout(() => loadNightclubData(targetDoc), RETRY_DELAY);\n      } else {\n        showError(targetDoc, 'æœªèƒ½åŠ è½½æ•°æ®');\n      }\n      return;\n    }\n\n    cachedMVUData = data;\n    console.log('âœ… æ•°æ®åŠ è½½æˆåŠŸ', data);\n\n    // æ¸²æŸ“æ•°æ®\n    renderNightclubData(targetDoc, data);\n  } catch (error) {\n    console.error('âŒ åŠ è½½æ•°æ®å‡ºé”™:', error);\n    showError(targetDoc, 'åŠ è½½å‡ºé”™: ' + (error as Error).message);\n  }\n}\n\nfunction showError(targetDoc: Document, message: string): void {\n  const contentDiv = targetDoc.getElementById('nightclub-content');\n  if (contentDiv) {\n    contentDiv.innerHTML = `\n      <div class=\"nightclub-empty\">\n        <div class=\"nightclub-empty-icon\">âš ï¸</div>\n        <div class=\"nightclub-empty-text\">${message}</div>\n      </div>\n    `;\n  }\n}\n\n// ==================== æ•°æ®æ¸²æŸ“ ====================\nfunction renderNightclubData(targetDoc: Document, data: NightclubData): void {\n  const contentDiv = targetDoc.getElementById('nightclub-content');\n  const timeDisplay = targetDoc.getElementById('nightclub-time-display');\n\n  if (!contentDiv) return;\n\n  // æ›´æ–°æ—¶é—´æ˜¾ç¤º\n  if (timeDisplay && data.æ—¶é—´ä¿¡æ¯) {\n    const dateText = safeGet(data, 'æ—¶é—´ä¿¡æ¯.å½“å‰æ—¥æœŸ', '');\n    const timeText = safeGet(data, 'æ—¶é—´ä¿¡æ¯.å½“å‰æ—¶é—´', '');\n    const statusText = safeGet(data, 'æ—¶é—´ä¿¡æ¯.è¥ä¸šçŠ¶æ€', '');\n    const locationText = safeGet(data, 'åœ°ç‚¹ä¿¡æ¯.å½“å‰ä½ç½®', '');\n    timeDisplay.textContent = `${dateText} ${timeText} | ${statusText}${locationText ? ` | ${locationText}` : ''}`;\n  }\n\n  // æ›´æ–°æ ‡ç­¾å¾½ç« \n  const ordersCount = data.å¤œæ€»ä¼šç»è¥?.å¾…å¤„ç†è®¢å•?.length || 0;\n  const traineesCount = data.å·¥åŠåŸ¹å…»å¯¹è±¡?.åŸ¹å…»åˆ—è¡¨?.length || 0;\n  const archivedCount = data.å·²å½’æ¡£?.æ¡£æ¡ˆåˆ—è¡¨?.length || 0;\n  const detectionCount = data.ä¾¦æµ‹æ•°æ® ? Object.keys(data.ä¾¦æµ‹æ•°æ®).length : 0;\n\n  const workshopBadge = targetDoc.getElementById('tab-badge-workshop');\n  const traineesBadge = targetDoc.getElementById('tab-badge-trainees');\n  const archivedBadge = targetDoc.getElementById('tab-badge-archived');\n  const detectionBadge = targetDoc.getElementById('tab-badge-detection');\n\n  if (workshopBadge) workshopBadge.textContent = String(ordersCount);\n  if (traineesBadge) traineesBadge.textContent = String(traineesCount);\n  if (archivedBadge) archivedBadge.textContent = String(archivedCount);\n  if (detectionBadge) detectionBadge.textContent = String(detectionCount);\n\n  // æ„å»º HTML\n  let html = '';\n\n  // æ ¹æ®å½“å‰é¡µé¢æ¸²æŸ“ä¸åŒå†…å®¹\n  if (currentPage === 'club') {\n    // ========== ä¼šæ‰€çŠ¶æ€é¡µé¢ ==========\n    html += renderClubPage(data);\n  } else if (currentPage === 'workshop') {\n    // ========== å·¥åŠçŠ¶æ€é¡µé¢ ==========\n    html += renderWorkshopPage(data);\n  } else if (currentPage === 'trainees') {\n    // ========== åŸ¹å…»å¯¹è±¡é¡µé¢ ==========\n    html += renderTraineesPage(data);\n  } else if (currentPage === 'archived') {\n    // ========== å·²å½’æ¡£é¡µé¢ ==========\n    html += renderArchivedPage(data);\n  } else if (currentPage === 'detection') {\n    // ========== å¯¹è±¡ä¾¦æµ‹é¡µé¢ ==========\n    html += renderDetectionPage(data);\n  }\n\n  contentDiv.innerHTML = html;\n\n  // å¦‚æœæ˜¯ä¾¦æµ‹é¡µé¢ï¼Œéœ€è¦ç»‘å®šäº‹ä»¶\n  if (currentPage === 'detection') {\n    initializeDetectionEvents(targetDoc);\n  }\n}\n\n// ==================== æ¸²æŸ“ä¼šæ‰€çŠ¶æ€é¡µé¢ ====================\nfunction renderClubPage(data: NightclubData): string {\n  let html = '';\n\n  // ç»è¥çŠ¶å†µ\n  if (data.å¤œæ€»ä¼šç»è¥) {\n    html += `\n      <div class=\"nightclub-card\">\n        <div class=\"nightclub-card-title\">\n          <span>ğŸ’¼</span>\n          <span>ç»è¥çŠ¶å†µ</span>\n        </div>\n        <div class=\"nightclub-card-content\">\n          <div class=\"nightclub-info-row\">\n            <span class=\"nightclub-info-label\">VIPå®¢æˆ·</span>\n            <span class=\"nightclub-info-value\">${safeGet(data, 'å¤œæ€»ä¼šç»è¥.VIPå®¢æˆ·æ•°', '0')} äºº</span>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  // åœ°ä¸Šå„åŒºåŸŸçŠ¶æ€ï¼ˆé¢„ç•™æ¥å£ï¼‰\n  html += `\n    <div class=\"nightclub-card\">\n      <div class=\"nightclub-card-title\">\n        <span>ğŸ¢</span>\n        <span>åœ°ä¸ŠåŒºåŸŸ</span>\n      </div>\n      <div class=\"nightclub-card-content\">\n          <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">é…’æ°´å§å°</span>\n          <span class=\"nightclub-info-value\">æ­£å¸¸è¥ä¸š</span>\n          </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">è±ªåèˆå…</span>\n          <span class=\"nightclub-info-value\">æ­£å¸¸è¥ä¸š</span>\n        </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">KTVåŒ…å¢</span>\n          <span class=\"nightclub-info-value\">æ­£å¸¸è¥ä¸š</span>\n        </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">VIPä¼‘æ¯å®¤</span>\n          <span class=\"nightclub-info-value\">æ­£å¸¸è¥ä¸š</span>\n        </div>\n        </div>\n      </div>\n    `;\n\n  return html;\n}\n\n// ==================== æ¸²æŸ“å·¥åŠçŠ¶æ€é¡µé¢ ====================\nfunction renderWorkshopPage(data: NightclubData): string {\n  let html = '';\n\n  // åœ°ä¸‹å„åŒºåŸŸçŠ¶æ€\n  html += `\n    <div class=\"nightclub-card\">\n      <div class=\"nightclub-card-title\">\n        <span>ğŸ­</span>\n        <span>åœ°ä¸‹åŒºåŸŸ</span>\n      </div>\n      <div class=\"nightclub-card-content\">\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">åŸºç¡€åŸ¹è®­ä¸­å¿ƒ</span>\n          <span class=\"nightclub-info-value\">è¿è¡Œä¸­</span>\n        </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">å½¢ä½“å¡‘é€ ä¸­å¿ƒ</span>\n          <span class=\"nightclub-info-value\">è¿è¡Œä¸­</span>\n        </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">ä¿å…»æŠ¤ç†ä¸­å¿ƒ</span>\n          <span class=\"nightclub-info-value\">è¿è¡Œä¸­</span>\n        </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">å½“å‰åŸ¹å…»äººæ•°</span>\n          <span class=\"nightclub-info-value\">${data.å·¥åŠåŸ¹å…»å¯¹è±¡?.å½“å‰åŸ¹å…»äººæ•° || 0} äºº</span>\n        </div>\n      </div>\n    </div>\n  `;\n\n  // å¾…å¤„ç†è®¢å•è¯¦æƒ…\n  if (data.å¤œæ€»ä¼šç»è¥?.å¾…å¤„ç†è®¢å• && data.å¤œæ€»ä¼šç»è¥.å¾…å¤„ç†è®¢å•.length > 0) {\n    const orders = data.å¤œæ€»ä¼šç»è¥.å¾…å¤„ç†è®¢å•;\n    html += `\n      <div class=\"nightclub-card\">\n        <div class=\"nightclub-card-title\">\n          <span>ğŸ“‹</span>\n          <span>è®¢å•è¯¦æƒ… (${orders.length})</span>\n        </div>\n        <div class=\"nightclub-card-content\">\n    `;\n\n    orders.forEach(order => {\n      const client = order.å§”æ‰˜äºº || 'æœªçŸ¥å§”æ‰˜äºº';\n      const type = order.éœ€æ±‚ç±»å‹ || '';\n      const requirements = order.å…·ä½“è¦æ±‚ || '';\n      const deadline = order.æˆªæ­¢æ—¥æœŸ || '';\n\n      html += `\n        <div class=\"nightclub-trainee-item\">\n          <div class=\"nightclub-trainee-header\">\n            <span class=\"nightclub-trainee-name\">${client}</span>\n          </div>\n          ${\n            type\n              ? `\n          <div class=\"nightclub-info-row\">\n            <span class=\"nightclub-info-label\">éœ€æ±‚ç±»å‹</span>\n            <span class=\"nightclub-info-value\">${type}</span>\n          </div>`\n              : ''\n          }\n          ${\n            requirements\n              ? `\n          <div class=\"nightclub-info-row\">\n            <span class=\"nightclub-info-label\">å…·ä½“è¦æ±‚</span>\n            <span class=\"nightclub-info-value\">${requirements}</span>\n          </div>`\n              : ''\n          }\n          ${\n            deadline\n              ? `\n          <div class=\"nightclub-info-row\">\n            <span class=\"nightclub-info-label\">æˆªæ­¢æ—¥æœŸ</span>\n            <span class=\"nightclub-info-value\">${deadline}</span>\n          </div>`\n              : ''\n          }\n        </div>\n      `;\n    });\n\n    html += `\n        </div>\n      </div>\n    `;\n  } else {\n    html += `\n      <div class=\"nightclub-empty\">\n        <div class=\"nightclub-empty-icon\">ğŸ“­</div>\n        <div class=\"nightclub-empty-text\">æš‚æ— å¾…å¤„ç†è®¢å•</div>\n      </div>\n    `;\n  }\n\n  return html;\n}\n\n// ==================== æ¸²æŸ“åŸ¹å…»å¯¹è±¡é¡µé¢ ====================\nfunction renderTraineesPage(data: NightclubData): string {\n  let html = '';\n\n  if (data.å·¥åŠåŸ¹å…»å¯¹è±¡) {\n    const trainees = data.å·¥åŠåŸ¹å…»å¯¹è±¡.åŸ¹å…»åˆ—è¡¨ || [];\n\n    if (trainees.length === 0) {\n      html += `\n          <div class=\"nightclub-empty\">\n            <div class=\"nightclub-empty-icon\">ğŸ“­</div>\n            <div class=\"nightclub-empty-text\">æš‚æ— åŸ¹å…»å¯¹è±¡</div>\n          </div>\n      `;\n    } else {\n      html += `\n        <div class=\"nightclub-card\">\n          <div class=\"nightclub-card-title\">\n            <span>ğŸ‘¥</span>\n            <span>å·¥åŠåŸ¹å…»å¯¹è±¡ (${trainees.length})</span>\n          </div>\n          <div class=\"nightclub-card-content\">\n      `;\n\n      trainees.forEach(trainee => {\n        const name = trainee.å§“å || 'æœªçŸ¥';\n        const age = trainee.åŸºæœ¬ä¿¡æ¯?.å¹´é¾„ || '';\n        const origin = trainee.åŸºæœ¬ä¿¡æ¯?.æ¥æº || '';\n        const appearance = trainee.åŸºæœ¬ä¿¡æ¯?.åŸå§‹å¤–è²Œ || '';\n        const progress = typeof trainee.åŸ¹å…»è¿›åº¦ === 'number' ? trainee.åŸ¹å…»è¿›åº¦ : trainee.åŸ¹å…»è¿›åº¦ || '0';\n        const order = trainee.å®šåˆ¶ä¿¡æ¯?.å¯¹åº”è®¢å• || 'æ— ';\n        const target = trainee.å®šåˆ¶ä¿¡æ¯?.ç›®æ ‡å½¢è±¡ || 'æœªå®š';\n        const requirements = trainee.å®šåˆ¶ä¿¡æ¯?.ç‰¹æ®Šè¦æ±‚ || '';\n\n        html += `\n          <div class=\"nightclub-trainee-item\">\n            <div class=\"nightclub-trainee-header\">\n              <span class=\"nightclub-trainee-name\">${name}</span>\n            </div>\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">å¹´é¾„ / æ¥æº</span>\n              <span class=\"nightclub-info-value\">${age}å² / ${origin}</span>\n            </div>\n            ${\n              appearance\n                ? `\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">åŸå§‹å¤–è²Œ</span>\n              <span class=\"nightclub-info-value\">${appearance}</span>\n            </div>`\n                : ''\n            }\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">åŸ¹å…»è¿›åº¦</span>\n              <span class=\"nightclub-info-value\">${progress}%</span>\n            </div>\n            <div class=\"nightclub-progress-bar\">\n              <div class=\"nightclub-progress-fill\" style=\"width: ${progress}%\"></div>\n            </div>\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">å¯¹åº”è®¢å•</span>\n              <span class=\"nightclub-info-value\">${order}</span>\n            </div>\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">ç›®æ ‡å½¢è±¡</span>\n              <span class=\"nightclub-info-value\">${target}</span>\n            </div>\n            ${\n              requirements\n                ? `\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">ç‰¹æ®Šè¦æ±‚</span>\n              <span class=\"nightclub-info-value\">${requirements}</span>\n            </div>`\n                : ''\n            }\n          </div>\n        `;\n      });\n\n      html += `\n        </div>\n      </div>\n    `;\n    }\n  }\n\n  return html;\n}\n\n// ==================== æ¸²æŸ“å·²å½’æ¡£é¡µé¢ ====================\nfunction renderArchivedPage(data: NightclubData): string {\n  let html = '';\n\n  if (data.å·²å½’æ¡£) {\n    const archived = data.å·²å½’æ¡£.æ¡£æ¡ˆåˆ—è¡¨ || [];\n\n    if (archived.length === 0) {\n      html += `\n          <div class=\"nightclub-empty\">\n            <div class=\"nightclub-empty-icon\">ğŸ“­</div>\n            <div class=\"nightclub-empty-text\">æš‚æ— å½’æ¡£è‰ºäºº</div>\n          </div>\n      `;\n    } else {\n      html += `\n        <div class=\"nightclub-card\">\n          <div class=\"nightclub-card-title\">\n            <span>ğŸ“</span>\n            <span>å·²å½’æ¡£ (${archived.length})</span>\n          </div>\n          <div class=\"nightclub-card-content\">\n      `;\n\n      archived.forEach(artist => {\n        const realName = artist.å§“å || '';\n        const stageName = artist.è‰ºå || 'æœªçŸ¥';\n        const description = artist.ç®€è¿° || '';\n\n        html += `\n          <div class=\"nightclub-trainee-item\">\n            <div class=\"nightclub-trainee-header\">\n              <span class=\"nightclub-trainee-name\">${stageName}${realName ? ` (${realName})` : ''}</span>\n            </div>\n            ${\n              description\n                ? `\n            <div class=\"archived-description\">\n              <span class=\"archived-description-label\">ç®€è¿°ï¼š</span><span class=\"archived-description-text\">${description}</span>\n            </div>`\n                : ''\n            }\n          </div>\n        `;\n      });\n\n      html += `\n          </div>\n          </div>\n        `;\n    }\n  }\n\n  return html;\n}\n\n// ==================== æ¸²æŸ“å¯¹è±¡ä¾¦æµ‹é¡µé¢ ====================\nfunction renderDetectionPage(data: NightclubData): string {\n  let html = '';\n\n  // è·å–å·²æœ‰çš„ä¾¦æµ‹æ•°æ®\n  const detectionData = data.ä¾¦æµ‹æ•°æ® || {};\n  const detectionCount = Object.keys(detectionData).length;\n\n  // è¾…åŠ©å‡½æ•°ï¼šå°† \\n è½¬æ¢ä¸º <br>\n  const formatDetectionText = (text: string): string => {\n    return text.replace(/\\\\n/g, '<br>').replace(/\\n/g, '<br>');\n  };\n\n  // æ”¶é›†æ‰€æœ‰å¯ä¾¦æµ‹çš„è§’è‰²\n  const availableTargets: Array<{ name: string; category: string; info: string }> = [];\n\n  // æ·»åŠ åŸ¹å…»å¯¹è±¡\n  if (data.å·¥åŠåŸ¹å…»å¯¹è±¡?.åŸ¹å…»åˆ—è¡¨) {\n    data.å·¥åŠåŸ¹å…»å¯¹è±¡.åŸ¹å…»åˆ—è¡¨.forEach(trainee => {\n      if (trainee.å§“å) {\n        availableTargets.push({\n          name: trainee.å§“å,\n          category: 'åŸ¹å…»å¯¹è±¡',\n          info: `ç¼–å·: ${trainee.ç¼–å· || 'æœªçŸ¥'} | åŸ¹å…»è¿›åº¦: ${trainee.åŸ¹å…»è¿›åº¦ || '0'}%`,\n        });\n      }\n    });\n  }\n\n  // æ·»åŠ å·²å½’æ¡£å¯¹è±¡\n  if (data.å·²å½’æ¡£?.æ¡£æ¡ˆåˆ—è¡¨) {\n    data.å·²å½’æ¡£.æ¡£æ¡ˆåˆ—è¡¨.forEach(artist => {\n      if (artist.è‰ºå) {\n        availableTargets.push({\n          name: artist.è‰ºå,\n          category: 'å·²å½’æ¡£',\n          info: artist.ç®€è¿° || 'æš‚æ— ç®€è¿°',\n        });\n      }\n    });\n  }\n\n  // æ·»åŠ äº‘èˆ’å’Œäº‘å·\n  availableTargets.push(\n    { name: 'äº‘èˆ’', category: 'ç®¡ç†å±‚', info: 'ä¼šæ‰€ç®¡ç†è€… | åœ°ä¸Šä¸šåŠ¡è´Ÿè´£äºº' },\n    { name: 'äº‘å·', category: 'ç®¡ç†å±‚', info: 'å·¥åŠç®¡ç†è€… | åœ°ä¸‹ä¸šåŠ¡è´Ÿè´£äºº' },\n  );\n\n  html += `\n    <div class=\"nightclub-card\">\n      <div class=\"nightclub-card-title\">\n        <span>ğŸ”</span>\n        <span>å¯¹è±¡ä¾¦æµ‹</span>\n        </div>\n      <div class=\"nightclub-card-content\">\n        <!-- å·²æœ‰ä¾¦æµ‹ç»“æœæ˜¾ç¤ºæ¡† -->\n        <div class=\"detection-results-display\">\n          <div class=\"detection-results-header\">\n            <span class=\"detection-results-title\">ğŸ“Š ä¾¦æµ‹ç»“æœ (${detectionCount})</span>\n          </div>\n          <div class=\"detection-results-content\">\n            ${\n              detectionCount === 0\n                ? `<div class=\"detection-results-empty\">æš‚æ— ä¾¦æµ‹æ•°æ®</div>`\n                : Object.entries(detectionData)\n                    .map(([name, detectionText]) => {\n                      const escapedName = name.replace(/'/g, \"\\\\'\");\n                      const formattedText = formatDetectionText(detectionText);\n                      return `\n                      <div class=\"detection-result-item\" data-detection-target=\"${escapedName}\">\n                        <div class=\"detection-result-header\">\n                          <span class=\"detection-result-name\">${name}</span>\n                          <span class=\"detection-result-toggle\">ç‚¹å‡»å±•å¼€/æ”¶èµ·</span>\n                        </div>\n                        <div class=\"detection-result-data\">\n                          <div class=\"detection-result-data-inner\">${formattedText}</div>\n                        </div>\n                      </div>\n                    `;\n                    })\n                    .join('')\n            }\n          </div>\n        </div>\n        \n        <!-- å½“å‰é€‰ä¸­å¯¹è±¡æ˜¾ç¤ºæ¡† -->\n        <div class=\"detection-current-display\">\n          <div class=\"detection-display-header\">\n            <span class=\"detection-display-title\">ğŸ“‹ å½“å‰é€‰ä¸­å¯¹è±¡ (${selectedDetectionTargets.size}/3)</span>\n            ${\n              selectedDetectionTargets.size > 0\n                ? `<button class=\"detection-clear-btn\" id=\"detection-clear-all\">æ¸…ç©º</button>`\n                : ''\n            }\n          </div>\n          <div class=\"detection-display-content\">\n            ${\n              selectedDetectionTargets.size === 0\n                ? `<div class=\"detection-display-empty\">æš‚æœªé€‰æ‹©ä»»ä½•å¯¹è±¡ï¼Œè¯·ä»ä¸‹æ–¹åˆ—è¡¨ä¸­é€‰æ‹©</div>`\n                : Array.from(selectedDetectionTargets)\n                    .map(targetName => {\n                      const target = availableTargets.find(t => t.name === targetName);\n                      if (!target) return '';\n                      return `\n                      <div class=\"detection-display-item\">\n                        <div class=\"detection-display-item-header\">\n                          <span class=\"detection-display-item-name\">${target.name}</span>\n                          <span class=\"detection-display-item-category\">${target.category}</span>\n                          <button class=\"detection-display-item-remove\" data-remove-target=\"${target.name}\">Ã—</button>\n                        </div>\n      </div>\n    `;\n                    })\n                    .join('')\n            }\n          </div>\n        </div>\n        \n        <div class=\"detection-description\">\n          ğŸ’¡ æç¤ºï¼šç‚¹å‡»ä¸‹æ–¹å¡ç‰‡é€‰æ‹©å¯¹è±¡ï¼ˆå»ºè®®3ä¸ªä»¥ä¸‹ï¼‰ï¼Œä¾¦æµ‹å°†åŒ…æ‹¬ï¼šæ•´ä½“æƒ…å†µã€ç¥æƒ…ã€å˜´éƒ¨ã€èƒ¸éƒ¨ã€ä¹³å¤´ã€ä¹³æ™•ã€å±è‚¡ã€å°ç©´ã€å±çœ¼ç­‰è¯¦ç»†æ•°æ®\n        </div>\n        \n        <div class=\"detection-targets-grid\">\n  `;\n\n  availableTargets.forEach(target => {\n    const isSelected = selectedDetectionTargets.has(target.name);\n    const hasDetectionData = detectionData.hasOwnProperty(target.name);\n    const statusClass = hasDetectionData ? 'detected' : isSelected ? 'selected' : '';\n    const statusText = hasDetectionData ? 'ğŸ” å·²ä¾¦æµ‹' : isSelected ? 'âœ“ å·²é€‰æ‹©' : 'ç‚¹å‡»é€‰æ‹©';\n\n    html += `\n      <div class=\"detection-target-item ${statusClass}\" data-target-name=\"${target.name}\" ${hasDetectionData ? 'data-detected=\"true\"' : ''}>\n        <div class=\"detection-target-header\">\n          <span class=\"detection-target-name\">${target.name}</span>\n          <span class=\"detection-target-category\">${target.category}</span>\n        </div>\n        <div class=\"detection-target-status\">${statusText}</div>\n      </div>\n    `;\n  });\n\n  html += `\n        </div>\n        \n        <div class=\"detection-actions\">\n          <button class=\"detection-action-btn\" id=\"detection-start-btn\" ${selectedDetectionTargets.size === 0 ? 'disabled' : ''}>\n            ğŸ” å¼€å§‹ä¾¦æµ‹\n          </button>\n          <button class=\"detection-action-btn detection-remove-btn\" id=\"detection-remove-btn\" ${detectionCount === 0 ? 'disabled' : ''}>\n            ğŸ—‘ï¸ åˆ é™¤ä¾¦æµ‹æ•°æ®\n          </button>\n        </div>\n      </div>\n    </div>\n  `;\n\n  return html;\n}\n\n// ==================== åˆå§‹åŒ–ä¾¦æµ‹é¡µé¢äº‹ä»¶ ====================\nfunction initializeDetectionEvents(targetDoc: Document): void {\n  console.log('ğŸ”§ åˆå§‹åŒ–ä¾¦æµ‹é¡µé¢äº‹ä»¶ï¼Œå½“å‰é€‰ä¸­å¯¹è±¡:', selectedDetectionTargets);\n\n  // ä¾¦æµ‹ç»“æœå±•å¼€/æ”¶èµ·äº‹ä»¶\n  const resultItems = targetDoc.querySelectorAll('.detection-result-item');\n  resultItems.forEach(item => {\n    item.addEventListener('click', function (e) {\n      e.stopPropagation();\n      const dataElement = (this as HTMLElement).querySelector('.detection-result-data');\n      if (dataElement) {\n        dataElement.classList.toggle('expanded');\n      }\n    });\n  });\n\n  // ç›®æ ‡é€‰æ‹©äº‹ä»¶\n  const targetItems = targetDoc.querySelectorAll('.detection-target-item');\n  console.log('ğŸ¯ æ‰¾åˆ°ç›®æ ‡å¡ç‰‡æ•°é‡:', targetItems.length);\n  targetItems.forEach(item => {\n    item.addEventListener('click', function (e) {\n      e.stopPropagation();\n\n      // æ£€æŸ¥æ˜¯å¦å·²æœ‰ä¾¦æµ‹æ•°æ®ï¼Œå¦‚æœæœ‰åˆ™ä¸å“åº”ç‚¹å‡»\n      const isDetected = (this as HTMLElement).getAttribute('data-detected') === 'true';\n      if (isDetected) {\n        console.log('âš ï¸ è¯¥å¯¹è±¡å·²æœ‰ä¾¦æµ‹æ•°æ®ï¼Œæ— æ³•é€‰æ‹©');\n        return;\n      }\n\n      const targetName = (this as HTMLElement).getAttribute('data-target-name');\n      console.log('ğŸ‘† ç‚¹å‡»äº†å¡ç‰‡:', targetName);\n      if (!targetName) return;\n\n      if (selectedDetectionTargets.has(targetName)) {\n        selectedDetectionTargets.delete(targetName);\n        console.log('â– å–æ¶ˆé€‰æ‹©:', targetName);\n      } else {\n        if (selectedDetectionTargets.size >= 3) {\n          alert('å»ºè®®æœ€å¤šé€‰æ‹©3ä¸ªå¯¹è±¡è¿›è¡Œä¾¦æµ‹');\n          return;\n        }\n        selectedDetectionTargets.add(targetName);\n        console.log('â• æ·»åŠ é€‰æ‹©:', targetName);\n      }\n\n      console.log('ğŸ“Š æ›´æ–°åçš„é€‰ä¸­å¯¹è±¡:', selectedDetectionTargets);\n      // é‡æ–°æ¸²æŸ“é¡µé¢\n      if (cachedMVUData) {\n        renderNightclubData(targetDoc, cachedMVUData);\n      }\n    });\n  });\n\n  // æ¸…ç©ºé€‰æ‹©æŒ‰é’®\n  const clearAllBtn = targetDoc.getElementById('detection-clear-all');\n  if (clearAllBtn) {\n    clearAllBtn.addEventListener('click', e => {\n      e.stopPropagation();\n      console.log('ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰é€‰æ‹©');\n      selectedDetectionTargets.clear();\n      if (cachedMVUData) {\n        renderNightclubData(targetDoc, cachedMVUData);\n      }\n    });\n  }\n\n  // ç§»é™¤å•ä¸ªå¯¹è±¡æŒ‰é’®\n  const removeButtons = targetDoc.querySelectorAll('.detection-display-item-remove');\n  removeButtons.forEach(btn => {\n    btn.addEventListener('click', function (e) {\n      e.stopPropagation();\n      const targetName = (this as HTMLElement).getAttribute('data-remove-target');\n      console.log('âŒ ç§»é™¤å•ä¸ªå¯¹è±¡:', targetName);\n      if (targetName && selectedDetectionTargets.has(targetName)) {\n        selectedDetectionTargets.delete(targetName);\n        if (cachedMVUData) {\n          renderNightclubData(targetDoc, cachedMVUData);\n        }\n      }\n    });\n  });\n\n  // å¼€å§‹ä¾¦æµ‹æŒ‰é’®\n  const startBtn = targetDoc.getElementById('detection-start-btn');\n  if (startBtn) {\n    startBtn.addEventListener('click', () => {\n      if (selectedDetectionTargets.size === 0) return;\n\n      const targets = Array.from(selectedDetectionTargets);\n      let command = `request: æœ¬å›åˆä¸è¦è¾“å‡ºæ­£æ–‡å†…å®¹ï¼ï¼ï¼\\n\\nå¯¹ä»¥ä¸‹å¯¹è±¡è¿›è¡Œè¯¦ç»†èº«ä½“æ•°æ®ä¾¦æµ‹ï¼š`;\n\n      targets.forEach((target, index) => {\n        command += `ã€${target}ã€‘`;\n        if (index < targets.length - 1) {\n          command += `ã€`;\n        }\n      });\n\n      command += `\\n\\nè¯·ä¾¦æµ‹ä»¥ä¸‹éƒ¨ä½ï¼ˆæ¯ä¸ªéƒ¨ä½æè¿°åç”¨æ¢è¡Œç¬¦åˆ†å‰²ï¼‰ï¼š1. æ•´ä½“æƒ…å†µ 2. ç¥æƒ… 3. å˜´éƒ¨ 4. èƒ¸éƒ¨ 5. ä¹³å¤´ 6. ä¹³æ™• 7. å±è‚¡ 8. å°ç©´ 9. å±çœ¼`;\n\n      fillCommand(command);\n    });\n  }\n\n  // åˆ é™¤ä¾¦æµ‹æ•°æ®æŒ‰é’®\n  const removeBtn = targetDoc.getElementById('detection-remove-btn');\n  if (removeBtn) {\n    removeBtn.addEventListener('click', () => {\n      // è·å–æ‰€æœ‰å·²ä¾¦æµ‹çš„å¯¹è±¡\n      const detectionData = cachedMVUData?.ä¾¦æµ‹æ•°æ® || {};\n      const detectedTargets = Object.keys(detectionData);\n\n      if (detectedTargets.length === 0) return;\n\n      let command = `åˆ é™¤ä»¥ä¸‹å¯¹è±¡çš„ä¾¦æµ‹æ•°æ®ï¼š\\n\\n`;\n\n      detectedTargets.forEach(target => {\n        command += `_.remove('ä¾¦æµ‹æ•°æ®', '${target}')\\n`;\n      });\n\n      fillCommand(command);\n\n      // ä¸ç«‹å³æ¸…ç©ºé€‰æ‹©å’Œé‡æ–°æ¸²æŸ“ï¼Œç­‰ä¸‹å›åˆæ£€æµ‹åˆ°æ•°æ®è¢«åˆ é™¤åå†æ¸…ç†\n    });\n  }\n}\n\n// å¡«å……å‘½ä»¤åˆ°è¾“å…¥æ¡†\nfunction fillCommand(command: string): void {\n  try {\n    const chatInput = (parent.document || document).querySelector('#send_textarea') as HTMLTextAreaElement;\n    if (chatInput) {\n      if (chatInput.value.trim() !== '') {\n        chatInput.value += '\\n\\n' + command;\n      } else {\n        chatInput.value = command;\n      }\n      chatInput.focus();\n      console.log('âœ… å‘½ä»¤å·²å¡«å……åˆ°è¾“å…¥æ¡†');\n    } else {\n      throw new Error('æœªæ‰¾åˆ°è¾“å…¥æ¡†');\n    }\n  } catch (e) {\n    alert('æœªèƒ½è‡ªåŠ¨æ‰¾åˆ°è¾“å…¥æ¡†ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶å‘½ä»¤ï¼š\\n\\n' + command);\n    console.error('å¡«å……å‘½ä»¤å¤±è´¥:', e);\n  }\n}\n\n// ==================== å¯åŠ¨è„šæœ¬ ====================\n// ç­‰å¾… jQuery åŠ è½½å®Œæˆ\nfunction waitForJQuery(callback: () => void): void {\n  if (typeof jQuery !== 'undefined' || typeof $ !== 'undefined') {\n    console.log('âœ… jQuery å·²å°±ç»ª');\n    callback();\n  } else {\n    console.log('â³ ç­‰å¾… jQuery...');\n    setTimeout(() => waitForJQuery(callback), 100);\n  }\n}\n\n// ä½¿ç”¨ jQuery çš„æ–¹å¼åˆå§‹åŒ–ï¼ˆç¬¦åˆé¡¹ç›®è§„èŒƒï¼Œä¸ä½¿ç”¨ DOMContentLoadedï¼‰\nwaitForJQuery(() => {\n  $(() => {\n    console.log('âœ… å¼€å§‹åˆå§‹åŒ–æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ ');\n    initializeNightclubPlugin();\n  });\n});\n\nconsole.log('âœ… æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶è„šæœ¬åŠ è½½å®Œæˆ');\n\n// å¯¼å‡ºä¸€ä¸ªå€¼ä»¥ä½¿å…¶æˆä¸ºåˆæ³•çš„ES Moduleï¼Œæ”¯æŒé€šè¿‡importè¯­å¥åŠ è½½\nexport const __initialized__ = true;\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","console","log","btnDragData","panelDragData","cachedMVUData","currentRetry","currentPage","selectedDetectionTargets","Set","safeGet","data","path","defaultValue","keys","split","current","String","initializeNightclubPlugin","targetDoc","window","top","document","e","warn","getElementById","remove","$","off","head","insertAdjacentHTML","body","btn","saved","localStorage","getItem","pos","JSON","parse","style","left","panel","$targetDoc","handleBtnDragStart","clientX","clientY","computedStyle","getComputedStyle","currentLeft","parseInt","currentTop","startX","startY","initialLeft","initialTop","classList","add","handleBtnDragMove","deltaX","deltaY","newLeft","newTop","targetWindow","maxX","width","maxY","height","Math","max","min","handleBtnDragEnd","distance","sqrt","position","setItem","stringify","toggle","contains","loadNightclubData","on","preventDefault","stopPropagation","touch","originalEvent","touches","changedTouches","initializeButtonDrag","closeBtn","addEventListener","tabs","querySelectorAll","forEach","tab","page","this","getAttribute","t","renderNightclubData","initializeTabSwitching","header","error","handlePanelDragStart","rect","getBoundingClientRect","setProperty","addClass","handlePanelDragMove","handlePanelDragEnd","savedPosition","removeClass","target","closest","length","savedPos","initializePanelDrag","initializePanelSystem","async","Mvu","parent","Error","setTimeout","showError","mvuResult","getMvuData","type","message_id","stat_data","message","contentDiv","innerHTML","timeDisplay","dateText","timeText","statusText","locationText","textContent","ordersCount","traineesCount","archivedCount","detectionCount","workshopBadge","traineesBadge","archivedBadge","detectionBadge","html","renderClubPage","orders","order","client","requirements","deadline","renderWorkshopPage","trainees","trainee","name","age","origin","appearance","progress","renderTraineesPage","archived","artist","realName","stageName","description","renderArchivedPage","detectionData","formatDetectionText","text","replace","availableTargets","push","category","info","entries","map","detectionText","join","size","Array","from","targetName","find","isSelected","has","hasDetectionData","renderDetectionPage","resultItems","item","dataElement","querySelector","targetItems","delete","alert","clearAllBtn","clear","removeButtons","startBtn","targets","command","index","fillCommand","removeBtn","detectedTargets","initializeDetectionEvents","chatInput","value","trim","focus","waitForJQuery","callback","jQuery","__initialized__"],"sourceRoot":""}