{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/src/æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ /index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// ==================== æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ  ====================\n// ä½¿ç”¨ TypeScript + åŸç”Ÿå®ç°ï¼ˆä¸ä½¿ç”¨ Vueï¼Œå‚è€ƒæŒä¸Šå…¬å¯“çš„å®ç°æ–¹å¼ï¼‰\n// ç‰ˆæœ¬ï¼šè§„èŒƒåŒ–é‡æ„ç‰ˆ\n\nconsole.log('ğŸŒ™ åŠ è½½æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶...');\n\n// ==================== ç±»å‹å®šä¹‰ ====================\ninterface NightclubData {\n  æ—¶é—´ä¿¡æ¯?: {\n    å½“å‰æ—¥æœŸ?: string;\n    å½“å‰æ—¶é—´?: string;\n    æ˜ŸæœŸ?: string;\n    è¥ä¸šçŠ¶æ€?: string;\n  };\n  åœ°ç‚¹ä¿¡æ¯?: {\n    å½“å‰ä½ç½®?: string;\n  };\n  å¤œæ€»ä¼šç»è¥?: {\n    åœ¨èŒå‘˜å·¥æ•°?: number | string;\n    VIPå®¢æˆ·æ•°?: number | string;\n    å¾…å¤„ç†è®¢å•?: Array<{\n      è®¢å•ç¼–å·?: string;\n      å®¢æˆ·ä»£å·?: string;\n      éœ€æ±‚ç±»å‹?: string;\n      å…·ä½“è¦æ±‚?: string;\n      æˆªæ­¢æ—¥æœŸ?: string;\n      çŠ¶æ€?: string;\n      [key: string]: any;\n    }>;\n  };\n  å·¥åŠåŸ¹å…»å¯¹è±¡?: {\n    å½“å‰åŸ¹å…»äººæ•°?: number | string;\n    åŸ¹å…»åˆ—è¡¨?: Array<{\n      å§“å?: string;\n      ç¼–å·?: string;\n      åŸºæœ¬ä¿¡æ¯?: {\n        å¹´é¾„?: number | string;\n        åŸå§‹å¤–è²Œ?: string;\n        æ¥æº?: string;\n        åŸ¹å…»å¤©æ•°?: number | string;\n      };\n      åŸ¹å…»è¿›åº¦?: number | string;\n      å®šåˆ¶ä¿¡æ¯?: {\n        å¯¹åº”è®¢å•?: string;\n        ç›®æ ‡å½¢è±¡?: string;\n        ç‰¹æ®Šè¦æ±‚?: string;\n      };\n      å½“å‰çŠ¶æ€?: string;\n      å¤‡æ³¨?: string[];\n    }>;\n  };\n  å·²å½’æ¡£?: {\n    æ€»æ•°?: number | string;\n    æ¡£æ¡ˆåˆ—è¡¨?: Array<{\n      ç¼–å·?: string;\n      è‰ºå?: string;\n      ç±»å‹?: string;\n      å¹´é¾„?: number | string;\n      æ¥æº?: string;\n      ç‰¹å¾?: string;\n      å½“å‰çŠ¶æ€?: string;\n      è¯„ä»·?: string;\n      [key: string]: any;\n    }>;\n  };\n  ä¾¦æµ‹æ•°æ®?: {\n    [key: string]: string;\n  };\n}\n\n// ==================== æ ·å¼å®šä¹‰ ====================\nconst styles = `\n<style id=\"nightclub-plugin-styles\">\n:root {\n  --nightclub-primary: #e94560;\n  --nightclub-bg-dark: #1a1a2e;\n  --nightclub-bg-mid: #16213e;\n  --nightclub-text-light: #eee;\n  --nightclub-text-dim: #aaa;\n}\n\n/* æ‹–åŠ¨æŒ‰é’® */\n.nightclub-toggle-btn {\n  position: fixed !important;\n  top: 100px;\n  left: 20px;\n  width: 64px;\n  height: 64px;\n  background: linear-gradient(135deg, #e94560 0%, #c8365a 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: grab;\n  z-index: 10000 !important;\n  box-shadow: 0 4px 12px rgba(233, 69, 96, 0.4);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: none;\n  font-size: 28px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  transition: transform 0.2s;\n}\n\n.nightclub-toggle-btn:hover {\n  transform: scale(1.05);\n}\n\n.nightclub-toggle-btn.dragging {\n  cursor: grabbing !important;\n  opacity: 0.9;\n  z-index: 10001 !important;\n}\n\n/* ä¸»é¢æ¿å®¹å™¨ */\n.nightclub-main-panel {\n  position: fixed !important;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 90vw !important;\n  max-width: 800px !important;\n  height: 85vh !important;\n  max-height: 600px !important;\n  background: linear-gradient(135deg, var(--nightclub-bg-dark) 0%, var(--nightclub-bg-mid) 100%);\n  border: 2px solid var(--nightclub-primary);\n  border-radius: 12px;\n  box-shadow: 0 8px 32px rgba(233, 69, 96, 0.4);\n  z-index: 9999 !important;\n  display: none;\n  flex-direction: column;\n  overflow: hidden;\n  color: var(--nightclub-text-light);\n  font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;\n}\n\n.nightclub-main-panel.active {\n  display: flex;\n}\n\n.nightclub-main-panel.dragging {\n  opacity: 0.95;\n  z-index: 10000 !important;\n  transition: none !important;\n}\n\n/* å¤´éƒ¨ */\n.nightclub-header {\n  flex-shrink: 0;\n  padding: 16px 20px;\n  background: linear-gradient(135deg, var(--nightclub-primary) 0%, #c8365a 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 600;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  cursor: grab;\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: none;\n}\n\n.nightclub-header.dragging {\n  cursor: grabbing !important;\n}\n\n/* æ ‡ç­¾é¡µå¯¼èˆª */\n.nightclub-tabs {\n  flex-shrink: 0;\n  display: flex;\n  background: rgba(0, 0, 0, 0.2);\n  border-bottom: 2px solid rgba(255, 255, 255, 0.1);\n}\n\n.nightclub-tab {\n  flex: 1;\n  padding: 12px 16px;\n  text-align: center;\n  background: transparent;\n  border: none;\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n  border-bottom: 3px solid transparent;\n  user-select: none;\n  -webkit-user-select: none;\n}\n\n.nightclub-tab:hover {\n  background: rgba(255, 255, 255, 0.05);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.nightclub-tab.active {\n  color: white;\n  background: rgba(255, 255, 255, 0.1);\n  border-bottom-color: var(--nightclub-primary);\n}\n\n.nightclub-tab-badge {\n  display: inline-block;\n  margin-left: 6px;\n  padding: 2px 6px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 10px;\n  font-size: 11px;\n  font-weight: 700;\n}\n\n.nightclub-tab.active .nightclub-tab-badge {\n  background: var(--nightclub-primary);\n}\n\n.nightclub-header-left {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.nightclub-header-title {\n  font-size: 18px;\n  font-weight: 700;\n}\n\n.nightclub-header-subtitle {\n  font-size: 12px;\n  opacity: 0.9;\n}\n\n.nightclub-close-btn {\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  cursor: pointer;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n}\n\n.nightclub-close-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n  transform: scale(1.1);\n}\n\n/* å†…å®¹åŒºåŸŸ */\n.nightclub-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px;\n}\n\n.nightclub-content::-webkit-scrollbar {\n  width: 8px;\n}\n\n.nightclub-content::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n.nightclub-content::-webkit-scrollbar-thumb {\n  background: var(--nightclub-primary);\n  border-radius: 4px;\n}\n\n/* å¡ç‰‡æ ·å¼ */\n.nightclub-card {\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  padding: 16px;\n  margin-bottom: 16px;\n}\n\n.nightclub-card-title {\n  font-size: 16px;\n  font-weight: 700;\n  margin-bottom: 12px;\n  color: var(--nightclub-primary);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.nightclub-card-content {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.nightclub-info-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.nightclub-info-label {\n  color: var(--nightclub-text-dim);\n  font-size: 14px;\n}\n\n.nightclub-info-value {\n  color: var(--nightclub-text-light);\n  font-size: 14px;\n  font-weight: 600;\n}\n\n/* è¿›åº¦æ¡ */\n.nightclub-progress-bar {\n  width: 100%;\n  height: 8px;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 4px;\n  overflow: hidden;\n  margin-top: 4px;\n}\n\n.nightclub-progress-fill {\n  height: 100%;\n  background: linear-gradient(90deg, var(--nightclub-primary) 0%, #ff6b81 100%);\n  transition: width 0.3s;\n}\n\n/* åŸ¹å…»å¯¹è±¡åˆ—è¡¨ */\n.nightclub-trainee-item {\n  background: rgba(255, 255, 255, 0.03);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 8px;\n  padding: 12px;\n  margin-bottom: 12px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.nightclub-trainee-item:hover {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: var(--nightclub-primary);\n  transform: translateX(4px);\n}\n\n.nightclub-trainee-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.nightclub-trainee-name {\n  font-weight: 700;\n  font-size: 15px;\n  color: var(--nightclub-text-light);\n}\n\n.nightclub-trainee-status {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n}\n\n/* å½’æ¡£è‰ºäºº */\n.nightclub-archived-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n  gap: 12px;\n}\n\n.nightclub-archived-item {\n  background: rgba(255, 255, 255, 0.03);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 8px;\n  padding: 12px;\n  text-align: center;\n}\n\n.nightclub-archived-name {\n  font-weight: 700;\n  margin-bottom: 4px;\n  color: var(--nightclub-text-light);\n}\n\n.nightclub-archived-type {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n}\n\n/* ç©ºçŠ¶æ€ */\n.nightclub-empty {\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--nightclub-text-dim);\n}\n\n.nightclub-empty-icon {\n  font-size: 48px;\n  margin-bottom: 12px;\n  opacity: 0.5;\n}\n\n.nightclub-empty-text {\n  font-size: 14px;\n}\n\n/* åŠ è½½çŠ¶æ€ */\n.nightclub-loading {\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--nightclub-primary);\n}\n\n.nightclub-loading-icon {\n  font-size: 32px;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n/* ç§»åŠ¨ç«¯é€‚é… */\n@media (max-width: 768px) {\n  .nightclub-main-panel {\n    width: 95vw !important;\n    height: 90vh !important;\n    max-height: none !important;\n  }\n  \n  .nightclub-toggle-btn {\n    width: 56px;\n    height: 56px;\n    font-size: 24px;\n    /* ç¡®ä¿æŒ‰é’®å¯äº¤äº’ */\n    pointer-events: auto !important;\n  }\n  \n  .nightclub-header {\n    padding: 12px 16px;\n  }\n  \n  .nightclub-header-title {\n    font-size: 16px !important;\n  }\n  \n  .nightclub-header-subtitle {\n    font-size: 11px !important;\n  }\n  \n  .nightclub-card {\n    padding: 12px;\n    margin-bottom: 12px;\n  }\n  \n  .nightclub-card-title {\n    font-size: 14px;\n  }\n}\n\n/* ç«–å±ä¼˜åŒ– */\n@media (max-width: 480px) and (orientation: portrait) {\n  .nightclub-main-panel {\n    width: 100vw !important;\n    height: 100vh !important;\n    border-radius: 0;\n    top: 0 !important;\n    left: 0 !important;\n    transform: none !important;\n    max-width: none !important;\n  }\n  \n  .nightclub-toggle-btn {\n    width: 50px;\n    height: 50px;\n    font-size: 22px;\n    /* ç¡®ä¿æŒ‰é’®åœ¨å°å±å¹•ä¸‹ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ */\n    z-index: 10002 !important;\n    pointer-events: auto !important;\n  }\n  \n  .nightclub-content {\n    padding: 12px;\n  }\n  \n  .nightclub-archived-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n\n/* æ¨ªå±ä¼˜åŒ– */\n@media (max-height: 600px) and (orientation: landscape) {\n  .nightclub-main-panel {\n    height: 95vh !important;\n    max-height: none !important;\n  }\n  \n  .nightclub-header {\n    padding: 10px 16px;\n  }\n  \n  .nightclub-content {\n    padding: 12px 16px;\n  }\n}\n\n/* ==================== å…¨å±€ç§»åŠ¨ç«¯ä¼˜åŒ– ==================== */\n\n/* é˜²æ­¢åŒå‡»ç¼©æ”¾ */\n* {\n  touch-action: manipulation;\n}\n\n/* ç§»é™¤è§¦æ‘¸é«˜äº® */\n* {\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n\n/* ä¼˜åŒ–æ»šåŠ¨ä½“éªŒï¼ˆiOS å¹³æ»‘æ»šåŠ¨ï¼‰ */\n.nightclub-content {\n  -webkit-overflow-scrolling: touch;\n}\n\n/* ç§»åŠ¨ç«¯å­—ä½“ä¼˜åŒ– */\n@media (max-width: 768px) {\n  body {\n    -webkit-text-size-adjust: 100%;\n    -ms-text-size-adjust: 100%;\n    text-size-adjust: 100%;\n  }\n}\n\n/* æ”¯æŒåˆ˜æµ·å±ç­‰å®‰å…¨åŒºåŸŸ - ä»…åœ¨å°å±å¹•åº”ç”¨ */\n@media (max-width: 768px) {\n  @supports (padding: max(0px)) {\n    .nightclub-main-panel {\n      padding-top: max(0px, env(safe-area-inset-top)) !important;\n      padding-bottom: max(0px, env(safe-area-inset-bottom)) !important;\n      padding-left: max(0px, env(safe-area-inset-left)) !important;\n      padding-right: max(0px, env(safe-area-inset-right)) !important;\n    }\n  }\n}\n\n/* ç§»é™¤æ‰€æœ‰æŒ‰é’®å’Œå¯äº¤äº’å…ƒç´ çš„ç„¦ç‚¹æ¡† */\nbutton:focus,\nbutton:active,\n.nightclub-toggle-btn:focus,\n.nightclub-toggle-btn:active,\n.nightclub-close-btn:focus,\n.nightclub-close-btn:active,\n.nightclub-trainee-item:focus,\n.nightclub-trainee-item:active {\n  outline: none !important;\n  -webkit-tap-highlight-color: transparent !important;\n}\n\n/* å¯¹è±¡ä¾¦æµ‹é¡µé¢ */\n.detection-current-display {\n  background: rgba(233, 69, 96, 0.08);\n  border: 2px solid rgba(233, 69, 96, 0.3);\n  border-radius: 12px;\n  margin-bottom: 16px;\n  overflow: hidden;\n}\n\n.detection-display-header {\n  padding: 12px 16px;\n  background: rgba(233, 69, 96, 0.15);\n  border-bottom: 1px solid rgba(233, 69, 96, 0.2);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.detection-display-title {\n  font-size: 15px;\n  font-weight: 700;\n  color: var(--nightclub-primary);\n}\n\n/* ä¾¦æµ‹ç»“æœæ˜¾ç¤ºæ¡† */\n.detection-results-display {\n  background: rgba(76, 175, 80, 0.08);\n  border: 2px solid rgba(76, 175, 80, 0.3);\n  border-radius: 12px;\n  margin-bottom: 16px;\n  overflow: hidden;\n}\n\n.detection-results-header {\n  padding: 12px 16px;\n  background: rgba(76, 175, 80, 0.15);\n  border-bottom: 1px solid rgba(76, 175, 80, 0.2);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.detection-results-title {\n  font-size: 15px;\n  font-weight: 700;\n  color: #4caf50;\n}\n\n.detection-results-content {\n  padding: 12px;\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.detection-result-item {\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  padding: 12px;\n  margin-bottom: 12px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.detection-result-item:hover {\n  background: rgba(255, 255, 255, 0.08);\n  border-color: rgba(76, 175, 80, 0.5);\n  transform: translateX(2px);\n}\n\n.detection-result-item:last-child {\n  margin-bottom: 0;\n}\n\n.detection-result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.detection-result-name {\n  font-size: 14px;\n  font-weight: 700;\n  color: #4caf50;\n}\n\n.detection-result-toggle {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n  padding: 4px 8px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 4px;\n  cursor: pointer;\n  user-select: none;\n}\n\n.detection-result-toggle:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: var(--nightclub-text-light);\n}\n\n.detection-result-data {\n  font-size: 13px;\n  color: var(--nightclub-text-dim);\n  line-height: 1.8;\n  display: grid;\n  grid-template-rows: 0fr;\n  transition: grid-template-rows 0.3s ease;\n  overflow: hidden;\n}\n\n.detection-result-data.expanded {\n  grid-template-rows: 1fr;\n  margin-top: 8px;\n}\n\n.detection-result-data-inner {\n  overflow: hidden;\n  padding-top: 8px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.detection-results-empty {\n  text-align: center;\n  padding: 24px 12px;\n  color: var(--nightclub-text-dim);\n  font-size: 13px;\n  font-style: italic;\n}\n\n.detection-display-content {\n  padding: 12px;\n  min-height: 80px;\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.detection-display-empty {\n  text-align: center;\n  padding: 24px 12px;\n  color: var(--nightclub-text-dim);\n  font-size: 13px;\n  font-style: italic;\n}\n\n.detection-display-item {\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  padding: 10px 12px;\n  margin-bottom: 8px;\n}\n\n.detection-display-item:last-child {\n  margin-bottom: 0;\n}\n\n.detection-display-item-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 6px;\n  gap: 8px;\n}\n\n.detection-display-item-name {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--nightclub-text-light);\n}\n\n.detection-display-item-category {\n  font-size: 11px;\n  padding: 2px 8px;\n  background: rgba(233, 69, 96, 0.25);\n  border-radius: 10px;\n  color: var(--nightclub-primary);\n  white-space: nowrap;\n}\n\n.detection-display-item-remove {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background: rgba(233, 69, 96, 0.3);\n  border: 1px solid var(--nightclub-primary);\n  color: var(--nightclub-primary);\n  font-size: 18px;\n  line-height: 1;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  flex-shrink: 0;\n}\n\n.detection-display-item-remove:hover {\n  background: var(--nightclub-primary);\n  color: white;\n  transform: scale(1.1);\n}\n\n.detection-display-item-info {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n  line-height: 1.4;\n}\n\n.detection-description {\n  padding: 10px 12px;\n  background: rgba(233, 69, 96, 0.08);\n  border-left: 3px solid var(--nightclub-primary);\n  border-radius: 4px;\n  margin-bottom: 16px;\n  font-size: 12px;\n  line-height: 1.6;\n  color: var(--nightclub-text-dim);\n}\n\n.detection-clear-btn {\n  padding: 4px 12px;\n  background: rgba(233, 69, 96, 0.2);\n  border: 1px solid var(--nightclub-primary);\n  border-radius: 6px;\n  color: var(--nightclub-primary);\n  font-size: 12px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.detection-clear-btn:hover {\n  background: rgba(233, 69, 96, 0.3);\n}\n\n.detection-targets-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 12px;\n  margin-bottom: 16px;\n}\n\n.detection-target-item {\n  background: rgba(255, 255, 255, 0.03);\n  border: 2px solid rgba(255, 255, 255, 0.08);\n  border-radius: 8px;\n  padding: 12px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.detection-target-item:hover {\n  background: rgba(255, 255, 255, 0.06);\n  border-color: rgba(233, 69, 96, 0.5);\n  transform: translateY(-2px);\n}\n\n.detection-target-item.selected {\n  background: rgba(233, 69, 96, 0.15);\n  border-color: var(--nightclub-primary);\n  box-shadow: 0 0 12px rgba(233, 69, 96, 0.3);\n}\n\n.detection-target-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.detection-target-name {\n  font-size: 15px;\n  font-weight: 700;\n  color: var(--nightclub-text-light);\n}\n\n.detection-target-category {\n  font-size: 11px;\n  padding: 2px 8px;\n  background: rgba(233, 69, 96, 0.2);\n  border-radius: 12px;\n  color: var(--nightclub-primary);\n}\n\n.detection-target-info {\n  font-size: 12px;\n  color: var(--nightclub-text-dim);\n  margin-bottom: 8px;\n  line-height: 1.4;\n}\n\n.detection-target-status {\n  font-size: 12px;\n  text-align: center;\n  padding: 6px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 6px;\n  color: var(--nightclub-text-dim);\n}\n\n.detection-target-item.selected .detection-target-status {\n  background: rgba(233, 69, 96, 0.3);\n  color: var(--nightclub-primary);\n  font-weight: 600;\n}\n\n.detection-actions {\n  display: flex;\n  gap: 12px;\n  margin-top: 16px;\n}\n\n.detection-action-btn {\n  flex: 1;\n  padding: 12px 16px;\n  background: linear-gradient(135deg, var(--nightclub-primary) 0%, #c8365a 100%);\n  border: none;\n  border-radius: 8px;\n  color: white;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.detection-action-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(233, 69, 96, 0.4);\n}\n\n.detection-action-btn:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.detection-action-btn.detection-remove-btn {\n  background: linear-gradient(135deg, #444 0%, #666 100%);\n}\n\n.detection-action-btn.detection-remove-btn:hover:not(:disabled) {\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n@media (max-width: 768px) {\n  .detection-results-content {\n    max-height: 250px;\n  }\n\n  .detection-result-item {\n    padding: 10px;\n  }\n\n  .detection-result-name {\n    font-size: 13px;\n  }\n\n  .detection-result-toggle {\n    font-size: 11px;\n    padding: 3px 6px;\n  }\n\n  .detection-result-data {\n    font-size: 12px;\n  }\n\n  .detection-result-data-inner {\n    font-size: 12px;\n  }\n\n  .detection-display-content {\n    max-height: 150px;\n  }\n\n  .detection-display-item-header {\n    flex-wrap: wrap;\n  }\n\n  .detection-targets-grid {\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    gap: 10px;\n  }\n  \n  .detection-actions {\n    flex-direction: column;\n  }\n}\n</style>\n`;\n\n// ==================== HTML ç»“æ„ ====================\nconst html = `\n<!-- æ‹–åŠ¨æŒ‰é’® -->\n<div id=\"nightclub-toggle-btn\" class=\"nightclub-toggle-btn\">\n  <span>ğŸŒ™</span>\n</div>\n\n<!-- ä¸»é¢æ¿ -->\n<div id=\"nightclub-main-panel\" class=\"nightclub-main-panel\">\n  <div class=\"nightclub-header\">\n    <div class=\"nightclub-header-left\">\n      <div class=\"nightclub-header-title\">ğŸŒ™ æ±Ÿç•”å¤œæ€»ä¼š</div>\n      <div class=\"nightclub-header-subtitle\" id=\"nightclub-time-display\">åŠ è½½ä¸­...</div>\n    </div>\n    <button class=\"nightclub-close-btn\" id=\"nightclub-close-btn\">Ã—</button>\n  </div>\n  \n  <!-- æ ‡ç­¾é¡µå¯¼èˆª -->\n  <div class=\"nightclub-tabs\">\n    <button class=\"nightclub-tab active\" data-page=\"club\">\n      ğŸ¢ ä¼šæ‰€çŠ¶æ€\n    </button>\n    <button class=\"nightclub-tab\" data-page=\"workshop\">\n      ğŸ­ å·¥åŠçŠ¶æ€<span class=\"nightclub-tab-badge\" id=\"tab-badge-workshop\">0</span>\n    </button>\n    <button class=\"nightclub-tab\" data-page=\"trainees\">\n      ğŸ‘¥ åŸ¹å…»å¯¹è±¡<span class=\"nightclub-tab-badge\" id=\"tab-badge-trainees\">0</span>\n    </button>\n    <button class=\"nightclub-tab\" data-page=\"archived\">\n      ğŸ“ å·²å½’æ¡£<span class=\"nightclub-tab-badge\" id=\"tab-badge-archived\">0</span>\n    </button>\n    <button class=\"nightclub-tab\" data-page=\"detection\">\n      ğŸ” å¯¹è±¡ä¾¦æµ‹<span class=\"nightclub-tab-badge\" id=\"tab-badge-detection\">0</span>\n    </button>\n  </div>\n  \n  <div class=\"nightclub-content\" id=\"nightclub-content\">\n    <div class=\"nightclub-loading\">\n      <div class=\"nightclub-loading-icon\">â³</div>\n      <div>æ­£åœ¨åŠ è½½æ•°æ®...</div>\n    </div>\n  </div>\n</div>\n`;\n\n// ==================== å…¨å±€å˜é‡ ====================\nlet btnDragData: {\n  startX: number;\n  startY: number;\n  initialLeft: number;\n  initialTop: number;\n  hasDragged: boolean;\n} | null = null;\nlet panelDragData: {\n  startX: number;\n  startY: number;\n  initialLeft: number;\n  initialTop: number;\n  hasDragged: boolean;\n} | null = null;\nlet cachedMVUData: any = null;\nconst MAX_RETRIES = 5;\nconst RETRY_DELAY = 400;\nlet currentRetry = 0;\nconst DRAG_THRESHOLD = 5; // æ‹–åŠ¨é˜ˆå€¼ï¼ˆåƒç´ ï¼‰ï¼Œå°äºæ­¤å€¼è§†ä¸ºç‚¹å‡»\nlet currentPage: 'club' | 'workshop' | 'trainees' | 'archived' | 'detection' = 'club'; // å½“å‰é¡µé¢\nlet selectedDetectionTargets: Set<string> = new Set(); // é€‰ä¸­çš„ä¾¦æµ‹å¯¹è±¡\n\n// ==================== å·¥å…·å‡½æ•° ====================\nfunction safeGet(data: any, path: string, defaultValue: string = 'æœªçŸ¥'): string {\n  if (!data) return defaultValue;\n  const keys = path.split('.');\n  let current = data;\n  for (const key of keys) {\n    if (current === undefined || current === null || typeof current !== 'object') {\n      return defaultValue;\n    }\n    current = current[key];\n  }\n  if (current === undefined || current === null) return defaultValue;\n  return String(current) === '' ? defaultValue : String(current);\n}\n\n// ==================== åˆå§‹åŒ–å‡½æ•° ====================\nfunction initializeNightclubPlugin(): void {\n  console.log('ğŸš€ åˆå§‹åŒ–æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶...');\n\n  // è·å–ç›®æ ‡æ–‡æ¡£ï¼ˆæ·»åŠ é”™è¯¯å¤„ç†ï¼Œé˜²æ­¢è·¨åŸŸé—®é¢˜ï¼‰\n  let targetDoc: Document;\n  try {\n    targetDoc = window.top ? window.top.document : document;\n  } catch (e) {\n    console.warn('âš ï¸ æ— æ³•è®¿é—® window.topï¼Œä½¿ç”¨å½“å‰ document');\n    targetDoc = document;\n  }\n\n  // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨\n  if (targetDoc.getElementById('nightclub-toggle-btn')) {\n    console.log('âš ï¸ æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ å·²å­˜åœ¨ï¼Œå…ˆç§»é™¤æ—§çš„');\n    targetDoc.getElementById('nightclub-toggle-btn')?.remove();\n    targetDoc.getElementById('nightclub-main-panel')?.remove();\n    targetDoc.getElementById('nightclub-plugin-styles')?.remove();\n    // æ¸…ç†äº‹ä»¶\n    $(targetDoc).off('.nightclub-plugin');\n    $(targetDoc).off('.nightclub-panel');\n    $(window).off('.nightclub-panel');\n  }\n\n  // æ³¨å…¥æ ·å¼\n  if (!targetDoc.getElementById('nightclub-plugin-styles')) {\n    targetDoc.head.insertAdjacentHTML('beforeend', styles);\n    console.log('âœ… æ ·å¼å·²æ³¨å…¥');\n  }\n\n  // æ³¨å…¥ HTML\n  targetDoc.body.insertAdjacentHTML('beforeend', html);\n  console.log('âœ… HTML å·²æ³¨å…¥');\n\n  // ä» localStorage æ¢å¤æŒ‰é’®ä½ç½®\n  const btn = targetDoc.getElementById('nightclub-toggle-btn');\n  if (btn) {\n    try {\n      const saved = localStorage.getItem('nightclub-btn-position');\n      if (saved) {\n        const pos = JSON.parse(saved);\n        btn.style.left = pos.left + 'px';\n        btn.style.top = pos.top + 'px';\n        console.log('ğŸ“ æ¢å¤æŒ‰é’®ä½ç½®:', pos);\n      }\n    } catch (e) {\n      console.warn('âš ï¸ æ¢å¤æŒ‰é’®ä½ç½®å¤±è´¥');\n    }\n  }\n\n  // åˆå§‹åŒ–æŒ‰é’®æ‹–åŠ¨åŠŸèƒ½\n  initializeButtonDrag(targetDoc);\n\n  // åˆå§‹åŒ–é¢æ¿åŠŸèƒ½\n  initializePanelSystem(targetDoc);\n\n  console.log('âœ… æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶åˆå§‹åŒ–å®Œæˆï¼');\n}\n\n// ==================== æŒ‰é’®æ‹–åŠ¨åŠŸèƒ½ ====================\nfunction initializeButtonDrag(targetDoc: Document): void {\n  const btn = targetDoc.getElementById('nightclub-toggle-btn');\n  const panel = targetDoc.getElementById('nightclub-main-panel');\n  if (!btn || !panel) return;\n\n  const $targetDoc = $(targetDoc);\n\n  // æ‹–åŠ¨å¼€å§‹\n  function handleBtnDragStart(clientX: number, clientY: number): boolean {\n    if (btnDragData) return false;\n\n    const computedStyle = window.getComputedStyle(btn);\n    const currentLeft = parseInt(computedStyle.left) || 0;\n    const currentTop = parseInt(computedStyle.top) || 0;\n\n    btnDragData = {\n      startX: clientX,\n      startY: clientY,\n      initialLeft: currentLeft,\n      initialTop: currentTop,\n      hasDragged: false, // åˆå§‹åŒ–ä¸ºæœªæ‹–åŠ¨\n    };\n\n    console.log('ğŸ–±ï¸ å‡†å¤‡æ‹–åŠ¨æŒ‰é’®');\n    return true;\n  }\n\n  // æ‹–åŠ¨ç§»åŠ¨\n  function handleBtnDragMove(clientX: number, clientY: number): void {\n    if (!btnDragData) return;\n\n    const deltaX = clientX - btnDragData.startX;\n    const deltaY = clientY - btnDragData.startY;\n\n    // æ£€æŸ¥æ˜¯å¦è¶…è¿‡æ‹–åŠ¨é˜ˆå€¼\n    if (!btnDragData.hasDragged && (Math.abs(deltaX) > DRAG_THRESHOLD || Math.abs(deltaY) > DRAG_THRESHOLD)) {\n      btnDragData.hasDragged = true;\n      btn.classList.add('dragging');\n      console.log('ğŸ–±ï¸ å¼€å§‹æ‹–åŠ¨æŒ‰é’®');\n    }\n\n    // åªæœ‰çœŸæ­£æ‹–åŠ¨æ—¶æ‰ç§»åŠ¨\n    if (btnDragData.hasDragged) {\n      let newLeft = btnDragData.initialLeft + deltaX;\n      let newTop = btnDragData.initialTop + deltaY;\n\n      // é™åˆ¶èŒƒå›´\n      let targetWindow: Window;\n      try {\n        targetWindow = window.top || window;\n      } catch (e) {\n        targetWindow = window;\n      }\n      const maxX = $(targetWindow).width()! - 80;\n      const maxY = $(targetWindow).height()! - 80;\n\n      newLeft = Math.max(0, Math.min(newLeft, maxX));\n      newTop = Math.max(0, Math.min(newTop, maxY));\n\n      btn.style.left = newLeft + 'px';\n      btn.style.top = newTop + 'px';\n    }\n  }\n\n  // æ‹–åŠ¨ç»“æŸ\n  function handleBtnDragEnd(clientX: number, clientY: number): void {\n    if (!btnDragData) return;\n\n    const wasDragged = btnDragData.hasDragged;\n\n    btn.classList.remove('dragging');\n\n    // ä¿å­˜ä½ç½®\n    if (wasDragged) {\n      const computedStyle = window.getComputedStyle(btn);\n      const currentLeft = parseInt(computedStyle.left) || 0;\n      const currentTop = parseInt(computedStyle.top) || 0;\n\n      const position = {\n        left: currentLeft,\n        top: currentTop,\n      };\n\n      localStorage.setItem('nightclub-btn-position', JSON.stringify(position));\n      console.log('âœ… æŒ‰é’®æ‹–åŠ¨ç»“æŸï¼Œä¿å­˜ä½ç½®:', position);\n    }\n\n    btnDragData = null;\n\n    // å¦‚æœæ²¡æœ‰çœŸæ­£æ‹–åŠ¨ï¼Œè§†ä¸ºç‚¹å‡»\n    if (!wasDragged) {\n      console.log('ğŸ¨ æ£€æµ‹åˆ°ç‚¹å‡»ï¼Œåˆ‡æ¢é¢æ¿');\n      togglePanel(targetDoc);\n    }\n  }\n\n  // ç»‘å®šäº‹ä»¶\n  $(btn).on('mousedown.nightclub-plugin', function (e) {\n    if (handleBtnDragStart(e.clientX, e.clientY)) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  });\n\n  // è§¦æ‘¸äº‹ä»¶éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œé˜²æ­¢å¹²æ‰°é»˜è®¤æ»šåŠ¨\n  btn.addEventListener(\n    'touchstart',\n    function (e: TouchEvent) {\n      const touch = e.touches[0];\n      if (handleBtnDragStart(touch.clientX, touch.clientY)) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    },\n    { passive: false }, // å¿…é¡»ä¸º false æ‰èƒ½è°ƒç”¨ preventDefault\n  );\n\n  $targetDoc.on('mousemove.nightclub-plugin', function (e) {\n    handleBtnDragMove(e.clientX, e.clientY);\n    if (btnDragData) e.preventDefault();\n  });\n\n  $targetDoc.on('touchmove.nightclub-plugin', function (e) {\n    const touch = e.originalEvent!.touches[0];\n    handleBtnDragMove(touch.clientX, touch.clientY);\n    if (btnDragData) e.preventDefault();\n  });\n\n  $targetDoc.on('mouseup.nightclub-plugin', function (e) {\n    handleBtnDragEnd(e.clientX, e.clientY);\n  });\n\n  $targetDoc.on('touchend.nightclub-plugin touchcancel.nightclub-plugin', function (e) {\n    const touch = e.originalEvent!.changedTouches[0];\n    if (touch) {\n      handleBtnDragEnd(touch.clientX, touch.clientY);\n    } else {\n      handleBtnDragEnd(0, 0);\n    }\n  });\n\n  console.log('âœ… æŒ‰é’®æ‹–åŠ¨åŠŸèƒ½å·²åˆå§‹åŒ–');\n}\n\n// ==================== é¢æ¿ç³»ç»Ÿ ====================\nfunction initializePanelSystem(targetDoc: Document): void {\n  const closeBtn = targetDoc.getElementById('nightclub-close-btn');\n  if (closeBtn) {\n    closeBtn.addEventListener('click', e => {\n      e.stopPropagation(); // é˜²æ­¢è§¦å‘æ‹–åŠ¨\n      const panel = targetDoc.getElementById('nightclub-main-panel');\n      if (panel) {\n        panel.classList.remove('active');\n      }\n    });\n  }\n\n  // åˆå§‹åŒ–æ ‡ç­¾é¡µåˆ‡æ¢\n  initializeTabSwitching(targetDoc);\n\n  // åˆå§‹åŒ–é¢æ¿æ‹–åŠ¨åŠŸèƒ½\n  initializePanelDrag(targetDoc);\n\n  console.log('âœ… é¢æ¿ç³»ç»Ÿå·²åˆå§‹åŒ–');\n}\n\n// ==================== æ ‡ç­¾é¡µåˆ‡æ¢ ====================\nfunction initializeTabSwitching(targetDoc: Document): void {\n  const tabs = targetDoc.querySelectorAll('.nightclub-tab');\n\n  tabs.forEach(tab => {\n    tab.addEventListener('click', function (e) {\n      e.stopPropagation(); // é˜²æ­¢è§¦å‘æ‹–åŠ¨\n\n      const page = (this as HTMLElement).getAttribute('data-page') as\n        | 'club'\n        | 'workshop'\n        | 'trainees'\n        | 'archived'\n        | 'detection';\n      if (!page) return;\n\n      // æ›´æ–°å½“å‰é¡µé¢\n      currentPage = page;\n\n      // æ›´æ–°æ ‡ç­¾çŠ¶æ€\n      tabs.forEach(t => t.classList.remove('active'));\n      this.classList.add('active');\n\n      // é‡æ–°æ¸²æŸ“å½“å‰é¡µé¢å†…å®¹\n      if (cachedMVUData) {\n        renderNightclubData(targetDoc, cachedMVUData);\n      }\n\n      console.log('ğŸ“„ åˆ‡æ¢åˆ°é¡µé¢:', page);\n    });\n  });\n\n  console.log('âœ… æ ‡ç­¾é¡µåˆ‡æ¢å·²åˆå§‹åŒ–');\n}\n\n// ==================== é¢æ¿æ‹–åŠ¨åŠŸèƒ½ ====================\nfunction initializePanelDrag(targetDoc: Document): void {\n  const panel = targetDoc.getElementById('nightclub-main-panel');\n  const header = targetDoc.getElementById('nightclub-close-btn')?.parentElement;\n\n  if (!panel || !header) return;\n\n  const $targetDoc = $(targetDoc);\n  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n  // ä» localStorage æ¢å¤é¢æ¿ä½ç½®\n  function restorePanelPosition() {\n    try {\n      const saved = localStorage.getItem('nightclub-panel-position');\n      if (saved) {\n        const pos = JSON.parse(saved);\n        // æ£€æŸ¥æ˜¯å¦åœ¨ç§»åŠ¨ç«¯ç«–å±æ¨¡å¼\n        const isPortraitMobile = window.innerWidth <= 480 && window.innerWidth < window.innerHeight;\n\n        if (!isPortraitMobile) {\n          panel.style.transform = 'none';\n          panel.style.left = pos.left + 'px';\n          panel.style.top = pos.top + 'px';\n          console.log('ğŸ“ æ¢å¤é¢æ¿ä½ç½®:', pos);\n        }\n      }\n    } catch (e) {\n      console.warn('âš ï¸ æ¢å¤é¢æ¿ä½ç½®å¤±è´¥');\n    }\n  }\n\n  // æ‹–åŠ¨å¼€å§‹\n  function handlePanelDragStart(clientX: number, clientY: number): boolean {\n    if (panelDragData) return false;\n\n    // æ£€æŸ¥æ˜¯å¦åœ¨ç§»åŠ¨ç«¯ç«–å±æ¨¡å¼ï¼ˆå…¨å±æ¨¡å¼ä¸å…è®¸æ‹–åŠ¨ï¼‰\n    const isPortraitMobile = window.innerWidth <= 480 && window.innerWidth < window.innerHeight;\n    if (isPortraitMobile) return false;\n\n    const rect = panel.getBoundingClientRect();\n\n    panelDragData = {\n      startX: clientX,\n      startY: clientY,\n      initialLeft: rect.left,\n      initialTop: rect.top,\n      hasDragged: false, // åˆå§‹åŒ–ä¸ºæœªæ‹–åŠ¨\n    };\n\n    console.log('ğŸ–±ï¸ å‡†å¤‡æ‹–åŠ¨é¢æ¿');\n    return true;\n  }\n\n  // æ‹–åŠ¨ç§»åŠ¨\n  function handlePanelDragMove(clientX: number, clientY: number): void {\n    if (!panelDragData) return;\n\n    const deltaX = clientX - panelDragData.startX;\n    const deltaY = clientY - panelDragData.startY;\n\n    // æ£€æŸ¥æ˜¯å¦è¶…è¿‡æ‹–åŠ¨é˜ˆå€¼\n    if (!panelDragData.hasDragged && (Math.abs(deltaX) > DRAG_THRESHOLD || Math.abs(deltaY) > DRAG_THRESHOLD)) {\n      panelDragData.hasDragged = true;\n      panel.classList.add('dragging');\n      header.classList.add('dragging');\n      console.log('ğŸ–±ï¸ å¼€å§‹æ‹–åŠ¨é¢æ¿');\n    }\n\n    // åªæœ‰çœŸæ­£æ‹–åŠ¨æ—¶æ‰ç§»åŠ¨\n    if (panelDragData.hasDragged) {\n      let newLeft = panelDragData.initialLeft + deltaX;\n      let newTop = panelDragData.initialTop + deltaY;\n\n      // è·å–é¢æ¿å°ºå¯¸\n      const panelWidth = panel.offsetWidth;\n      const panelHeight = panel.offsetHeight;\n\n      // é™åˆ¶èŒƒå›´ï¼ˆè‡³å°‘ä¿ç•™ 50px åœ¨è§†å£å†…ï¼‰\n      let targetWindow: Window;\n      try {\n        targetWindow = window.top || window;\n      } catch (e) {\n        targetWindow = window;\n      }\n      const viewportWidth = $(targetWindow).width()!;\n      const viewportHeight = $(targetWindow).height()!;\n\n      newLeft = Math.max(-panelWidth + 50, Math.min(newLeft, viewportWidth - 50));\n      newTop = Math.max(0, Math.min(newTop, viewportHeight - 50));\n\n      // ç§»é™¤ transformï¼Œä½¿ç”¨ left/top å®šä½\n      panel.style.transform = 'none';\n      panel.style.left = newLeft + 'px';\n      panel.style.top = newTop + 'px';\n    }\n  }\n\n  // æ‹–åŠ¨ç»“æŸ\n  function handlePanelDragEnd(): void {\n    if (!panelDragData) return;\n\n    const wasDragged = panelDragData.hasDragged;\n\n    panel.classList.remove('dragging');\n    header.classList.remove('dragging');\n\n    // ä¿å­˜ä½ç½®\n    if (wasDragged) {\n      const rect = panel.getBoundingClientRect();\n      const position = {\n        left: rect.left,\n        top: rect.top,\n      };\n\n      localStorage.setItem('nightclub-panel-position', JSON.stringify(position));\n      console.log('âœ… é¢æ¿æ‹–åŠ¨ç»“æŸï¼Œä¿å­˜ä½ç½®:', position);\n    }\n\n    panelDragData = null;\n  }\n\n  // ç»‘å®šé¼ æ ‡äº‹ä»¶\n  $(header).on('mousedown.nightclub-panel', function (e) {\n    // ä¸å¤„ç†å…³é—­æŒ‰é’®çš„ç‚¹å‡»\n    if ((e.target as HTMLElement).closest('.nightclub-close-btn')) {\n      return;\n    }\n\n    if (handlePanelDragStart(e.clientX, e.clientY)) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  });\n\n  // ç»‘å®šè§¦æ‘¸äº‹ä»¶ï¼ˆä½¿ç”¨åŸç”Ÿäº‹ä»¶ä»¥æ”¯æŒ passive é€‰é¡¹ï¼‰\n  header.addEventListener(\n    'touchstart',\n    function (e: TouchEvent) {\n      // ä¸å¤„ç†å…³é—­æŒ‰é’®çš„è§¦æ‘¸\n      if ((e.target as HTMLElement).closest('.nightclub-close-btn')) {\n        return;\n      }\n\n      const touch = e.touches[0];\n      if (handlePanelDragStart(touch.clientX, touch.clientY)) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    },\n    { passive: false }, // å¿…é¡»ä¸º false æ‰èƒ½è°ƒç”¨ preventDefault\n  );\n\n  $targetDoc.on('mousemove.nightclub-panel', function (e) {\n    handlePanelDragMove(e.clientX, e.clientY);\n    if (panelDragData) e.preventDefault();\n  });\n\n  $targetDoc.on('touchmove.nightclub-panel', function (e) {\n    const touch = e.originalEvent!.touches[0];\n    handlePanelDragMove(touch.clientX, touch.clientY);\n    if (panelDragData) e.preventDefault();\n  });\n\n  $targetDoc.on('mouseup.nightclub-panel', function () {\n    handlePanelDragEnd();\n  });\n\n  $targetDoc.on('touchend.nightclub-panel touchcancel.nightclub-panel', function () {\n    handlePanelDragEnd();\n  });\n\n  // çª—å£å¤§å°æ”¹å˜æ—¶é‡ç½®ä½ç½®ï¼ˆå¦‚æœåˆ‡æ¢åˆ°ç§»åŠ¨ç«¯ç«–å±ï¼‰\n  $(window).on('resize.nightclub-panel orientationchange.nightclub-panel', function () {\n    const isPortraitMobile = window.innerWidth <= 480 && window.innerWidth < window.innerHeight;\n    if (isPortraitMobile) {\n      // ç§»åŠ¨ç«¯ç«–å±æ¨¡å¼ï¼Œé‡ç½®ä¸ºå…¨å±\n      panel.style.transform = 'none';\n      panel.style.left = '0';\n      panel.style.top = '0';\n    } else {\n      // éç§»åŠ¨ç«¯ç«–å±ï¼Œæ¢å¤ä¿å­˜çš„ä½ç½®æˆ–å±…ä¸­\n      restorePanelPosition();\n    }\n  });\n\n  // æ¢å¤ä½ç½®\n  restorePanelPosition();\n\n  console.log('âœ… é¢æ¿æ‹–åŠ¨åŠŸèƒ½å·²åˆå§‹åŒ–');\n}\n\nfunction togglePanel(targetDoc: Document): void {\n  const panel = targetDoc.getElementById('nightclub-main-panel');\n  if (!panel) return;\n\n  const isActive = panel.classList.contains('active');\n\n  if (isActive) {\n    panel.classList.remove('active');\n  } else {\n    panel.classList.add('active');\n    // æ‰“å¼€é¢æ¿æ—¶åŠ è½½æ•°æ®\n    currentRetry = 0;\n    loadNightclubData(targetDoc);\n  }\n}\n\n// ==================== æ•°æ®åŠ è½½ ====================\nasync function loadNightclubData(targetDoc: Document): Promise<void> {\n  try {\n    // æ£€æŸ¥ MVU æ˜¯å¦å¯ç”¨ï¼ˆæ”¹è¿›ç‰ˆï¼Œæ›´å¥å£®ï¼‰\n    if (typeof Mvu === 'undefined') {\n      // å°è¯•ä»çˆ¶çª—å£è·å–ï¼ˆæ·»åŠ é”™è¯¯å¤„ç†ï¼‰\n      try {\n        if (window.parent && typeof (window.parent as any).Mvu !== 'undefined') {\n          (window as any).Mvu = (window.parent as any).Mvu;\n          console.log('âœ… å·²ä»çˆ¶çª—å£å¼•ç”¨ MVU');\n        } else {\n          throw new Error('çˆ¶çª—å£ä¸­ä¹Ÿæ²¡æœ‰ MVU');\n        }\n      } catch (e) {\n        console.warn('âš ï¸ MVU æ¡†æ¶æœªåŠ è½½æˆ–æ— æ³•è®¿é—®çˆ¶çª—å£');\n        if (currentRetry < MAX_RETRIES) {\n          currentRetry++;\n          console.log(`ğŸ”„ ç¬¬ ${currentRetry}/${MAX_RETRIES} æ¬¡é‡è¯•åŠ è½½ MVU...`);\n          setTimeout(() => loadNightclubData(targetDoc), RETRY_DELAY);\n        } else {\n          showError(targetDoc, 'MVU æ¡†æ¶æœªåŠ è½½ï¼Œè¯·ç¡®ä¿å·²å®‰è£…é…’é¦†åŠ©æ‰‹å¹¶å¯ç”¨ MVU æ¡†æ¶');\n        }\n        return;\n      }\n    }\n\n    // è·å–æœ€æ–°æ¶ˆæ¯çš„ MVU æ•°æ®\n    const mvuResult = Mvu.getMvuData({\n      type: 'message',\n      message_id: 'latest',\n    });\n\n    const data = mvuResult?.stat_data;\n\n    if (!data) {\n      console.warn('âš ï¸ MVU æ•°æ®ä¸ºç©º');\n      if (currentRetry < MAX_RETRIES) {\n        currentRetry++;\n        setTimeout(() => loadNightclubData(targetDoc), RETRY_DELAY);\n      } else {\n        showError(targetDoc, 'æœªèƒ½åŠ è½½æ•°æ®');\n      }\n      return;\n    }\n\n    cachedMVUData = data;\n    console.log('âœ… æ•°æ®åŠ è½½æˆåŠŸ', data);\n\n    // æ¸²æŸ“æ•°æ®\n    renderNightclubData(targetDoc, data);\n  } catch (error) {\n    console.error('âŒ åŠ è½½æ•°æ®å‡ºé”™:', error);\n    showError(targetDoc, 'åŠ è½½å‡ºé”™: ' + (error as Error).message);\n  }\n}\n\nfunction showError(targetDoc: Document, message: string): void {\n  const contentDiv = targetDoc.getElementById('nightclub-content');\n  if (contentDiv) {\n    contentDiv.innerHTML = `\n      <div class=\"nightclub-empty\">\n        <div class=\"nightclub-empty-icon\">âš ï¸</div>\n        <div class=\"nightclub-empty-text\">${message}</div>\n      </div>\n    `;\n  }\n}\n\n// ==================== æ•°æ®æ¸²æŸ“ ====================\nfunction renderNightclubData(targetDoc: Document, data: NightclubData): void {\n  const contentDiv = targetDoc.getElementById('nightclub-content');\n  const timeDisplay = targetDoc.getElementById('nightclub-time-display');\n\n  if (!contentDiv) return;\n\n  // æ›´æ–°æ—¶é—´æ˜¾ç¤º\n  if (timeDisplay && data.æ—¶é—´ä¿¡æ¯) {\n    const dateText = safeGet(data, 'æ—¶é—´ä¿¡æ¯.å½“å‰æ—¥æœŸ', '');\n    const timeText = safeGet(data, 'æ—¶é—´ä¿¡æ¯.å½“å‰æ—¶é—´', '');\n    const statusText = safeGet(data, 'æ—¶é—´ä¿¡æ¯.è¥ä¸šçŠ¶æ€', '');\n    const locationText = safeGet(data, 'åœ°ç‚¹ä¿¡æ¯.å½“å‰ä½ç½®', '');\n    timeDisplay.textContent = `${dateText} ${timeText} | ${statusText}${locationText ? ` | ${locationText}` : ''}`;\n  }\n\n  // æ›´æ–°æ ‡ç­¾å¾½ç« \n  const ordersCount = data.å¤œæ€»ä¼šç»è¥?.å¾…å¤„ç†è®¢å•?.length || 0;\n  const traineesCount = data.å·¥åŠåŸ¹å…»å¯¹è±¡?.åŸ¹å…»åˆ—è¡¨?.length || 0;\n  const archivedCount = data.å·²å½’æ¡£?.æ¡£æ¡ˆåˆ—è¡¨?.length || 0;\n  const detectionCount = data.ä¾¦æµ‹æ•°æ® ? Object.keys(data.ä¾¦æµ‹æ•°æ®).length : 0;\n\n  const workshopBadge = targetDoc.getElementById('tab-badge-workshop');\n  const traineesBadge = targetDoc.getElementById('tab-badge-trainees');\n  const archivedBadge = targetDoc.getElementById('tab-badge-archived');\n  const detectionBadge = targetDoc.getElementById('tab-badge-detection');\n\n  if (workshopBadge) workshopBadge.textContent = String(ordersCount);\n  if (traineesBadge) traineesBadge.textContent = String(traineesCount);\n  if (archivedBadge) archivedBadge.textContent = String(archivedCount);\n  if (detectionBadge) detectionBadge.textContent = String(detectionCount);\n\n  // æ„å»º HTML\n  let html = '';\n\n  // æ ¹æ®å½“å‰é¡µé¢æ¸²æŸ“ä¸åŒå†…å®¹\n  if (currentPage === 'club') {\n    // ========== ä¼šæ‰€çŠ¶æ€é¡µé¢ ==========\n    html += renderClubPage(data);\n  } else if (currentPage === 'workshop') {\n    // ========== å·¥åŠçŠ¶æ€é¡µé¢ ==========\n    html += renderWorkshopPage(data);\n  } else if (currentPage === 'trainees') {\n    // ========== åŸ¹å…»å¯¹è±¡é¡µé¢ ==========\n    html += renderTraineesPage(data);\n  } else if (currentPage === 'archived') {\n    // ========== å·²å½’æ¡£é¡µé¢ ==========\n    html += renderArchivedPage(data);\n  } else if (currentPage === 'detection') {\n    // ========== å¯¹è±¡ä¾¦æµ‹é¡µé¢ ==========\n    html += renderDetectionPage(data);\n  }\n\n  contentDiv.innerHTML = html;\n\n  // å¦‚æœæ˜¯ä¾¦æµ‹é¡µé¢ï¼Œéœ€è¦ç»‘å®šäº‹ä»¶\n  if (currentPage === 'detection') {\n    initializeDetectionEvents(targetDoc);\n  }\n}\n\n// ==================== æ¸²æŸ“ä¼šæ‰€çŠ¶æ€é¡µé¢ ====================\nfunction renderClubPage(data: NightclubData): string {\n  let html = '';\n\n  // ç»è¥çŠ¶å†µ\n  if (data.å¤œæ€»ä¼šç»è¥) {\n    html += `\n      <div class=\"nightclub-card\">\n        <div class=\"nightclub-card-title\">\n          <span>ğŸ’¼</span>\n          <span>ç»è¥çŠ¶å†µ</span>\n        </div>\n        <div class=\"nightclub-card-content\">\n          <div class=\"nightclub-info-row\">\n            <span class=\"nightclub-info-label\">VIPå®¢æˆ·</span>\n            <span class=\"nightclub-info-value\">${safeGet(data, 'å¤œæ€»ä¼šç»è¥.VIPå®¢æˆ·æ•°', '0')} äºº</span>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  // åœ°ä¸Šå„åŒºåŸŸçŠ¶æ€ï¼ˆé¢„ç•™æ¥å£ï¼‰\n  html += `\n    <div class=\"nightclub-card\">\n      <div class=\"nightclub-card-title\">\n        <span>ğŸ¢</span>\n        <span>åœ°ä¸ŠåŒºåŸŸ</span>\n      </div>\n      <div class=\"nightclub-card-content\">\n          <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">é…’æ°´å§å°</span>\n          <span class=\"nightclub-info-value\">æ­£å¸¸è¥ä¸š</span>\n          </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">è±ªåèˆå…</span>\n          <span class=\"nightclub-info-value\">æ­£å¸¸è¥ä¸š</span>\n        </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">KTVåŒ…å¢</span>\n          <span class=\"nightclub-info-value\">æ­£å¸¸è¥ä¸š</span>\n        </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">VIPä¼‘æ¯å®¤</span>\n          <span class=\"nightclub-info-value\">æ­£å¸¸è¥ä¸š</span>\n        </div>\n        </div>\n      </div>\n    `;\n\n  return html;\n}\n\n// ==================== æ¸²æŸ“å·¥åŠçŠ¶æ€é¡µé¢ ====================\nfunction renderWorkshopPage(data: NightclubData): string {\n  let html = '';\n\n  // åœ°ä¸‹å„åŒºåŸŸçŠ¶æ€\n  html += `\n    <div class=\"nightclub-card\">\n      <div class=\"nightclub-card-title\">\n        <span>ğŸ­</span>\n        <span>åœ°ä¸‹åŒºåŸŸ</span>\n      </div>\n      <div class=\"nightclub-card-content\">\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">åŸºç¡€åŸ¹è®­ä¸­å¿ƒ</span>\n          <span class=\"nightclub-info-value\">è¿è¡Œä¸­</span>\n        </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">å½¢ä½“å¡‘é€ ä¸­å¿ƒ</span>\n          <span class=\"nightclub-info-value\">è¿è¡Œä¸­</span>\n        </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">ä¿å…»æŠ¤ç†ä¸­å¿ƒ</span>\n          <span class=\"nightclub-info-value\">è¿è¡Œä¸­</span>\n        </div>\n        <div class=\"nightclub-info-row\">\n          <span class=\"nightclub-info-label\">å½“å‰åŸ¹å…»äººæ•°</span>\n          <span class=\"nightclub-info-value\">${data.å·¥åŠåŸ¹å…»å¯¹è±¡?.å½“å‰åŸ¹å…»äººæ•° || 0} äºº</span>\n        </div>\n      </div>\n    </div>\n  `;\n\n  // å¾…å¤„ç†è®¢å•è¯¦æƒ…\n  if (data.å¤œæ€»ä¼šç»è¥?.å¾…å¤„ç†è®¢å• && data.å¤œæ€»ä¼šç»è¥.å¾…å¤„ç†è®¢å•.length > 0) {\n    const orders = data.å¤œæ€»ä¼šç»è¥.å¾…å¤„ç†è®¢å•;\n    html += `\n      <div class=\"nightclub-card\">\n        <div class=\"nightclub-card-title\">\n          <span>ğŸ“‹</span>\n          <span>è®¢å•è¯¦æƒ… (${orders.length})</span>\n        </div>\n        <div class=\"nightclub-card-content\">\n    `;\n\n    orders.forEach(order => {\n      const orderNum = order.è®¢å•ç¼–å· || 'æœªçŸ¥';\n      const client = order.å®¢æˆ·ä»£å· || 'æœªçŸ¥';\n      const type = order.éœ€æ±‚ç±»å‹ || '';\n      const requirements = order.å…·ä½“è¦æ±‚ || '';\n      const deadline = order.æˆªæ­¢æ—¥æœŸ || '';\n      const status = order.çŠ¶æ€ || 'å¾…å¤„ç†';\n\n      html += `\n        <div class=\"nightclub-trainee-item\">\n          <div class=\"nightclub-trainee-header\">\n            <span class=\"nightclub-trainee-name\">${orderNum}</span>\n            <span class=\"nightclub-trainee-status\">${status}</span>\n          </div>\n          <div class=\"nightclub-info-row\">\n            <span class=\"nightclub-info-label\">å®¢æˆ·</span>\n            <span class=\"nightclub-info-value\">${client}</span>\n          </div>\n          ${\n            type\n              ? `\n          <div class=\"nightclub-info-row\">\n            <span class=\"nightclub-info-label\">éœ€æ±‚ç±»å‹</span>\n            <span class=\"nightclub-info-value\">${type}</span>\n          </div>`\n              : ''\n          }\n          ${\n            requirements\n              ? `\n          <div class=\"nightclub-info-row\">\n            <span class=\"nightclub-info-label\">å…·ä½“è¦æ±‚</span>\n            <span class=\"nightclub-info-value\">${requirements}</span>\n          </div>`\n              : ''\n          }\n          ${\n            deadline\n              ? `\n          <div class=\"nightclub-info-row\">\n            <span class=\"nightclub-info-label\">æˆªæ­¢æ—¥æœŸ</span>\n            <span class=\"nightclub-info-value\">${deadline}</span>\n          </div>`\n              : ''\n          }\n        </div>\n      `;\n    });\n\n    html += `\n        </div>\n      </div>\n    `;\n  } else {\n    html += `\n      <div class=\"nightclub-empty\">\n        <div class=\"nightclub-empty-icon\">ğŸ“­</div>\n        <div class=\"nightclub-empty-text\">æš‚æ— å¾…å¤„ç†è®¢å•</div>\n      </div>\n    `;\n  }\n\n  return html;\n}\n\n// ==================== æ¸²æŸ“åŸ¹å…»å¯¹è±¡é¡µé¢ ====================\nfunction renderTraineesPage(data: NightclubData): string {\n  let html = '';\n\n  if (data.å·¥åŠåŸ¹å…»å¯¹è±¡) {\n    const trainees = data.å·¥åŠåŸ¹å…»å¯¹è±¡.åŸ¹å…»åˆ—è¡¨ || [];\n\n    if (trainees.length === 0) {\n      html += `\n          <div class=\"nightclub-empty\">\n            <div class=\"nightclub-empty-icon\">ğŸ“­</div>\n            <div class=\"nightclub-empty-text\">æš‚æ— åŸ¹å…»å¯¹è±¡</div>\n          </div>\n      `;\n    } else {\n      html += `\n        <div class=\"nightclub-card\">\n          <div class=\"nightclub-card-title\">\n            <span>ğŸ‘¥</span>\n            <span>å·¥åŠåŸ¹å…»å¯¹è±¡ (${trainees.length})</span>\n          </div>\n          <div class=\"nightclub-card-content\">\n      `;\n\n      trainees.forEach(trainee => {\n        const name = trainee.å§“å || 'æœªçŸ¥';\n        const code = trainee.ç¼–å· || '';\n        const age = trainee.åŸºæœ¬ä¿¡æ¯?.å¹´é¾„ || '';\n        const origin = trainee.åŸºæœ¬ä¿¡æ¯?.æ¥æº || '';\n        const appearance = trainee.åŸºæœ¬ä¿¡æ¯?.åŸå§‹å¤–è²Œ || '';\n        const days = trainee.åŸºæœ¬ä¿¡æ¯?.åŸ¹å…»å¤©æ•° || '0';\n        const progress = typeof trainee.åŸ¹å…»è¿›åº¦ === 'number' ? trainee.åŸ¹å…»è¿›åº¦ : trainee.åŸ¹å…»è¿›åº¦ || '0';\n        const order = trainee.å®šåˆ¶ä¿¡æ¯?.å¯¹åº”è®¢å• || 'æ— ';\n        const target = trainee.å®šåˆ¶ä¿¡æ¯?.ç›®æ ‡å½¢è±¡ || 'æœªå®š';\n        const requirements = trainee.å®šåˆ¶ä¿¡æ¯?.ç‰¹æ®Šè¦æ±‚ || '';\n        const status = trainee.å½“å‰çŠ¶æ€ || 'åŸ¹è®­ä¸­';\n\n        html += `\n          <div class=\"nightclub-trainee-item\">\n            <div class=\"nightclub-trainee-header\">\n              <span class=\"nightclub-trainee-name\">${name}${code ? ` (${code})` : ''}</span>\n              <span class=\"nightclub-trainee-status\">${status}</span>\n            </div>\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">å¹´é¾„ / æ¥æº</span>\n              <span class=\"nightclub-info-value\">${age}å² / ${origin}</span>\n            </div>\n            ${\n              appearance\n                ? `\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">åŸå§‹å¤–è²Œ</span>\n              <span class=\"nightclub-info-value\">${appearance}</span>\n            </div>`\n                : ''\n            }\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">åŸ¹å…»å¤©æ•°</span>\n              <span class=\"nightclub-info-value\">${days} å¤©</span>\n            </div>\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">åŸ¹å…»è¿›åº¦</span>\n              <span class=\"nightclub-info-value\">${progress}%</span>\n            </div>\n            <div class=\"nightclub-progress-bar\">\n              <div class=\"nightclub-progress-fill\" style=\"width: ${progress}%\"></div>\n            </div>\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">å¯¹åº”è®¢å•</span>\n              <span class=\"nightclub-info-value\">${order}</span>\n            </div>\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">ç›®æ ‡å½¢è±¡</span>\n              <span class=\"nightclub-info-value\">${target}</span>\n            </div>\n            ${\n              requirements\n                ? `\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">ç‰¹æ®Šè¦æ±‚</span>\n              <span class=\"nightclub-info-value\">${requirements}</span>\n            </div>`\n                : ''\n            }\n          </div>\n        `;\n      });\n\n      html += `\n        </div>\n      </div>\n    `;\n    }\n  }\n\n  return html;\n}\n\n// ==================== æ¸²æŸ“å·²å½’æ¡£é¡µé¢ ====================\nfunction renderArchivedPage(data: NightclubData): string {\n  let html = '';\n\n  if (data.å·²å½’æ¡£) {\n    const archived = data.å·²å½’æ¡£.æ¡£æ¡ˆåˆ—è¡¨ || [];\n\n    if (archived.length === 0) {\n      html += `\n          <div class=\"nightclub-empty\">\n            <div class=\"nightclub-empty-icon\">ğŸ“­</div>\n            <div class=\"nightclub-empty-text\">æš‚æ— å½’æ¡£è‰ºäºº</div>\n          </div>\n      `;\n    } else {\n      html += `\n        <div class=\"nightclub-card\">\n          <div class=\"nightclub-card-title\">\n            <span>ğŸ“</span>\n            <span>å·²å½’æ¡£ (${archived.length})</span>\n          </div>\n          <div class=\"nightclub-card-content\">\n      `;\n\n      archived.forEach(artist => {\n        const code = artist.ç¼–å· || '';\n        const name = artist.è‰ºå || 'æœªçŸ¥';\n        const type = artist.ç±»å‹ || 'æœªçŸ¥';\n        const age = artist.å¹´é¾„ || '';\n        const origin = artist.æ¥æº || '';\n        const features = artist.ç‰¹å¾ || '';\n        const currentStatus = artist.å½“å‰çŠ¶æ€ || '';\n        const evaluation = artist.è¯„ä»· || '';\n\n        html += `\n          <div class=\"nightclub-trainee-item\">\n            <div class=\"nightclub-trainee-header\">\n              <span class=\"nightclub-trainee-name\">${name}${code ? ` (${code})` : ''}</span>\n              <span class=\"nightclub-trainee-status\">${type}</span>\n            </div>\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">å¹´é¾„ / æ¥æº</span>\n              <span class=\"nightclub-info-value\">${age ? age + 'å²' : ''} ${age && origin ? '/' : ''} ${origin}</span>\n            </div>\n            ${\n              features\n                ? `\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">ç‰¹å¾</span>\n              <span class=\"nightclub-info-value\">${features}</span>\n            </div>`\n                : ''\n            }\n            ${\n              currentStatus\n                ? `\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">å½“å‰çŠ¶æ€</span>\n              <span class=\"nightclub-info-value\">${currentStatus}</span>\n            </div>`\n                : ''\n            }\n            ${\n              evaluation\n                ? `\n            <div class=\"nightclub-info-row\">\n              <span class=\"nightclub-info-label\">è¯„ä»·</span>\n              <span class=\"nightclub-info-value\">${evaluation}</span>\n            </div>`\n                : ''\n            }\n          </div>\n        `;\n      });\n\n      html += `\n          </div>\n          </div>\n        `;\n    }\n  }\n\n  return html;\n}\n\n// ==================== æ¸²æŸ“å¯¹è±¡ä¾¦æµ‹é¡µé¢ ====================\nfunction renderDetectionPage(data: NightclubData): string {\n  let html = '';\n\n  // è·å–å·²æœ‰çš„ä¾¦æµ‹æ•°æ®\n  const detectionData = data.ä¾¦æµ‹æ•°æ® || {};\n  const detectionCount = Object.keys(detectionData).length;\n\n  // è¾…åŠ©å‡½æ•°ï¼šå°† \\n è½¬æ¢ä¸º <br>\n  const formatDetectionText = (text: string): string => {\n    return text.replace(/\\\\n/g, '<br>').replace(/\\n/g, '<br>');\n  };\n\n  // æ”¶é›†æ‰€æœ‰å¯ä¾¦æµ‹çš„è§’è‰²\n  const availableTargets: Array<{ name: string; category: string; info: string }> = [];\n\n  // æ·»åŠ åŸ¹å…»å¯¹è±¡\n  if (data.å·¥åŠåŸ¹å…»å¯¹è±¡?.åŸ¹å…»åˆ—è¡¨) {\n    data.å·¥åŠåŸ¹å…»å¯¹è±¡.åŸ¹å…»åˆ—è¡¨.forEach(trainee => {\n      if (trainee.å§“å) {\n        availableTargets.push({\n          name: trainee.å§“å,\n          category: 'åŸ¹å…»å¯¹è±¡',\n          info: `ç¼–å·: ${trainee.ç¼–å· || 'æœªçŸ¥'} | åŸ¹å…»è¿›åº¦: ${trainee.åŸ¹å…»è¿›åº¦ || '0'}%`,\n        });\n      }\n    });\n  }\n\n  // æ·»åŠ å·²å½’æ¡£å¯¹è±¡\n  if (data.å·²å½’æ¡£?.æ¡£æ¡ˆåˆ—è¡¨) {\n    data.å·²å½’æ¡£.æ¡£æ¡ˆåˆ—è¡¨.forEach(artist => {\n      if (artist.è‰ºå) {\n        availableTargets.push({\n          name: artist.è‰ºå,\n          category: 'å·²å½’æ¡£',\n          info: `ç±»å‹: ${artist.ç±»å‹ || 'æœªçŸ¥'} | çŠ¶æ€: ${artist.å½“å‰çŠ¶æ€ || 'æœªçŸ¥'}`,\n        });\n      }\n    });\n  }\n\n  // æ·»åŠ äº‘èˆ’å’Œäº‘å·\n  availableTargets.push(\n    { name: 'äº‘èˆ’', category: 'ç®¡ç†å±‚', info: 'ä¼šæ‰€ç®¡ç†è€… | åœ°ä¸Šä¸šåŠ¡è´Ÿè´£äºº' },\n    { name: 'äº‘å·', category: 'ç®¡ç†å±‚', info: 'å·¥åŠç®¡ç†è€… | åœ°ä¸‹ä¸šåŠ¡è´Ÿè´£äºº' },\n  );\n\n  html += `\n    <div class=\"nightclub-card\">\n      <div class=\"nightclub-card-title\">\n        <span>ğŸ”</span>\n        <span>å¯¹è±¡ä¾¦æµ‹</span>\n        </div>\n      <div class=\"nightclub-card-content\">\n        <!-- å·²æœ‰ä¾¦æµ‹ç»“æœæ˜¾ç¤ºæ¡† -->\n        <div class=\"detection-results-display\">\n          <div class=\"detection-results-header\">\n            <span class=\"detection-results-title\">ğŸ“Š ä¾¦æµ‹ç»“æœ (${detectionCount})</span>\n          </div>\n          <div class=\"detection-results-content\">\n            ${\n              detectionCount === 0\n                ? `<div class=\"detection-results-empty\">æš‚æ— ä¾¦æµ‹æ•°æ®</div>`\n                : Object.entries(detectionData)\n                    .map(([name, detectionText]) => {\n                      const escapedName = name.replace(/'/g, \"\\\\'\");\n                      const formattedText = formatDetectionText(detectionText);\n                      return `\n                      <div class=\"detection-result-item\" data-detection-target=\"${escapedName}\">\n                        <div class=\"detection-result-header\">\n                          <span class=\"detection-result-name\">${name}</span>\n                          <span class=\"detection-result-toggle\">ç‚¹å‡»å±•å¼€/æ”¶èµ·</span>\n                        </div>\n                        <div class=\"detection-result-data\">\n                          <div class=\"detection-result-data-inner\">${formattedText}</div>\n                        </div>\n                      </div>\n                    `;\n                    })\n                    .join('')\n            }\n          </div>\n        </div>\n        \n        <!-- å½“å‰é€‰ä¸­å¯¹è±¡æ˜¾ç¤ºæ¡† -->\n        <div class=\"detection-current-display\">\n          <div class=\"detection-display-header\">\n            <span class=\"detection-display-title\">ğŸ“‹ å½“å‰é€‰ä¸­å¯¹è±¡ (${selectedDetectionTargets.size}/3)</span>\n            ${\n              selectedDetectionTargets.size > 0\n                ? `<button class=\"detection-clear-btn\" id=\"detection-clear-all\">æ¸…ç©º</button>`\n                : ''\n            }\n          </div>\n          <div class=\"detection-display-content\">\n            ${\n              selectedDetectionTargets.size === 0\n                ? `<div class=\"detection-display-empty\">æš‚æœªé€‰æ‹©ä»»ä½•å¯¹è±¡ï¼Œè¯·ä»ä¸‹æ–¹åˆ—è¡¨ä¸­é€‰æ‹©</div>`\n                : Array.from(selectedDetectionTargets)\n                    .map(targetName => {\n                      const target = availableTargets.find(t => t.name === targetName);\n                      if (!target) return '';\n                      return `\n                      <div class=\"detection-display-item\">\n                        <div class=\"detection-display-item-header\">\n                          <span class=\"detection-display-item-name\">${target.name}</span>\n                          <span class=\"detection-display-item-category\">${target.category}</span>\n                          <button class=\"detection-display-item-remove\" data-remove-target=\"${target.name}\">Ã—</button>\n                        </div>\n                        <div class=\"detection-display-item-info\">${target.info}</div>\n      </div>\n    `;\n                    })\n                    .join('')\n            }\n          </div>\n        </div>\n        \n        <div class=\"detection-description\">\n          ğŸ’¡ æç¤ºï¼šç‚¹å‡»ä¸‹æ–¹å¡ç‰‡é€‰æ‹©å¯¹è±¡ï¼ˆå»ºè®®3ä¸ªä»¥ä¸‹ï¼‰ï¼Œä¾¦æµ‹å°†åŒ…æ‹¬ï¼šæ•´ä½“æƒ…å†µã€ç¥æƒ…ã€å˜´éƒ¨ã€èƒ¸éƒ¨ã€ä¹³å¤´ã€ä¹³æ™•ã€å±è‚¡ã€å°ç©´ã€å±çœ¼ç­‰è¯¦ç»†æ•°æ®\n        </div>\n        \n        <div class=\"detection-targets-grid\">\n  `;\n\n  availableTargets.forEach(target => {\n    const isSelected = selectedDetectionTargets.has(target.name);\n    html += `\n      <div class=\"detection-target-item ${isSelected ? 'selected' : ''}\" data-target-name=\"${target.name}\">\n        <div class=\"detection-target-header\">\n          <span class=\"detection-target-name\">${target.name}</span>\n          <span class=\"detection-target-category\">${target.category}</span>\n        </div>\n        <div class=\"detection-target-info\">${target.info}</div>\n        <div class=\"detection-target-status\">${isSelected ? 'âœ“ å·²é€‰æ‹©' : 'ç‚¹å‡»é€‰æ‹©'}</div>\n      </div>\n    `;\n  });\n\n  html += `\n        </div>\n        \n        <div class=\"detection-actions\">\n          <button class=\"detection-action-btn\" id=\"detection-start-btn\" ${selectedDetectionTargets.size === 0 ? 'disabled' : ''}>\n            ğŸ” å¼€å§‹ä¾¦æµ‹\n          </button>\n          <button class=\"detection-action-btn detection-remove-btn\" id=\"detection-remove-btn\" ${selectedDetectionTargets.size === 0 ? 'disabled' : ''}>\n            ğŸ—‘ï¸ åˆ é™¤ä¾¦æµ‹æ•°æ®\n          </button>\n        </div>\n      </div>\n    </div>\n  `;\n\n  return html;\n}\n\n// ==================== åˆå§‹åŒ–ä¾¦æµ‹é¡µé¢äº‹ä»¶ ====================\nfunction initializeDetectionEvents(targetDoc: Document): void {\n  console.log('ğŸ”§ åˆå§‹åŒ–ä¾¦æµ‹é¡µé¢äº‹ä»¶ï¼Œå½“å‰é€‰ä¸­å¯¹è±¡:', selectedDetectionTargets);\n\n  // ä¾¦æµ‹ç»“æœå±•å¼€/æ”¶èµ·äº‹ä»¶\n  const resultItems = targetDoc.querySelectorAll('.detection-result-item');\n  resultItems.forEach(item => {\n    item.addEventListener('click', function (e) {\n      e.stopPropagation();\n      const dataElement = (this as HTMLElement).querySelector('.detection-result-data');\n      if (dataElement) {\n        dataElement.classList.toggle('expanded');\n      }\n    });\n  });\n\n  // ç›®æ ‡é€‰æ‹©äº‹ä»¶\n  const targetItems = targetDoc.querySelectorAll('.detection-target-item');\n  console.log('ğŸ¯ æ‰¾åˆ°ç›®æ ‡å¡ç‰‡æ•°é‡:', targetItems.length);\n  targetItems.forEach(item => {\n    item.addEventListener('click', function (e) {\n      e.stopPropagation();\n      const targetName = (this as HTMLElement).getAttribute('data-target-name');\n      console.log('ğŸ‘† ç‚¹å‡»äº†å¡ç‰‡:', targetName);\n      if (!targetName) return;\n\n      if (selectedDetectionTargets.has(targetName)) {\n        selectedDetectionTargets.delete(targetName);\n        console.log('â– å–æ¶ˆé€‰æ‹©:', targetName);\n      } else {\n        if (selectedDetectionTargets.size >= 3) {\n          alert('å»ºè®®æœ€å¤šé€‰æ‹©3ä¸ªå¯¹è±¡è¿›è¡Œä¾¦æµ‹');\n          return;\n        }\n        selectedDetectionTargets.add(targetName);\n        console.log('â• æ·»åŠ é€‰æ‹©:', targetName);\n      }\n\n      console.log('ğŸ“Š æ›´æ–°åçš„é€‰ä¸­å¯¹è±¡:', selectedDetectionTargets);\n      // é‡æ–°æ¸²æŸ“é¡µé¢\n      if (cachedMVUData) {\n        renderNightclubData(targetDoc, cachedMVUData);\n      }\n    });\n  });\n\n  // æ¸…ç©ºé€‰æ‹©æŒ‰é’®\n  const clearAllBtn = targetDoc.getElementById('detection-clear-all');\n  if (clearAllBtn) {\n    clearAllBtn.addEventListener('click', e => {\n      e.stopPropagation();\n      console.log('ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰é€‰æ‹©');\n      selectedDetectionTargets.clear();\n      if (cachedMVUData) {\n        renderNightclubData(targetDoc, cachedMVUData);\n      }\n    });\n  }\n\n  // ç§»é™¤å•ä¸ªå¯¹è±¡æŒ‰é’®\n  const removeButtons = targetDoc.querySelectorAll('.detection-display-item-remove');\n  removeButtons.forEach(btn => {\n    btn.addEventListener('click', function (e) {\n      e.stopPropagation();\n      const targetName = (this as HTMLElement).getAttribute('data-remove-target');\n      console.log('âŒ ç§»é™¤å•ä¸ªå¯¹è±¡:', targetName);\n      if (targetName && selectedDetectionTargets.has(targetName)) {\n        selectedDetectionTargets.delete(targetName);\n        if (cachedMVUData) {\n          renderNightclubData(targetDoc, cachedMVUData);\n        }\n      }\n    });\n  });\n\n  // å¼€å§‹ä¾¦æµ‹æŒ‰é’®\n  const startBtn = targetDoc.getElementById('detection-start-btn');\n  if (startBtn) {\n    startBtn.addEventListener('click', () => {\n      if (selectedDetectionTargets.size === 0) return;\n\n      const targets = Array.from(selectedDetectionTargets);\n      let command = `request: æœ¬å›åˆä¸è¦è¾“å‡ºæ­£æ–‡å†…å®¹ï¼ï¼ï¼\\n\\nå¯¹ä»¥ä¸‹å¯¹è±¡è¿›è¡Œè¯¦ç»†èº«ä½“æ•°æ®ä¾¦æµ‹ï¼š`;\n\n      targets.forEach((target, index) => {\n        command += `ã€${target}ã€‘`;\n        if (index < targets.length - 1) {\n          command += `ã€`;\n        }\n      });\n\n      command += `\\n\\nè¯·ä¾¦æµ‹ä»¥ä¸‹éƒ¨ä½ï¼ˆæ¯ä¸ªéƒ¨ä½æè¿°åç”¨æ¢è¡Œç¬¦åˆ†å‰²ï¼‰ï¼š1. æ•´ä½“æƒ…å†µ 2. ç¥æƒ… 3. å˜´éƒ¨ 4. èƒ¸éƒ¨ 5. ä¹³å¤´ 6. ä¹³æ™• 7. å±è‚¡ 8. å°ç©´ 9. å±çœ¼\\n\\n`;\n\n      targets.forEach((target, index) => {\n        command += `_.set('ä¾¦æµ‹æ•°æ®.${target}[0]', 'ä¾¦æµ‹æ•°æ®', 'æ•´ä½“æƒ…å†µï¼š...\\\\nç¥æƒ…ï¼š...\\\\nå˜´éƒ¨ï¼š...\\\\nèƒ¸éƒ¨ï¼š...\\\\nä¹³å¤´ï¼š...\\\\nä¹³æ™•ï¼š...\\\\nå±è‚¡ï¼š...\\\\nå°ç©´ï¼š...\\\\nå±çœ¼ï¼š...')`;\n        if (index < targets.length - 1) {\n          command += `\\n`;\n        }\n      });\n\n      fillCommand(command);\n    });\n  }\n\n  // åˆ é™¤ä¾¦æµ‹æ•°æ®æŒ‰é’®\n  const removeBtn = targetDoc.getElementById('detection-remove-btn');\n  if (removeBtn) {\n    removeBtn.addEventListener('click', () => {\n      if (selectedDetectionTargets.size === 0) return;\n\n      const targets = Array.from(selectedDetectionTargets);\n      let command = `åˆ é™¤ä»¥ä¸‹å¯¹è±¡çš„ä¾¦æµ‹æ•°æ®ï¼š\\n\\n`;\n\n      targets.forEach(target => {\n        command += `_.remove('ä¾¦æµ‹æ•°æ®', '${target}')\\n`;\n      });\n\n      fillCommand(command);\n\n      // æ¸…ç©ºé€‰æ‹©\n      selectedDetectionTargets.clear();\n      if (cachedMVUData) {\n        renderNightclubData(targetDoc, cachedMVUData);\n      }\n    });\n  }\n}\n\n// å¡«å……å‘½ä»¤åˆ°è¾“å…¥æ¡†\nfunction fillCommand(command: string): void {\n  try {\n    const chatInput = (parent.document || document).querySelector('#send_textarea') as HTMLTextAreaElement;\n    if (chatInput) {\n      if (chatInput.value.trim() !== '') {\n        chatInput.value += '\\n\\n' + command;\n      } else {\n        chatInput.value = command;\n      }\n      chatInput.focus();\n      console.log('âœ… å‘½ä»¤å·²å¡«å……åˆ°è¾“å…¥æ¡†');\n    } else {\n      throw new Error('æœªæ‰¾åˆ°è¾“å…¥æ¡†');\n    }\n  } catch (e) {\n    alert('æœªèƒ½è‡ªåŠ¨æ‰¾åˆ°è¾“å…¥æ¡†ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶å‘½ä»¤ï¼š\\n\\n' + command);\n    console.error('å¡«å……å‘½ä»¤å¤±è´¥:', e);\n  }\n}\n\n// ==================== å¯åŠ¨è„šæœ¬ ====================\n// ç­‰å¾… jQuery åŠ è½½å®Œæˆ\nfunction waitForJQuery(callback: () => void): void {\n  if (typeof jQuery !== 'undefined' || typeof $ !== 'undefined') {\n    console.log('âœ… jQuery å·²å°±ç»ª');\n    callback();\n  } else {\n    console.log('â³ ç­‰å¾… jQuery...');\n    setTimeout(() => waitForJQuery(callback), 100);\n  }\n}\n\n// ä½¿ç”¨ jQuery çš„æ–¹å¼åˆå§‹åŒ–ï¼ˆç¬¦åˆé¡¹ç›®è§„èŒƒï¼Œä¸ä½¿ç”¨ DOMContentLoadedï¼‰\nwaitForJQuery(() => {\n  $(() => {\n    console.log('âœ… å¼€å§‹åˆå§‹åŒ–æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ ');\n    initializeNightclubPlugin();\n  });\n});\n\nconsole.log('âœ… æ±Ÿç•”å¤œæ€»ä¼šçŠ¶æ€æ æ’ä»¶è„šæœ¬åŠ è½½å®Œæˆ');\n\n// å¯¼å‡ºä¸€ä¸ªå€¼ä»¥ä½¿å…¶æˆä¸ºåˆæ³•çš„ES Moduleï¼Œæ”¯æŒé€šè¿‡importè¯­å¥åŠ è½½\nexport const __initialized__ = true;\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","console","log","btnDragData","panelDragData","cachedMVUData","currentRetry","currentPage","selectedDetectionTargets","Set","safeGet","data","path","defaultValue","keys","split","current","String","initializeNightclubPlugin","targetDoc","window","top","document","e","warn","getElementById","remove","$","off","head","insertAdjacentHTML","body","btn","saved","localStorage","getItem","pos","JSON","parse","style","left","panel","$targetDoc","handleBtnDragStart","clientX","clientY","computedStyle","getComputedStyle","currentLeft","parseInt","currentTop","startX","startY","initialLeft","initialTop","hasDragged","handleBtnDragMove","deltaX","deltaY","Math","abs","classList","add","targetWindow","newLeft","newTop","maxX","width","maxY","height","max","min","handleBtnDragEnd","wasDragged","position","setItem","stringify","isActive","contains","loadNightclubData","togglePanel","on","preventDefault","stopPropagation","addEventListener","touch","touches","passive","originalEvent","changedTouches","initializeButtonDrag","closeBtn","tabs","querySelectorAll","forEach","tab","page","this","getAttribute","t","renderNightclubData","initializeTabSwitching","header","parentElement","test","navigator","userAgent","restorePanelPosition","innerWidth","innerHeight","transform","handlePanelDragStart","rect","getBoundingClientRect","handlePanelDragMove","panelWidth","offsetWidth","offsetHeight","viewportWidth","viewportHeight","handlePanelDragEnd","target","closest","initializePanelDrag","initializePanelSystem","async","Mvu","parent","Error","setTimeout","showError","mvuResult","getMvuData","type","message_id","stat_data","error","message","contentDiv","innerHTML","timeDisplay","dateText","timeText","statusText","locationText","textContent","ordersCount","length","traineesCount","archivedCount","detectionCount","workshopBadge","traineesBadge","archivedBadge","detectionBadge","html","renderClubPage","orders","order","orderNum","client","requirements","deadline","status","renderWorkshopPage","trainees","trainee","name","code","age","origin","appearance","days","progress","renderTraineesPage","archived","artist","features","currentStatus","evaluation","renderArchivedPage","detectionData","formatDetectionText","text","replace","availableTargets","push","category","info","entries","map","detectionText","join","size","Array","from","targetName","find","isSelected","has","renderDetectionPage","resultItems","item","dataElement","querySelector","toggle","targetItems","delete","alert","clearAllBtn","clear","removeButtons","startBtn","targets","command","index","fillCommand","removeBtn","initializeDetectionEvents","chatInput","value","trim","focus","waitForJQuery","callback","jQuery","__initialized__"],"sourceRoot":""}