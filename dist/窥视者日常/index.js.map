{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_62dd854fc8cec2d3d79a5c4a02e68bec/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/çª¥è§†è€…æ—¥å¸¸/store.ts","webpack://tavern_helper_template/./src/çª¥è§†è€…æ—¥å¸¸/MonitorModal.vue?9f18","webpack://tavern_helper_template/src/çª¥è§†è€…æ—¥å¸¸/MonitorModal.vue?e950","webpack://tavern_helper_template/./src/çª¥è§†è€…æ—¥å¸¸/App.vue?dc1b","webpack://tavern_helper_template/src/çª¥è§†è€…æ—¥å¸¸/App.vue?7144","src://tavern_helper_template/src/çª¥è§†è€…æ—¥å¸¸/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","// src/çª¥è§†è€…æ—¥å¸¸/store.ts\nimport { defineStore } from 'pinia';\nimport { ref } from 'vue'; // Removed watchEffect as we are not writing back\nimport { klona } from 'klona';\n\n// Define the structure of our game state based on å˜é‡åˆå§‹åŒ–_beta.xyaml\ninterface PeepGameData {\n    world: {\n        day: number;\n        time: string;\n        weekday: string;\n        weather: string;\n    };\n    player: {\n        money: number;\n        energy: number;\n        location: string;\n        mode: 'monitor' | 'stealth';\n    };\n    inventory: {\n        items: string[];\n        cameras: { [key: string]: { type: string; status: string } };\n    };\n    tenants: {\n        [key: string]: { // Key will be character_id like \"lin_xiaolu\"\n            name: string;\n            room: string; // Room number (e.g., \"201\")\n            is_home: boolean;\n            state: string;\n            params: {\n                consciousness: number;\n                alertness: number;\n                trust: number;\n                depravity: number;\n                body_sensitivity: number;\n                li_qiang_alertness?: number; // Optional: only for Wang Yan\n            };\n            flags: { [key: string]: any }; // Assuming flags can be dynamic key-value pairs\n        };\n    };\n}\n\nexport const useGameStore = defineStore('peepGame', () => {\n    // Initialize with a default empty state to match the interface structure\n    const gameState = ref<PeepGameData>({\n        world: { day: 0, time: '00:00', weekday: '', weather: '' },\n        player: { money: 0, energy: 0, location: '', mode: 'monitor' },\n        inventory: { items: [], cameras: {} },\n        tenants: {} // Empty tenants initially, will be populated on refresh\n    });\n\n    const refreshGameState = () => {\n        try {\n            let data: any = null;\n\n            // å°è¯•ä» MVU è·å–æœ€æ–°æ•°æ®\n            // @ts-ignore\n            if (typeof Mvu !== 'undefined') {\n                // @ts-ignore\n                const mvuResult = Mvu.getMvuData({\n                    type: 'message',\n                    message_id: 'latest',\n                });\n                data = mvuResult?.stat_data;\n            } \n            // å°è¯•ä»çˆ¶çª—å£ MVU è·å– (iframe ç¯å¢ƒ)\n            // @ts-ignore\n            else if (window.parent && typeof window.parent.Mvu !== 'undefined') {\n                // @ts-ignore\n                const mvuResult = window.parent.Mvu.getMvuData({\n                    type: 'message',\n                    message_id: 'latest',\n                });\n                data = mvuResult?.stat_data;\n            }\n            // å›é€€æ–¹æ¡ˆï¼šå°è¯•è¯»å–å…¨å±€å˜é‡\n            else {\n                 const globalVars = getVariables({ type: 'global' });\n                 data = globalVars?.stat_data;\n            }\n            \n            if (data) {\n                // === æ•°æ®æ¸…æ´—ï¼šä¿®å¤æ•£è½åœ¨ tenants ä¹‹å¤–çš„äººç‰©æ•°æ® ===\n                if (!data.tenants) data.tenants = {};\n                \n                Object.keys(data).forEach(key => {\n                    const val = data[key];\n                    // å¦‚æœæŸä¸ªå±æ€§æ˜¯å¯¹è±¡ï¼Œä¸”åŒ…å« 'room' å­—æ®µï¼Œä¸”ä¸åœ¨ tenants é‡Œ\n                    if (val && typeof val === 'object' && val.room && key !== 'tenants') {\n                        console.warn(`[çª¥è§†è€…æ—¥å¸¸] å‘ç°æ•£è½çš„äººç‰©æ•°æ®: ${key}ï¼Œæ­£åœ¨å°è¯•å½’ä½...`);\n                        data.tenants[key] = val;\n                        // å¯é€‰ï¼šåˆ é™¤åŸæ¥çš„æ•£è½æ•°æ®ï¼Œä¿æŒ stat_data æ•´æ´\n                        // delete data[key]; \n                    }\n                });\n                // ================================================\n\n                // Use klona for deep cloning to ensure reactivity and prevent\n                // direct mutation issues when assigning to gameState.value.\n                // Cast to PeepGameData to ensure type safety.\n                gameState.value = klona(data) as PeepGameData;\n                console.info('[çª¥è§†è€…æ—¥å¸¸] æ¸¸æˆçŠ¶æ€å·²åˆ·æ–°ã€‚');\n            } else {\n                console.warn('[çª¥è§†è€…æ—¥å¸¸] æœªèƒ½è·å–åˆ°æ¸¸æˆæ•°æ® (stat_data)ã€‚è¯·ç¡®ä¿ MVU å·²è¿è¡Œä¸”å˜é‡å·²åˆå§‹åŒ–ã€‚');\n            }\n        } catch (e) {\n            console.error('[çª¥è§†è€…æ—¥å¸¸] åˆ·æ–°æ¸¸æˆçŠ¶æ€æ—¶å‘ç”Ÿé”™è¯¯:', e);\n        }\n    };\n\n    // Perform an initial refresh when the store is created.\n    refreshGameState();\n\n    // Since initialization and updates are handled by other scripts,\n    // this store primarily acts as a reader. External mechanisms (e.g.,\n    // event listeners, polling) should call refreshGameState() to keep\n    // the UI updated when the underlying global variable changes.\n\n    return {\n        gameState,\n        refreshGameState, // Expose this method for external refresh triggers\n    };\n});","import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"modal-header\" };\nconst _hoisted_2 = { class: \"modal-title\" };\nconst _hoisted_3 = { class: \"modal-body\" };\nconst _hoisted_4 = { class: \"feed-overlay\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"rec-badge\"\n};\nconst _hoisted_6 = { class: \"time-stamp\" };\nconst _hoisted_7 = { class: \"feed-content\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"feed-live\"\n};\nconst _hoisted_9 = { class: \"state-large\" };\nconst _hoisted_10 = {\n    key: 1,\n    class: \"feed-offline\"\n};\nconst _hoisted_11 = {\n    key: 0,\n    class: \"data-panel\"\n};\nconst _hoisted_12 = { class: \"data-row\" };\nconst _hoisted_13 = { class: \"progress-bar\" };\nconst _hoisted_14 = { class: \"value\" };\nconst _hoisted_15 = { class: \"data-row\" };\nconst _hoisted_16 = { class: \"progress-bar\" };\nconst _hoisted_17 = { class: \"value\" };\nconst _hoisted_18 = {\n    key: 0,\n    class: \"data-row\"\n};\nconst _hoisted_19 = { class: \"progress-bar\" };\nconst _hoisted_20 = { class: \"value\" };\nconst _hoisted_21 = { class: \"action-panel\" };\nconst _hoisted_22 = [\"disabled\"];\nimport { computed, onMounted, onUnmounted, ref, nextTick } from 'vue';\nimport { useGameStore } from './store';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MonitorModal',\n    props: {\n        tenant: {}\n    },\n    emits: ['close'],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const store = useGameStore();\n        const modalContentRef = ref(null);\n        const currentTime = computed(() => store.gameState.world.time);\n        const getConsciousnessColor = (val) => {\n            if (val < 30)\n                return '#ff00ff'; // æ˜è¿· (ç´«è‰²)\n            if (val < 60)\n                return '#ffff00'; // å›°å€¦ (é»„è‰²)\n            return '#00ff00'; // æ¸…é†’ (ç»¿è‰²)\n        };\n        const triggerAction = (action) => {\n            console.log(`è§¦å‘åŠ¨ä½œ: ${action} ç›®æ ‡: ${props.tenant.name}`);\n            // TODO: å‘é€ slash æŒ‡ä»¤\n        };\n        onMounted(async () => {\n            await nextTick();\n            if (modalContentRef.value) {\n                const modalHeight = modalContentRef.value.offsetHeight;\n                console.log('[MonitorModal] Modal content height:', modalHeight);\n                if (typeof setIframeHeight === 'function') {\n                    setIframeHeight(modalHeight + 40);\n                    console.log('[MonitorModal] Adjusted iframe height to:', modalHeight + 40);\n                }\n                else {\n                    console.warn('[MonitorModal] setIframeHeight function not found globally.');\n                }\n            }\n        });\n        onUnmounted(() => {\n            if (typeof setIframeHeight === 'function') {\n                setIframeHeight();\n                console.log('[MonitorModal] Reset iframe height.');\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"monitor-modal-overlay\",\n                onClick: _cache[3] || (_cache[3] = _withModifiers(($event) => (_ctx.$emit('close')), [\"self\"]))\n            }, [\n                _createElementVNode(\"div\", {\n                    class: \"monitor-modal\",\n                    ref_key: \"modalContentRef\",\n                    ref: modalContentRef\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createElementVNode(\"span\", _hoisted_2, \"CAM-\" + _toDisplayString(__props.tenant.room) + \" : \" + _toDisplayString(__props.tenant.name), 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"close-btn\",\n                            onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('close')))\n                        }, \"Ã—\")\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createCommentVNode(\" æ¨¡æ‹Ÿç›‘æ§ç”»é¢ \"),\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"video-feed\", { 'offline': !__props.tenant.is_home }])\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                (__props.tenant.is_home)\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \"â— REC\"))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createElementVNode(\"span\", _hoisted_6, _toDisplayString(currentTime.value), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                (__props.tenant.is_home)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"scan-line\" }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"p\", _hoisted_9, _toDisplayString(__props.tenant.state), 1 /* TEXT */)\n                                    ]))\n                                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, \" NO SIGNAL \"))\n                            ])\n                        ], 2 /* CLASS */),\n                        _createCommentVNode(\" æ•°æ®é¢æ¿ \"),\n                        (__props.tenant.is_home)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                _createElementVNode(\"div\", _hoisted_12, [\n                                    _cache[5] || (_cache[5] = _createElementVNode(\"label\", null, \"æ„è¯† (Consciousness)\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_13, [\n                                        _createElementVNode(\"div\", {\n                                            class: \"fill\",\n                                            style: _normalizeStyle({ width: __props.tenant.params.consciousness + '%', background: getConsciousnessColor(__props.tenant.params.consciousness) })\n                                        }, null, 4 /* STYLE */),\n                                        _createElementVNode(\"span\", _hoisted_14, _toDisplayString(__props.tenant.params.consciousness) + \"%\", 1 /* TEXT */)\n                                    ])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_15, [\n                                    _cache[6] || (_cache[6] = _createElementVNode(\"label\", null, \"è­¦æƒ• (Alertness)\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_16, [\n                                        _createElementVNode(\"div\", {\n                                            class: \"fill alert\",\n                                            style: _normalizeStyle({ width: __props.tenant.params.alertness + '%' })\n                                        }, null, 4 /* STYLE */),\n                                        _createElementVNode(\"span\", _hoisted_17, _toDisplayString(__props.tenant.params.alertness) + \"%\", 1 /* TEXT */)\n                                    ])\n                                ]),\n                                (__props.tenant.params.li_qiang_alertness !== undefined)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                                        _cache[7] || (_cache[7] = _createElementVNode(\"label\", { class: \"danger-text\" }, \"âš  æå¼ºè­¦æƒ•åº¦\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_19, [\n                                            _createElementVNode(\"div\", {\n                                                class: \"fill danger\",\n                                                style: _normalizeStyle({ width: __props.tenant.params.li_qiang_alertness + '%' })\n                                            }, null, 4 /* STYLE */),\n                                            _createElementVNode(\"span\", _hoisted_20, _toDisplayString(__props.tenant.params.li_qiang_alertness) + \"%\", 1 /* TEXT */)\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" æ“ä½œæŒ‰é’® \"),\n                        _createElementVNode(\"div\", _hoisted_21, [\n                            _createElementVNode(\"button\", {\n                                class: \"action-btn stealth\",\n                                disabled: !__props.tenant.is_home,\n                                onClick: _cache[1] || (_cache[1] = ($event) => (triggerAction('stealth')))\n                            }, \" ğŸ‘» æ½œå…¥ \", 8 /* PROPS */, _hoisted_22),\n                            _createElementVNode(\"button\", {\n                                class: \"action-btn\",\n                                onClick: _cache[2] || (_cache[2] = ($event) => (triggerAction('hack')))\n                            }, \" ğŸ’» é»‘å…¥è®¾å¤‡ \")\n                        ])\n                    ])\n                ], 512 /* NEED_PATCH */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MonitorModal.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MonitorModal.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MonitorModal.vue?vue&type=style&index=0&id=3f2ff97c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_62dd854fc8cec2d3d79a5c4a02e68bec/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3f2ff97c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"peep-terminal\" };\nconst _hoisted_2 = { class: \"terminal-header\" };\nconst _hoisted_3 = { class: \"time-display\" };\nconst _hoisted_4 = { class: \"resource-display\" };\nconst _hoisted_5 = { class: \"tenant-list\" };\nconst _hoisted_6 = { class: \"list-body\" };\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = { class: \"cell-room\" };\nconst _hoisted_9 = { class: \"cell-name\" };\nconst _hoisted_10 = { class: \"cell-status\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"cell-risk\"\n};\nimport { ref } from 'vue';\nimport { useGameStore } from './store';\nimport { storeToRefs } from 'pinia';\nimport MonitorModal from './MonitorModal.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const store = useGameStore();\n        const { gameState } = storeToRefs(store);\n        const selectedTenant = ref(null);\n        const openMonitor = (tenant) => {\n            selectedTenant.value = tenant;\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Header \"),\n                _createElementVNode(\"header\", _hoisted_2, [\n                    _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"status-indicator\" }, \"ğŸ”´ LIVE\", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_unref(gameState).world.time) + \" \" + _toDisplayString(_unref(gameState).world.weekday), 1 /* TEXT */),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _createElementVNode(\"span\", null, \"ğŸ’° \" + _toDisplayString(_unref(gameState).player.money), 1 /* TEXT */),\n                        _createElementVNode(\"span\", null, \"âš¡ \" + _toDisplayString(_unref(gameState).player.energy), 1 /* TEXT */)\n                    ])\n                ]),\n                _createCommentVNode(\" Tenant List \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"list-header\" }, [\n                        _createElementVNode(\"span\", null, \"ROOM\"),\n                        _createElementVNode(\"span\", null, \"TARGET\"),\n                        _createElementVNode(\"span\", null, \"STATUS\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(gameState).tenants, (tenant, charId) => {\n                            return (_openBlock(), _createElementBlock(_Fragment, { key: charId }, [\n                                (charId !== '$meta' && tenant.name)\n                                    ? (_openBlock(), _createElementBlock(\"div\", {\n                                        key: 0,\n                                        class: _normalizeClass([\"tenant-row\", { 'offline': !tenant.is_home }]),\n                                        onClick: ($event) => (openMonitor(tenant))\n                                    }, [\n                                        _createElementVNode(\"span\", _hoisted_8, _toDisplayString(tenant.room), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_9, _toDisplayString(tenant.name), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_10, [\n                                            _createElementVNode(\"span\", {\n                                                class: _normalizeClass([\"dot\", { 'online': tenant.is_home }])\n                                            }, \"â—\", 2 /* CLASS */),\n                                            _createTextVNode(\" \" + _toDisplayString(tenant.is_home ? tenant.state : 'OFFLINE'), 1 /* TEXT */)\n                                        ]),\n                                        (tenant.is_home)\n                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, [\n                                                _createCommentVNode(\" ç®€å•çš„è­¦æƒ•åº¦æŒ‡ç¤ºå™¨ \"),\n                                                _createElementVNode(\"span\", {\n                                                    class: \"risk-bar\",\n                                                    style: _normalizeStyle({ width: (tenant.params.alertness / 2) + 'px', background: tenant.params.alertness > 50 ? 'red' : 'orange' })\n                                                }, null, 4 /* STYLE */)\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_7))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 64 /* STABLE_FRAGMENT */));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ])\n                ]),\n                _createCommentVNode(\" Footer Hint \"),\n                _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"terminal-footer\" }, \" >> é€‰æ‹©ç›®æ ‡æŸ¥çœ‹è¯¦ç»†ç›‘æ§ \", -1 /* CACHED */)),\n                _createCommentVNode(\" Modal \"),\n                (selectedTenant.value)\n                    ? (_openBlock(), _createBlock(MonitorModal, {\n                        key: 0,\n                        tenant: selectedTenant.value,\n                        onClose: _cache[0] || (_cache[0] = ($event) => (selectedTenant.value = null))\n                    }, null, 8 /* PROPS */, [\"tenant\"]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=5a24e2e6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_62dd854fc8cec2d3d79a5c4a02e68bec/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5a24e2e6\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport { createPinia } from 'pinia';\nimport App from './App.vue';\nimport { useGameStore } from './store';\nimport './style.scss'; // å¼•å…¥å…¨å±€æ ·å¼\n\n$(() => {\n    // ç¡®ä¿ DOM å‡†å¤‡å°±ç»ª\n    const mountPoint = document.getElementById('peep-app');\n    if (mountPoint) {\n        const app = createApp(App);\n        const pinia = createPinia();\n        app.use(pinia);\n        app.mount(mountPoint);\n        console.info('[çª¥è§†è€…æ—¥å¸¸] Vueåº”ç”¨å·²æŒ‚è½½');\n\n        // è·å– store å®ä¾‹\n        const gameStore = useGameStore(pinia);\n\n        // è®¾ç½®å®šæ—¶å™¨ï¼Œæ¯ç§’åˆ·æ–°ä¸€æ¬¡æ¸¸æˆçŠ¶æ€ï¼Œä»¥ä¿æŒUIä¸åç«¯å˜é‡åŒæ­¥\n        // å®é™…æ¸¸æˆä¸­ï¼Œå¯ä»¥è°ƒæ•´åˆ·æ–°é¢‘ç‡æˆ–æ ¹æ®MVUäº‹ä»¶è§¦å‘åˆ·æ–°\n        setInterval(() => {\n            gameStore.refreshGameState();\n        }, 1000); // æ¯1ç§’åˆ·æ–°ä¸€æ¬¡\n        \n    } else {\n        console.error('[çª¥è§†è€…æ—¥å¸¸] æœªæ‰¾åˆ°æŒ‚è½½ç‚¹ #peep-app');\n    }\n});"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","useGameStore","gameState","ref","world","day","time","weekday","weather","player","money","energy","location","mode","inventory","items","cameras","tenants","refreshGameState","data","Mvu","mvuResult","getMvuData","type","message_id","stat_data","window","parent","globalVars","getVariables","Object","keys","forEach","room","console","warn","value","info","e","error","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","__name","tenant","emits","setup","__props","emit","__emit","store","modalContentRef","currentTime","computed","triggerAction","action","log","name","onMounted","async","nextTick","modalHeight","offsetHeight","setIframeHeight","onUnmounted","_ctx","_cache","onClick","$event","$emit","ref_key","is_home","state","style","width","params","consciousness","background","alertness","undefined","li_qiang_alertness","disabled","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","selectedTenant","charId","MonitorModal","onClose","$","mountPoint","document","getElementById","app","createApp","App","pinia","use","mount","gameStore","setInterval"],"ignoreList":[],"sourceRoot":""}