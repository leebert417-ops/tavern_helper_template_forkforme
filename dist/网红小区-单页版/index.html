<!doctype html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><script type="module">import{createPinia as e,defineStore as t}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';import{klona as a}from'https://testingcf.jsdelivr.net/npm/klona/lite/+esm';var n={42:(e,t)=>{t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a}}},l={};function o(e){var t=l[e];if(void 0!==t)return t.exports;var a=l[e]={exports:{}};return n[e](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const c=Vue,s={年份:'2025年',日期:'10月28日',星期:'星期二',时间:'08:00',地点:'东海市·荟萃城'},i={楼层配置:{三楼:{显示名称:'三楼',顺序:3},二楼:{显示名称:'二楼',顺序:2},一楼:{显示名称:'一楼',顺序:1}},房间列表:{101:{类型:'公共客厅',名称:'101',描述:'公共客厅，配备会客区和用餐区，免费对所有租客开放',布局:{楼层:'一楼',位置:'A区'},功能区:'会客区、用餐区'},102:{类型:'公共客厅',名称:'102',描述:'公共客厅，配备休息区和娱乐区，免费对所有租客开放',布局:{楼层:'一楼',位置:'B区'},功能区:'休息区、娱乐区'},103:{类型:'健身房',名称:'103',描述:'公共健身房，配备健身设备和瑜伽区，免费对所有租客开放',布局:{楼层:'一楼',位置:'C区'},功能区:'健身设备区、瑜伽区'},104:{类型:'健身房',名称:'104',描述:'公共健身房舞蹈区和洗衣间，免费对所有租客开放',布局:{楼层:'一楼',位置:'D区'},功能区:'舞蹈区、洗衣设备'},201:{类型:'套间',名称:'201',住户:'未知',描述:'一室一厅一卫一厨，35-50㎡个人公寓',布局:{楼层:'二楼',位置:'A区'}},202:{类型:'套间',名称:'202',住户:'未知',描述:'一室一厅一卫一厨，35-50㎡个人公寓',布局:{楼层:'二楼',位置:'B区'}},203:{类型:'您的房间',名称:'203',住户:'<user>',描述:'一室一厅一卫一厨，房东自住公寓',布局:{楼层:'二楼',位置:'C区'}},204:{类型:'洗衣间',名称:'204',描述:'公共洗衣间，配备洗衣机和烘干机，免费对所有租客开放',布局:{楼层:'二楼',位置:'D区'},功能区:'洗衣设备、烘干设备'},301:{类型:'套间',名称:'301',住户:'未知',描述:'一室一厅一卫一厨，35-50㎡个人公寓',布局:{楼层:'三楼',位置:'A区'}},302:{类型:'套间',名称:'302',住户:'未知',描述:'一室一厅一卫一厨，35-50㎡个人公寓',布局:{楼层:'三楼',位置:'B区'}},303:{类型:'套间',名称:'303',住户:'未知',描述:'一室一厅一卫一厨，35-50㎡个人公寓',布局:{楼层:'三楼',位置:'C区'}},304:{类型:'洗衣间',名称:'304',描述:'公共洗衣间，配备洗衣机和烘干机，免费对所有租客开放',布局:{楼层:'三楼',位置:'D区'},功能区:'洗衣设备、烘干设备'}}},r={林悦:{年龄:24,外貌:'清秀甜美的面容，身材苗条，腰细腿长。留着齐肩的黑色短发，皮肤白皙，眼神清澈明亮。胸部B罩杯，臀部紧致有型。',职业:'舞蹈博主',性格:'开朗、活泼、自律、热爱生活',恋情:'单身',内心:'想通过努力成为知名舞蹈博主',状态:'刚刚起床，正在洗漱',穿搭:'粉色运动背心和黑色瑜伽裤',好感度:50,性欲:20,入住日期:'10月1日',入住天数:27,当前位置:'201',创作内容:'舞蹈教学视频、日常跳舞vlog',关系:{'<user>':'房东'},schedule:[{startTime:'06:00',endTime:'08:00',location:'201',activity:'起床、洗漱、准备'},{startTime:'08:00',endTime:'09:00',location:'101',activity:'早餐'},{startTime:'09:00',endTime:'11:00',location:'104',activity:'舞蹈练习'},{startTime:'11:00',endTime:'13:00',location:'201',activity:'休息、拍摄视频'},{startTime:'13:00',endTime:'14:00',location:'101',activity:'午餐'},{startTime:'14:00',endTime:'17:00',location:'201',activity:'剪辑视频、直播'},{startTime:'17:00',endTime:'19:00',location:'104',activity:'晚间舞蹈练习'},{startTime:'19:00',endTime:'20:00',location:'101',activity:'晚餐'},{startTime:'20:00',endTime:'22:00',location:'102',activity:'放松娱乐'},{startTime:'22:00',endTime:'06:00',location:'201',activity:'洗澡、睡觉'}]},苏婉:{年龄:26,外貌:'成熟知性的气质，身材高挑匀称，长发披肩。五官精致，眼神温柔。胸部C罩杯，体态优雅。',职业:'健身博主',性格:'自律、友善、专业、温和',恋情:'单身',内心:'希望帮助更多人建立健康的生活方式',状态:'正在健身房进行晨练',穿搭:'黑色运动紧身衣和灰色运动短裤',好感度:50,性欲:15,入住日期:'10月5日',入住天数:23,当前位置:'103',创作内容:'健身教程、营养指导、身材管理',关系:{'<user>':'房东'},schedule:[{startTime:'05:30',endTime:'07:00',location:'103',activity:'晨练'},{startTime:'07:00',endTime:'08:00',location:'302',activity:'洗澡、准备'},{startTime:'08:00',endTime:'09:00',location:'101',activity:'健康早餐'},{startTime:'09:00',endTime:'12:00',location:'302',activity:'拍摄健身教程'},{startTime:'12:00',endTime:'13:00',location:'101',activity:'午餐'},{startTime:'13:00',endTime:'15:00',location:'302',activity:'休息、剪辑视频'},{startTime:'15:00',endTime:'17:00',location:'103',activity:'下午训练课'},{startTime:'17:00',endTime:'18:00',location:'302',activity:'洗澡、整理'},{startTime:'18:00',endTime:'19:00',location:'101',activity:'晚餐'},{startTime:'19:00',endTime:'21:00',location:'302',activity:'直播、互动'},{startTime:'21:00',endTime:'22:00',location:'102',activity:'放松、社交'},{startTime:'22:00',endTime:'05:30',location:'302',activity:'睡眠'}]}};function d(e){const[t,a]=e.split(':').map(Number);return 60*t+a}function m(e,t){return function(e){const t=e%1440,a=t%60;return`${Math.floor(t/60).toString().padStart(2,'0')}:${a.toString().padStart(2,'0')}`}(d(e)+60*t)}function u(e,t,a){const n=d(e),l=d(t);let o=d(a);return o<=l&&(o+=1440,n<l)?n<=o-1440:n>=l&&n<o}function p(e,t){for(const a of t)if(u(e,a.startTime,a.endTime))return a.location;return null}const v=t('game',()=>{const e=(0,c.ref)(s),t=(0,c.ref)(i),n=(0,c.ref)(r),l=(0,c.ref)({currentLocation:'203',inventory:[]}),o=(0,c.ref)([]),d=(0,c.ref)(!1);let N=(0,c.ref)(0);function V(t,a){o.value.push({id:N.value++,type:t,text:a,timestamp:e.value.时间})}return{world:e,apartments:t,tenants:n,player:l,narrativeLog:(0,c.readonly)(o),isLoading:(0,c.readonly)(d),advanceTime:function(t){if(d.value)return;console.log(`推進時間 ${t} 小時...`);const a=e.value.时间,l=m(a,t);e.value.时间=l,V('system',`時間推進了 ${t} 小時, 現在是 ${l}。`),console.log(`時間從 ${a} 推進到 ${l}`);for(const[e,t]of Object.entries(n.value)){const a=p(l,t.schedule);if(a&&a!==t.当前位置){const n=t.当前位置;t.当前位置=a,console.log(`${e} 從 ${n} 移動到 ${a}`),V('system',`${e} 從 ${n} 移動到了 ${a}。`);const o=t.schedule.find(e=>u(l,e.startTime,e.endTime));o&&o.activity&&(t.状态=o.activity)}else a&&console.log(`${e} 仍在 ${a}`)}},moveToRoom:function(e){if(d.value)return;if(l.value.currentLocation===e)return;l.value.currentLocation=e,V('action',`你移動到了 ${e} (${t.value.房间列表[e].类型})。`),console.log(`移動到房間: ${e}`)},interactWithTenant:async function(o){if(d.value)console.warn('正在等待上一個互動完成...');else{d.value=!0,console.log(`[Phase 5] 開始與 ${o} 互動...`);try{const c=n.value[o],s=t.value.房间列表[l.value.currentLocation];await waitGlobalInitialized('Mvu');const i={stat_data:a(v().$state),display_data:{},delta_data:{},initialized_lorebooks:[]},r=`你正在扮演一个模拟经营游戏的叙事引擎。玩家是一位公寓房东，正在与租客互动。\n\n[当前游戏状态]\n时间: ${e.value.时间}\n地点: ${l.value.currentLocation} (${s.类型})\n房东正在与 ${o} 互动\n\n[租客 ${o} 的信息]\n职业: ${c.职业}\n性格: ${c.性格}\n当前状态: ${c.状态}\n好感度: ${c.好感度}/100\n当前位置: ${c.当前位置}\n\n[互动规则]\n1. 好感度变化：\n   - 普通友好互动：+3 到 +5\n   - 深入交谈、帮助租客：+5 到 +10\n   - 送礼物、完成请求：+8 到 +15\n   - 冷淡、拒绝：-3 到 -8\n\n2. 状态更新：反映租客当前正在做的事情\n\n3. 记忆添加：仅在重要或有意义的互动后添加（10-20字）\n\n[任务]\n生成一段简短的互动叙事（50-100字），描述房东与 ${o} 的对话或互动场景。\n然后使用 MVU 指令更新游戏状态。\n\n[输出格式]\n叙事文本...\n\n<UpdateVariable>\n  <Analysis>\n    tenants.${o}.好感度: Yes/No\n    tenants.${o}.状态: Yes/No\n    tenants.${o}.记忆: Yes/No\n  </Analysis>\n  _.add('tenants.${o}.好感度', X); // 原因\n  _.set('tenants.${o}.状态', '旧状态', '新状态'); // 原因\n  _.insert('tenants.${o}.记忆', '记忆内容'); // 原因\n</UpdateVariable>\n\n请开始生成：`;V('action',`你开始与 ${o} 互动...`),console.log('[Phase 5] 调用 generate()...');const d=await generate(r,{max_tokens:400,temperature:.8});console.log('[Phase 5] 收到 LLM 回应:',d);const m=/<UpdateVariable>[\s\S]*?<\/UpdateVariable>/g,u=d.replace(m,'').trim();u&&V('dialogue',u);const p=await Mvu.parseMessage(d,i);if(p&&p.stat_data){if(console.log('[Phase 5] Mvu.parseMessage 解析成功，正在更新 Pinia 状态...'),v().$patch(p.stat_data),p.delta_data&&Object.keys(p.delta_data).length>0)for(const[e,t]of Object.entries(p.delta_data)){V('event',`📊 ${e.replace('tenants.','').replace('.好感度',' 的好感度').replace('.状态',' 的状态').replace('.记忆',' 的记忆')}: ${t}`)}}else console.warn('[Phase 5] Mvu.parseMessage 未返回新状态或未解析到指令。'),V('system','(未检测到状态变化)')}catch(e){console.error('[Phase 5] 互动时发生错误:',e),V('system',`❌ 互动处理失败: ${e?.message||'未知错误'}`)}finally{d.value=!1,console.log('[Phase 5] 互动结束。')}}},clearNarrativeLog:function(){o.value=[],V('system','歡迎來到網紅小區。')},addNarrativeMessage:V}}),N={class:'action-panel apt-card'},V={class:'apt-card-title'},E={key:0,class:'loading-indicator'},y={class:'apt-card-body custom-scrollbar'},f={class:'action-section'},k={class:'button-grid'},b=['disabled'],g=['disabled'],B=['disabled'],C=['disabled'],h=(0,c.defineComponent)({__name:'ActionPanel',setup(e){const t=v();function a(e){t.advanceTime(e)}return(e,n)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',N,[(0,c.createElementVNode)('div',V,[n[4]||(n[4]=(0,c.createElementVNode)('span',null,'🎮',-1)),n[5]||(n[5]=(0,c.createElementVNode)('span',null,'行动面板',-1)),(0,c.unref)(t).isLoading?((0,c.openBlock)(),(0,c.createElementBlock)('span',E,' (处理中...) ')):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createElementVNode)('div',y,[(0,c.createElementVNode)('div',f,[n[10]||(n[10]=(0,c.createElementVNode)('div',{class:'section-title'},'⏳ 时间控制',-1)),(0,c.createElementVNode)('div',k,[(0,c.createElementVNode)('button',{class:'apt-btn',onClick:n[0]||(n[0]=e=>a(1)),disabled:(0,c.unref)(t).isLoading},[...n[6]||(n[6]=[(0,c.createElementVNode)('span',{class:'btn-icon'},'⏩',-1),(0,c.createElementVNode)('span',null,'推进 1 小时',-1)])],8,b),(0,c.createElementVNode)('button',{class:'apt-btn',onClick:n[1]||(n[1]=e=>a(2)),disabled:(0,c.unref)(t).isLoading},[...n[7]||(n[7]=[(0,c.createElementVNode)('span',{class:'btn-icon'},'⏩⏩',-1),(0,c.createElementVNode)('span',null,'推进 2 小时',-1)])],8,g),(0,c.createElementVNode)('button',{class:'apt-btn',onClick:n[2]||(n[2]=e=>a(6)),disabled:(0,c.unref)(t).isLoading},[...n[8]||(n[8]=[(0,c.createElementVNode)('span',{class:'btn-icon'},'⏰',-1),(0,c.createElementVNode)('span',null,'推进 6 小时',-1)])],8,B),(0,c.createElementVNode)('button',{class:'apt-btn apt-btn-secondary',onClick:n[3]||(n[3]=e=>a(12)),disabled:(0,c.unref)(t).isLoading},[...n[9]||(n[9]=[(0,c.createElementVNode)('span',{class:'btn-icon'},'🌙',-1),(0,c.createElementVNode)('span',null,'推进 12 小时',-1)])],8,C)])])])]))}});var T=o(42);const S=(0,T.A)(h,[['__scopeId','data-v-28591e35']]),D={class:'inventory-page apt-card'},w={class:'apt-card-title'},L={class:'subtitle'},M={class:'apt-card-body custom-scrollbar'},A={key:0,class:'empty-inventory'},I={key:1,class:'items-grid'},x=['onClick'],j={class:'item-icon'},O={class:'item-info'},P={class:'item-name'},q={class:'item-type'},F={key:0,class:'item-quantity'},U={class:'detail-panel'},R={class:'detail-header'},W={class:'detail-title'},Y={class:'detail-icon'},G={class:'detail-body custom-scrollbar'},H={class:'item-details'},X={class:'detail-section'},J={class:'info-grid'},K={class:'info-item'},Q={class:'info-value'},Z={key:0,class:'info-item'},ee={class:'info-value highlight'},te={key:0,class:'detail-section'},ae={class:'item-description'},ne={key:1,class:'detail-section'},le={class:'item-effect'},oe={class:'detail-footer'},ce=['disabled'],se=(0,c.defineComponent)({__name:'InventoryPage',setup(e){const t=v(),a=(0,c.ref)(null),n=(0,c.ref)(-1),l=(0,c.computed)(()=>t.player.inventory?.reduce((e,t)=>e+(t.quantity||1),0)||0);function o(){a.value=null,n.value=-1}function s(e){return{食物:'🍱',饮料:'🥤',礼物:'🎁',工具:'🔧',钥匙:'🔑',书籍:'📚',装饰:'🎨',电子产品:'📱',化妆品:'💄',衣物:'👔',药品:'💊',其他:'📦'}[e]||'📦'}function i(e){return!1!==e.usable}function r(){a.value&&i(a.value)&&(alert(`使用了 ${a.value.name}！\n功能开发中...`),a.value.quantity&&a.value.quantity>1?a.value.quantity--:n.value>=0&&t.player.inventory.splice(n.value,1),o())}return(e,d)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',D,[(0,c.createElementVNode)('div',w,[d[0]||(d[0]=(0,c.createElementVNode)('span',null,'🎒',-1)),d[1]||(d[1]=(0,c.createElementVNode)('span',null,'背包',-1)),(0,c.createElementVNode)('span',L,(0,c.toDisplayString)(l.value)+' 件道具',1)]),(0,c.createElementVNode)('div',M,[0===l.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',A,[...d[2]||(d[2]=[(0,c.createElementVNode)('div',{class:'empty-icon'},'📦',-1),(0,c.createElementVNode)('div',{class:'empty-text'},'背包空空如也',-1),(0,c.createElementVNode)('div',{class:'empty-hint'},'探索公寓，收集道具吧！',-1)])])):((0,c.openBlock)(),(0,c.createElementBlock)('div',I,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(t).player.inventory,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t,class:'item-card',onClick:l=>function(e,t){a.value=e,n.value=t}(e,t)},[(0,c.createCommentVNode)(' 道具图标 '),(0,c.createElementVNode)('div',j,[(0,c.createElementVNode)('span',null,(0,c.toDisplayString)(s(e.type)),1)]),(0,c.createCommentVNode)(' 道具信息 '),(0,c.createElementVNode)('div',O,[(0,c.createElementVNode)('div',P,(0,c.toDisplayString)(e.name),1),(0,c.createElementVNode)('div',q,(0,c.toDisplayString)(e.type),1)]),(0,c.createCommentVNode)(' 道具数量 '),e.quantity&&e.quantity>1?((0,c.openBlock)(),(0,c.createElementBlock)('div',F,' ×'+(0,c.toDisplayString)(e.quantity),1)):(0,c.createCommentVNode)('v-if',!0)],8,x))),128))]))]),(0,c.createCommentVNode)(' 道具详情弹窗 '),a.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:0,class:'detail-overlay',onClick:(0,c.withModifiers)(o,['self'])},[(0,c.createElementVNode)('div',U,[(0,c.createElementVNode)('div',R,[(0,c.createElementVNode)('h2',W,[(0,c.createElementVNode)('span',Y,(0,c.toDisplayString)(s(a.value.type)),1),(0,c.createTextVNode)(' '+(0,c.toDisplayString)(a.value.name),1)]),(0,c.createElementVNode)('button',{class:'close-btn',onClick:o},'✕')]),(0,c.createElementVNode)('div',G,[(0,c.createElementVNode)('div',H,[(0,c.createCommentVNode)(' 基础信息 '),(0,c.createElementVNode)('div',X,[d[5]||(d[5]=(0,c.createElementVNode)('h3',{class:'section-title'},'📋 基础信息',-1)),(0,c.createElementVNode)('div',J,[(0,c.createElementVNode)('div',K,[d[3]||(d[3]=(0,c.createElementVNode)('span',{class:'info-label'},'类型：',-1)),(0,c.createElementVNode)('span',Q,(0,c.toDisplayString)(a.value.type),1)]),a.value.quantity&&a.value.quantity>1?((0,c.openBlock)(),(0,c.createElementBlock)('div',Z,[d[4]||(d[4]=(0,c.createElementVNode)('span',{class:'info-label'},'数量：',-1)),(0,c.createElementVNode)('span',ee,'×'+(0,c.toDisplayString)(a.value.quantity),1)])):(0,c.createCommentVNode)('v-if',!0)])]),(0,c.createCommentVNode)(' 道具描述 '),a.value.description?((0,c.openBlock)(),(0,c.createElementBlock)('div',te,[d[6]||(d[6]=(0,c.createElementVNode)('h3',{class:'section-title'},'📝 描述',-1)),(0,c.createElementVNode)('p',ae,(0,c.toDisplayString)(a.value.description),1)])):(0,c.createCommentVNode)('v-if',!0),(0,c.createCommentVNode)(' 道具效果 '),a.value.effect?((0,c.openBlock)(),(0,c.createElementBlock)('div',ne,[d[7]||(d[7]=(0,c.createElementVNode)('h3',{class:'section-title'},'✨ 效果',-1)),(0,c.createElementVNode)('p',le,(0,c.toDisplayString)(a.value.effect),1)])):(0,c.createCommentVNode)('v-if',!0)])]),(0,c.createElementVNode)('div',oe,[(0,c.createElementVNode)('button',{class:'apt-btn apt-btn-secondary',onClick:o},'关闭'),(0,c.createElementVNode)('button',{class:'apt-btn',onClick:r,disabled:!i(a.value)},(0,c.toDisplayString)(i(a.value)?'使用':'无法使用'),9,ce)])])])):(0,c.createCommentVNode)('v-if',!0)]))}}),ie=(0,T.A)(se,[['__scopeId','data-v-4dbef8e4']]),re=_;var de=o.n(re);const me={class:'modal-header'},ue={class:'modal-title'},pe={class:'modal-body custom-scrollbar'},ve={key:0,class:'room-details'},Ne={class:'detail-section'},Ve={class:'info-grid'},Ee={class:'info-item'},ye={class:'info-value'},fe={class:'info-item'},ke={class:'info-value'},be={key:0,class:'info-item'},ge={class:'info-value highlight'},Be={key:1,class:'info-item full-width'},Ce={class:'info-value'},he={class:'detail-section'},Te={key:0,class:'occupants-grid'},Se=['onClick'],De={class:'occupant-icon'},$e={class:'occupant-name'},_e={key:1,class:'empty-message'},we={key:0,class:'detail-section'},Le={class:'room-description'},Me={class:'modal-footer'},Ae=['disabled'],Ie={key:0},xe={key:1},je={class:'interaction-panel'},Oe={class:'interaction-header'},Pe={class:'interaction-title'},qe={class:'interaction-body'},ze={class:'interaction-actions'},Fe=(0,c.defineComponent)({__name:'RoomDetailModal',setup(e,{expose:t}){const a=v(),n=(0,c.ref)(!1),l=(0,c.ref)(null),o=(0,c.ref)(!1),s=(0,c.ref)(''),i=(0,c.computed)(()=>l.value),r=(0,c.computed)(()=>{if(!l.value)return[];const e=[];for(const t of l.value.roomIds){a.player.currentLocation===t&&e.push({name:'你',icon:'👤',isTenant:!1});for(const[n,l]of Object.entries(a.tenants))l.当前位置===t&&e.push({name:n,icon:'👥',isTenant:!0})}return e}),d=(0,c.computed)(()=>!!l.value&&l.value.roomIds.includes(a.player.currentLocation));function m(){n.value=!1,setTimeout(()=>{l.value=null},300)}function u(){if(!l.value||d.value)return;const e=function(){if(!l.value)return{canAccess:!1,message:''};if('套间'===l.value.类型){const e=l.value.roomIds[0],t=a.apartments.房间列表[e];if(t&&t.住户&&'未知'!==t.住户)return r.value.some(e=>e.isTenant)?{canAccess:!1,message:'似乎有人在……'}:{canAccess:!1,message:'好像上锁了……'}}return{canAccess:!0,message:''}}();if(!e.canAccess)return void alert(e.message);const t=l.value.roomIds[0];a.moveToRoom(t),m()}function p(){if(!l.value)return'';const e=l.value.roomIds[0],t=a.apartments.房间列表[e];return t?.描述||''}function N(){if(!l.value)return'';const e=l.value.类型;return'套间'===e?'未知'===l.value.住户?'bedroom vacant':'bedroom':'您的房间'===e?'your':'公共客厅'===e?'public-lounge':'健身房'===e?'public-gym':'洗衣间'===e?'public-laundry':'custom-functional'}function V(){o.value=!1,s.value=''}function E(e){console.log(`与 ${s.value} 进行互动: ${e}`),'chat'===e?(a.interactWithTenant(s.value),V(),m()):alert(`${e} 功能开发中...`)}return t({openModal:function(e){l.value=e,n.value=!0},closeModal:m}),(e,t)=>n.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:0,class:'modal-overlay',onClick:(0,c.withModifiers)(m,['self'])},[(0,c.createElementVNode)('div',{class:(0,c.normalizeClass)(['modal-content',N()])},[(0,c.createCommentVNode)(' 弹窗标题 '),(0,c.createElementVNode)('div',me,[(0,c.createElementVNode)('h2',ue,[t[3]||(t[3]=(0,c.createElementVNode)('span',{class:'room-icon'},'🏠',-1)),(0,c.createTextVNode)(' '+(0,c.toDisplayString)(i.value?.displayName||'房间详情'),1)]),(0,c.createElementVNode)('button',{class:'close-btn',onClick:m},'✕')]),(0,c.createCommentVNode)(' 弹窗主体 '),(0,c.createElementVNode)('div',pe,[i.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',ve,[(0,c.createCommentVNode)(' 基础信息 '),(0,c.createElementVNode)('div',Ne,[t[8]||(t[8]=(0,c.createElementVNode)('h3',{class:'section-title'},'📋 基础信息',-1)),(0,c.createElementVNode)('div',Ve,[(0,c.createElementVNode)('div',Ee,[t[4]||(t[4]=(0,c.createElementVNode)('span',{class:'info-label'},'房间号：',-1)),(0,c.createElementVNode)('span',ye,(0,c.toDisplayString)(l.value?l.value.isMerged?l.value.roomIds.join('-'):l.value.id:''),1)]),(0,c.createElementVNode)('div',fe,[t[5]||(t[5]=(0,c.createElementVNode)('span',{class:'info-label'},'类型：',-1)),(0,c.createElementVNode)('span',ke,(0,c.toDisplayString)(i.value.类型),1)]),i.value.住户?((0,c.openBlock)(),(0,c.createElementBlock)('div',be,[t[6]||(t[6]=(0,c.createElementVNode)('span',{class:'info-label'},'住户：',-1)),(0,c.createElementVNode)('span',ge,(0,c.toDisplayString)(i.value.住户),1)])):(0,c.createCommentVNode)('v-if',!0),i.value.功能区?((0,c.openBlock)(),(0,c.createElementBlock)('div',Be,[t[7]||(t[7]=(0,c.createElementVNode)('span',{class:'info-label'},'功能区：',-1)),(0,c.createElementVNode)('span',Ce,(0,c.toDisplayString)(i.value.功能区),1)])):(0,c.createCommentVNode)('v-if',!0)])]),(0,c.createCommentVNode)(' 当前在此房间的人 '),(0,c.createElementVNode)('div',he,[t[9]||(t[9]=(0,c.createElementVNode)('h3',{class:'section-title'},'👥 当前在此',-1)),r.value.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',Te,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(r.value,e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:(0,c.normalizeClass)(['occupant-card',{clickable:e.isTenant&&d.value}]),onClick:t=>{return e.isTenant&&d.value?(a=e.name,s.value=a,void(o.value=!0)):null;var a}},[(0,c.createElementVNode)('span',De,(0,c.toDisplayString)(e.icon),1),(0,c.createElementVNode)('span',$e,(0,c.toDisplayString)(e.name),1)],10,Se))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('div',_e,'当前房间无人'))]),(0,c.createCommentVNode)(' 房间描述（如果有） '),p()?((0,c.openBlock)(),(0,c.createElementBlock)('div',we,[t[10]||(t[10]=(0,c.createElementVNode)('h3',{class:'section-title'},'📝 房间描述',-1)),(0,c.createElementVNode)('p',Le,(0,c.toDisplayString)(p()),1)])):(0,c.createCommentVNode)('v-if',!0)])):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createCommentVNode)(' 弹窗底部操作按钮 '),(0,c.createElementVNode)('div',Me,[(0,c.createElementVNode)('button',{class:'apt-btn apt-btn-secondary',onClick:m},'取消'),(0,c.createElementVNode)('button',{class:'apt-btn',onClick:u,disabled:d.value||(0,c.unref)(a).isLoading},[d.value?((0,c.openBlock)(),(0,c.createElementBlock)('span',Ie,'✓ 当前位置')):((0,c.openBlock)(),(0,c.createElementBlock)('span',xe,'🚶 移动到此'))],8,Ae)])],2),(0,c.createCommentVNode)(' 租客互动面板 '),o.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:0,class:'interaction-overlay',onClick:(0,c.withModifiers)(V,['self'])},[(0,c.createElementVNode)('div',je,[(0,c.createElementVNode)('div',Oe,[(0,c.createElementVNode)('h3',Pe,[t[11]||(t[11]=(0,c.createElementVNode)('span',{class:'interaction-icon'},'💬',-1)),(0,c.createTextVNode)(' 与 '+(0,c.toDisplayString)(s.value)+' 互动 ',1)]),(0,c.createElementVNode)('button',{class:'close-btn',onClick:V},'✕')]),(0,c.createElementVNode)('div',qe,[t[15]||(t[15]=(0,c.createElementVNode)('p',{class:'interaction-hint'},'互动选项开发中...',-1)),(0,c.createElementVNode)('div',ze,[(0,c.createElementVNode)('button',{class:'apt-btn',onClick:t[0]||(t[0]=e=>E('chat'))},[...t[12]||(t[12]=[(0,c.createElementVNode)('span',null,'💬',-1),(0,c.createElementVNode)('span',null,'聊天',-1)])]),(0,c.createElementVNode)('button',{class:'apt-btn apt-btn-secondary',onClick:t[1]||(t[1]=e=>E('gift'))},[...t[13]||(t[13]=[(0,c.createElementVNode)('span',null,'🎁',-1),(0,c.createElementVNode)('span',null,'送礼',-1)])]),(0,c.createElementVNode)('button',{class:'apt-btn apt-btn-secondary',onClick:t[2]||(t[2]=e=>E('invite'))},[...t[14]||(t[14]=[(0,c.createElementVNode)('span',null,'🎮',-1),(0,c.createElementVNode)('span',null,'邀请活动',-1)])])])]),(0,c.createElementVNode)('div',{class:'interaction-footer'},[(0,c.createElementVNode)('button',{class:'apt-btn apt-btn-secondary',onClick:V},'关闭')])])])):(0,c.createCommentVNode)('v-if',!0)])):(0,c.createCommentVNode)('v-if',!0)}}),Ue=(0,T.A)(Fe,[['__scopeId','data-v-a67ded24']]),Re={class:'map-view apt-card'},We={class:'apt-card-body custom-scrollbar'},Ye={class:'floor-title'},Ge={class:'floor-grid'},He=['onClick'],Xe={class:'room-info'},Je={class:'room-id'},Ke={class:'room-name'},Qe={class:'room-occupants'},Ze={key:0,class:'occupants-summary'},et={class:'summary-text'},tt={key:1,class:'occupants-list'},at={class:'person-icon'},nt={class:'person-name'},lt={key:2,class:'empty-indicator'},ot=(0,c.defineComponent)({__name:'MapView',setup(e){const t=v(),a=(0,c.ref)(null),n=(0,c.computed)(()=>{const e=t.apartments.楼层配置;return de().orderBy(Object.entries(e).map(([e,t])=>({key:e,...t})),['顺序'],['desc']).reduce((e,t)=>(e[t.key]=t,e),{})});function l(e){const a=t.apartments.房间列表,n=de().pickBy(a,t=>t.布局?.楼层===e),l=[],o=new Set,c=Object.keys(n).sort();for(const t of c){if(o.has(t))continue;const a=n[t],c=a.类型;if('公共客厅'===c&&'一楼'===e){const e=['101','102'].filter(e=>n[e]);e.forEach(e=>o.add(e)),l.push({id:'lounge-merged',displayName:'公共客厅',类型:'公共客厅',功能区:'会客区、用餐区、休息区、娱乐区',roomIds:e,isMerged:!0})}else if('健身房'===c&&'一楼'===e){const e=['103','104'].filter(e=>n[e]);e.forEach(e=>o.add(e)),l.push({id:'gym-merged',displayName:'健身房',类型:'健身房',功能区:'健身设备区、瑜伽区、舞蹈区',roomIds:e,isMerged:!0})}else o.add(t),l.push({id:t,displayName:t,类型:c,住户:a.住户,功能区:a.功能区,roomIds:[t],isMerged:!1})}return l}function o(e){const t=e.类型;return'套间'===t?'未知'===e.住户?'bedroom vacant':'bedroom':'您的房间'===t?'your':'公共客厅'===t?'public-lounge':'健身房'===t?'public-gym':'洗衣间'===t?'public-laundry':'空房间'===t?'empty':'custom-functional'}function s(e){const a=[];for(const n of e.roomIds){t.player.currentLocation===n&&a.push({name:'你',icon:'👤'});for(const[e,l]of Object.entries(t.tenants))l.当前位置===n&&a.push({name:e,icon:'👥'})}return de().uniqBy(a,'name')}function i(e){return e.isMerged?e.roomIds.join('-'):e.roomIds[0]}return(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',Re,[t[1]||(t[1]=(0,c.createElementVNode)('div',{class:'apt-card-title'},[(0,c.createElementVNode)('span',null,'🏢'),(0,c.createElementVNode)('span',null,'公寓地图'),(0,c.createElementVNode)('span',{class:'subtitle'},'点击房间查看详情')],-1)),(0,c.createElementVNode)('div',We,[(0,c.createCommentVNode)(' 按楼层倒序显示（三楼在最上面） '),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(n.value,(e,n)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:n,class:'floor-level'},[(0,c.createElementVNode)('div',Ye,(0,c.toDisplayString)(e.显示名称),1),(0,c.createElementVNode)('div',Ge,[(0,c.createCommentVNode)(' 遍历处理后的房间列表（合并了公共区域） '),((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(l(n),e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.id,class:(0,c.normalizeClass)(['room-card',o(e),{'double-width':e.isMerged}]),onClick:t=>function(e){console.log('点击房间组:',e),a.value?.openModal(e)}(e)},[(0,c.createCommentVNode)(' 左侧：房间基础信息 '),(0,c.createElementVNode)('div',Xe,[(0,c.createElementVNode)('div',Je,(0,c.toDisplayString)(i(e)),1),(0,c.createElementVNode)('div',Ke,(0,c.toDisplayString)(e.类型),1)]),(0,c.createCommentVNode)(' 右侧：当前在这里的人 '),(0,c.createElementVNode)('div',Qe,[s(e).length>2?((0,c.openBlock)(),(0,c.createElementBlock)('div',Ze,[t[0]||(t[0]=(0,c.createElementVNode)('span',{class:'summary-icon'},'👥',-1)),(0,c.createElementVNode)('span',et,(0,c.toDisplayString)(s(e).length)+'人',1)])):s(e).length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',tt,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(s(e),e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.name,class:'person-indicator'},[(0,c.createElementVNode)('span',at,(0,c.toDisplayString)(e.icon),1),(0,c.createElementVNode)('span',nt,(0,c.toDisplayString)(e.name),1)]))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('div',lt,'空'))])],10,He))),128))])]))),128))]),(0,c.createCommentVNode)(' 房间详情弹窗 '),(0,c.createVNode)(Ue,{ref_key:'roomDetailModal',ref:a},null,512)]))}}),ct=(0,T.A)(ot,[['__scopeId','data-v-723e6358']]),st={class:'narrative-window apt-card'},it={key:0,class:'empty-state'},rt={key:1,class:'narrative-list'},dt={class:'entry-time'},mt={class:'entry-content'},ut=(0,c.defineComponent)({__name:'NarrativeWindow',setup(e){const t=v(),a=(0,c.ref)(null);function n(){t.clearNarrativeLog()}function l(){a.value&&(a.value.scrollTop=a.value.scrollHeight)}return(0,c.watch)(()=>t.narrativeLog.length,()=>{(0,c.nextTick)(()=>{l()})}),(e,o)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',st,[o[3]||(o[3]=(0,c.createElementVNode)('div',{class:'apt-card-title'},[(0,c.createElementVNode)('span',null,'📖'),(0,c.createElementVNode)('span',null,'叙事窗口')],-1)),(0,c.createElementVNode)('div',{class:'apt-card-body custom-scrollbar',ref_key:'narrativeBody',ref:a},[0===(0,c.unref)(t).narrativeLog.length?((0,c.openBlock)(),(0,c.createElementBlock)('div',it,[...o[0]||(o[0]=[(0,c.createElementVNode)('div',{class:'empty-icon'},'📝',-1),(0,c.createElementVNode)('div',{class:'empty-text'},'暂无叙事内容',-1),(0,c.createElementVNode)('div',{class:'empty-hint'},'与租客互动或推进时间时，叙事内容将显示在这里',-1)])])):((0,c.openBlock)(),(0,c.createElementBlock)('div',rt,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(t).narrativeLog,e=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:e.id,class:(0,c.normalizeClass)(['narrative-entry',e.type])},[(0,c.createElementVNode)('div',dt,(0,c.toDisplayString)(e.timestamp),1),(0,c.createElementVNode)('div',mt,(0,c.toDisplayString)(e.text),1)],2))),128))]))],512),(0,c.createCommentVNode)(' 底部工具栏 '),(0,c.createElementVNode)('div',{class:'narrative-footer'},[(0,c.createElementVNode)('button',{class:'apt-btn apt-btn-small apt-btn-secondary',onClick:n},[...o[1]||(o[1]=[(0,c.createElementVNode)('span',null,'🗑️ 清空',-1)])]),(0,c.createElementVNode)('button',{class:'apt-btn apt-btn-small apt-btn-secondary',onClick:l},[...o[2]||(o[2]=[(0,c.createElementVNode)('span',null,'⬇️ 滚到底部',-1)])])])]))}}),pt=(0,T.A)(ut,[['__scopeId','data-v-aa9c1544']]),vt={class:'profile-page apt-card'},Nt={class:'apt-card-title'},Vt={class:'subtitle'},Et={class:'apt-card-body custom-scrollbar'},yt={class:'tenants-grid'},ft=['onClick'],kt={class:'tenant-basic-info'},bt={class:'tenant-name'},gt={class:'tenant-meta'},Bt={class:'meta-item'},Ct={class:'meta-item'},ht={class:'detail-panel'},Tt={class:'detail-header'},St={class:'detail-title'},Dt={class:'detail-body custom-scrollbar'},$t={key:0,class:'tenant-details'},_t={class:'detail-section'},wt={class:'info-grid'},Lt={class:'info-item'},Mt={class:'info-value'},At={class:'info-item'},It={class:'info-value highlight'},xt={class:'detail-section'},jt={key:0,class:'memories-list'},Ot={class:'memory-text'},Pt={key:1,class:'empty-message'},qt={class:'detail-section'},zt={key:0,class:'schedule-list'},Ft={class:'schedule-time'},Ut={class:'schedule-activity'},Rt={class:'schedule-location'},Wt={key:1,class:'empty-message'},Yt=(0,c.defineComponent)({__name:'ProfilePage',setup(e){const t=v(),a=(0,c.ref)(null),n=(0,c.computed)(()=>a.value?t.tenants[a.value]:null);function l(){a.value=null}function o(e){const a=t.apartments.房间列表[e];return a?a.住户&&'未知'!==a.住户?`${a.住户}的房间`:a.类型||e:e}return(e,s)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',vt,[(0,c.createElementVNode)('div',Nt,[s[0]||(s[0]=(0,c.createElementVNode)('span',null,'📋',-1)),s[1]||(s[1]=(0,c.createElementVNode)('span',null,'租客档案',-1)),(0,c.createElementVNode)('span',Vt,(0,c.toDisplayString)(Object.keys((0,c.unref)(t).tenants).length)+' 位租客',1)]),(0,c.createElementVNode)('div',Et,[(0,c.createElementVNode)('div',yt,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)((0,c.unref)(t).tenants,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t,class:'tenant-profile-card',onClick:e=>function(e){a.value=e}(t)},[(0,c.createCommentVNode)(' 租客头像 '),s[4]||(s[4]=(0,c.createElementVNode)('div',{class:'tenant-avatar'},[(0,c.createElementVNode)('span',{class:'avatar-icon'},'👤')],-1)),(0,c.createCommentVNode)(' 租客基础信息 '),(0,c.createElementVNode)('div',kt,[(0,c.createElementVNode)('h3',bt,(0,c.toDisplayString)(t),1),(0,c.createElementVNode)('div',gt,[(0,c.createElementVNode)('span',Bt,[s[2]||(s[2]=(0,c.createElementVNode)('span',{class:'meta-icon'},'📍',-1)),(0,c.createElementVNode)('span',null,(0,c.toDisplayString)(o(e.当前位置)),1)]),(0,c.createElementVNode)('span',Ct,[s[3]||(s[3]=(0,c.createElementVNode)('span',{class:'meta-icon'},'💖',-1)),(0,c.createElementVNode)('span',null,'好感度 '+(0,c.toDisplayString)(e.好感度),1)])])])],8,ft))),128))])]),(0,c.createCommentVNode)(' 租客详情弹窗 '),a.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:0,class:'detail-overlay',onClick:(0,c.withModifiers)(l,['self'])},[(0,c.createElementVNode)('div',ht,[(0,c.createElementVNode)('div',Tt,[(0,c.createElementVNode)('h2',St,[s[5]||(s[5]=(0,c.createElementVNode)('span',{class:'detail-icon'},'👤',-1)),(0,c.createTextVNode)(' '+(0,c.toDisplayString)(a.value),1)]),(0,c.createElementVNode)('button',{class:'close-btn',onClick:l},'✕')]),(0,c.createElementVNode)('div',Dt,[n.value?((0,c.openBlock)(),(0,c.createElementBlock)('div',$t,[(0,c.createCommentVNode)(' 基础信息 '),(0,c.createElementVNode)('div',_t,[s[8]||(s[8]=(0,c.createElementVNode)('h3',{class:'section-title'},'📋 基础信息',-1)),(0,c.createElementVNode)('div',wt,[(0,c.createElementVNode)('div',Lt,[s[6]||(s[6]=(0,c.createElementVNode)('span',{class:'info-label'},'当前位置：',-1)),(0,c.createElementVNode)('span',Mt,(0,c.toDisplayString)(o(n.value.当前位置)),1)]),(0,c.createElementVNode)('div',At,[s[7]||(s[7]=(0,c.createElementVNode)('span',{class:'info-label'},'好感度：',-1)),(0,c.createElementVNode)('span',It,(0,c.toDisplayString)(n.value.好感度),1)])])]),(0,c.createCommentVNode)(' 记忆 '),(0,c.createElementVNode)('div',xt,[s[10]||(s[10]=(0,c.createElementVNode)('h3',{class:'section-title'},'💭 记忆',-1)),n.value.记忆&&n.value.记忆.length>0?((0,c.openBlock)(),(0,c.createElementBlock)('div',jt,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(n.value.记忆,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t,class:'memory-item'},[s[9]||(s[9]=(0,c.createElementVNode)('span',{class:'memory-icon'},'📝',-1)),(0,c.createElementVNode)('span',Ot,(0,c.toDisplayString)(e),1)]))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('div',Pt,'暂无记忆'))]),(0,c.createCommentVNode)(' 日程 '),(0,c.createElementVNode)('div',qt,[s[11]||(s[11]=(0,c.createElementVNode)('h3',{class:'section-title'},'📅 日程安排',-1)),n.value.日程?((0,c.openBlock)(),(0,c.createElementBlock)('div',zt,[((0,c.openBlock)(!0),(0,c.createElementBlock)(c.Fragment,null,(0,c.renderList)(n.value.日程,(e,t)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',{key:t,class:'schedule-item'},[(0,c.createElementVNode)('span',Ft,(0,c.toDisplayString)(t),1),(0,c.createElementVNode)('span',Ut,(0,c.toDisplayString)(e.活动),1),(0,c.createElementVNode)('span',Rt,'@ '+(0,c.toDisplayString)(o(e.位置)),1)]))),128))])):((0,c.openBlock)(),(0,c.createElementBlock)('div',Wt,'暂无日程'))])])):(0,c.createCommentVNode)('v-if',!0)]),(0,c.createElementVNode)('div',{class:'detail-footer'},[(0,c.createElementVNode)('button',{class:'apt-btn apt-btn-secondary',onClick:l},'关闭')])])])):(0,c.createCommentVNode)('v-if',!0)]))}}),Gt=(0,T.A)(Yt,[['__scopeId','data-v-05e19d48']]),Ht={id:'app-container'},Xt={class:'main-card apt-card'},Jt={class:'header-bar'},Kt={class:'header-info-line'},Qt={class:'info-item'},Zt={class:'info-item'},ea={class:'info-item'},ta={class:'tab-content'},aa={class:'tab-pane'},na={class:'tab-pane'},la={class:'tab-pane'},oa={class:'tab-pane'},ca={class:'tab-pane'},sa={class:'tab-buttons'},ia=(0,c.defineComponent)({__name:'App',setup(e){const t=v(),n=getCurrentMessageId(),l=(0,c.ref)('map');(0,c.computed)(()=>{const e=t.player.currentLocation,a=t.apartments.房间列表[e];return a?a.住户&&'未知'!==a.住户?`${a.住户}的房间`:a.类型||e:e}),(0,c.computed)(()=>Object.keys(t.tenants).length),(0,c.computed)(()=>{const e=t.player.currentLocation,a=[];for(const[n,l]of Object.entries(t.tenants))l.当前位置===e&&a.push(n);return a}),(0,c.computed)(()=>t.player.inventory?.reduce((e,t)=>e+(t.quantity||1),0)||0);return(0,c.onMounted)(async()=>{console.log('App.vue onMounted: 正在加載遊戲狀態...');try{const e=await getVariables({type:'message',message_id:n});e&&Object.keys(e).length>0?(t.$patch(a(e)),console.log('遊戲狀態已從消息樓層成功恢復:',e),t.addNarrativeMessage('system','遊戲狀態已從酒館消息樓層成功加載。')):(console.log('未找到保存的狀態，初始化新遊戲。'),t.addNarrativeMessage('system','歡迎來到網紅小區。你作為房東的模擬經營遊戲現在開始。'))}catch(e){console.error('加載遊戲狀態時出錯:',e),t.addNarrativeMessage('system',`[錯誤] 加載遊戲狀態失敗: ${e.message}`)}}),(0,c.watchEffect)(async()=>{if(!t.isLoading)try{const e=a(t.$state);await replaceVariables(e,{type:'message',message_id:n}),console.log('遊戲狀態已自動保存到消息樓層。')}catch(e){console.error('自動保存遊戲狀態時出錯:',e)}}),(e,a)=>((0,c.openBlock)(),(0,c.createElementBlock)('div',Ht,[(0,c.createCommentVNode)(' 主卡片容器 '),(0,c.createElementVNode)('div',Xt,[(0,c.createCommentVNode)(' 头部信息栏 '),(0,c.createElementVNode)('div',Jt,[a[7]||(a[7]=(0,c.createElementVNode)('div',{class:'header-title'},[(0,c.createElementVNode)('span',{class:'title-icon'},'🏢'),(0,c.createElementVNode)('span',{class:'title-text'},'网红小区')],-1)),(0,c.createElementVNode)('div',Kt,[(0,c.createElementVNode)('span',Qt,(0,c.toDisplayString)((0,c.unref)(t).world.地点),1),a[5]||(a[5]=(0,c.createElementVNode)('span',{class:'info-separator'},'|',-1)),(0,c.createElementVNode)('span',Zt,(0,c.toDisplayString)((0,c.unref)(t).world.年份)+' '+(0,c.toDisplayString)((0,c.unref)(t).world.日期)+' '+(0,c.toDisplayString)((0,c.unref)(t).world.星期),1),a[6]||(a[6]=(0,c.createElementVNode)('span',{class:'info-separator'},'|',-1)),(0,c.createElementVNode)('span',ea,(0,c.toDisplayString)((0,c.unref)(t).world.时间),1)])]),(0,c.createCommentVNode)(' 标签页内容区域 '),(0,c.createElementVNode)('div',ta,[(0,c.createCommentVNode)(' 地图页 '),(0,c.withDirectives)((0,c.createElementVNode)('div',aa,[(0,c.createVNode)(ct)],512),[[c.vShow,'map'===l.value]]),(0,c.createCommentVNode)(' 行动页 '),(0,c.withDirectives)((0,c.createElementVNode)('div',na,[(0,c.createVNode)(S)],512),[[c.vShow,'action'===l.value]]),(0,c.createCommentVNode)(' 叙事页 '),(0,c.withDirectives)((0,c.createElementVNode)('div',la,[(0,c.createVNode)(pt)],512),[[c.vShow,'narrative'===l.value]]),(0,c.createCommentVNode)(' 档案页 '),(0,c.withDirectives)((0,c.createElementVNode)('div',oa,[(0,c.createVNode)(Gt)],512),[[c.vShow,'profile'===l.value]]),(0,c.createCommentVNode)(' 背包页 '),(0,c.withDirectives)((0,c.createElementVNode)('div',ca,[(0,c.createVNode)(ie)],512),[[c.vShow,'inventory'===l.value]])]),(0,c.createCommentVNode)(' 底部标签页切换按钮 '),(0,c.createElementVNode)('div',sa,[(0,c.createElementVNode)('button',{class:(0,c.normalizeClass)(['tab-btn',{active:'map'===l.value}]),onClick:a[0]||(a[0]=e=>l.value='map')},[...a[8]||(a[8]=[(0,c.createElementVNode)('span',{class:'tab-icon'},'🏢',-1),(0,c.createElementVNode)('span',{class:'tab-label'},'地图',-1)])],2),(0,c.createElementVNode)('button',{class:(0,c.normalizeClass)(['tab-btn',{active:'action'===l.value}]),onClick:a[1]||(a[1]=e=>l.value='action')},[...a[9]||(a[9]=[(0,c.createElementVNode)('span',{class:'tab-icon'},'🎮',-1),(0,c.createElementVNode)('span',{class:'tab-label'},'行动',-1)])],2),(0,c.createElementVNode)('button',{class:(0,c.normalizeClass)(['tab-btn',{active:'narrative'===l.value}]),onClick:a[2]||(a[2]=e=>l.value='narrative')},[...a[10]||(a[10]=[(0,c.createElementVNode)('span',{class:'tab-icon'},'📖',-1),(0,c.createElementVNode)('span',{class:'tab-label'},'叙事',-1)])],2),(0,c.createElementVNode)('button',{class:(0,c.normalizeClass)(['tab-btn',{active:'profile'===l.value}]),onClick:a[3]||(a[3]=e=>l.value='profile')},[...a[11]||(a[11]=[(0,c.createElementVNode)('span',{class:'tab-icon'},'📋',-1),(0,c.createElementVNode)('span',{class:'tab-label'},'档案',-1)])],2),(0,c.createElementVNode)('button',{class:(0,c.normalizeClass)(['tab-btn',{active:'inventory'===l.value}]),onClick:a[4]||(a[4]=e=>l.value='inventory')},[...a[12]||(a[12]=[(0,c.createElementVNode)('span',{class:'tab-icon'},'🎒',-1),(0,c.createElementVNode)('span',{class:'tab-label'},'背包',-1)])],2)])])]))}});$(()=>{console.log('“网红小区-单页版”脚本加载...');const t=e(),a=(0,c.createApp)(ia);a.use(t),a.mount('#app'),console.log('Vue 应用已成功挂载.')}),$(window).on('pagehide',()=>{console.log('“网红小区-单页版”脚本卸载.')});
//# sourceMappingURL=index.js.map</script><style>.action-panel[data-v-28591e35]{height:100%;display:flex;flex-direction:column}.apt-card-title[data-v-28591e35]{display:flex;align-items:center;gap:8px}.loading-indicator[data-v-28591e35]{font-size:.8em;color:var(--apt-primary);font-weight:600;animation:pulse-28591e35 1.5s infinite}@keyframes pulse-28591e35{0%,100%{opacity:1}50%{opacity:.6}}.apt-card-body[data-v-28591e35]{flex:1;overflow-y:auto}.action-section[data-v-28591e35]{margin-bottom:24px}.action-section[data-v-28591e35]:last-child{margin-bottom:0}.section-title[data-v-28591e35]{font-size:.95em;font-weight:600;color:var(--apt-primary);margin-bottom:12px;display:flex;align-items:center;gap:6px}.button-grid[data-v-28591e35]{display:grid;grid-template-columns:1fr 1fr;gap:10px}.apt-btn[data-v-28591e35]{display:flex;flex-direction:column;align-items:center;gap:4px;padding:12px 8px;font-size:.85em}.apt-btn .btn-icon[data-v-28591e35]{font-size:1.3em}.apt-btn[data-v-28591e35]:disabled{opacity:.5;cursor:not-allowed;background:var(--apt-hover);transform:none}
.inventory-page[data-v-4dbef8e4]{height:100%;display:flex;flex-direction:column}.subtitle[data-v-4dbef8e4]{margin-left:auto;font-size:.75em;color:var(--apt-text-secondary);opacity:.7;font-weight:400}.apt-card-body[data-v-4dbef8e4]{flex:1;overflow-y:auto}.empty-inventory[data-v-4dbef8e4]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:16px;padding:40px}.empty-icon[data-v-4dbef8e4]{font-size:4em;opacity:.3}.empty-text[data-v-4dbef8e4]{font-size:1.2em;font-weight:600;color:var(--apt-text-secondary);opacity:.6}.empty-hint[data-v-4dbef8e4]{font-size:.9em;color:var(--apt-text-secondary);opacity:.5;font-style:italic}.items-grid[data-v-4dbef8e4]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;padding:4px}.item-card[data-v-4dbef8e4]{display:flex;align-items:center;gap:12px;padding:16px;background:hsla(0,0%,100%,.05);border:1px solid var(--apt-border);border-radius:12px;cursor:pointer;transition:all .2s;position:relative}.item-card[data-v-4dbef8e4]:hover{background:rgba(255,107,157,.1);border-color:var(--apt-primary);transform:translateY(-2px);box-shadow:0 4px 12px rgba(255,107,157,.2)}.item-icon[data-v-4dbef8e4]{width:50px;height:50px;border-radius:10px;background:linear-gradient(135deg,rgba(255,107,157,0.2),rgba(255,107,157,0.1));display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:2em}.item-info[data-v-4dbef8e4]{flex:1;min-width:0}.item-name[data-v-4dbef8e4]{font-size:1em;font-weight:700;color:var(--apt-text);margin-bottom:4px}.item-type[data-v-4dbef8e4]{font-size:.85em;color:var(--apt-text-secondary);opacity:.8}.item-quantity[data-v-4dbef8e4]{position:absolute;top:8px;right:8px;background:var(--apt-primary);color:#fff;padding:2px 8px;border-radius:12px;font-size:.75em;font-weight:700}.detail-overlay[data-v-4dbef8e4]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn-4dbef8e4 .2s ease}@keyframes fadeIn-4dbef8e4{from{opacity:0}to{opacity:1}}.detail-panel[data-v-4dbef8e4]{background:var(--apt-card);border:2px solid var(--apt-border);border-radius:16px;width:90%;max-width:500px;max-height:80vh;display:flex;flex-direction:column;box-shadow:0 8px 32px rgba(0,0,0,.5);animation:slideUp-4dbef8e4 .3s ease}@keyframes slideUp-4dbef8e4{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.detail-header[data-v-4dbef8e4]{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid var(--apt-border);background:rgba(255,107,157,.1)}.detail-title[data-v-4dbef8e4]{display:flex;align-items:center;gap:12px;margin:0;font-size:1.5em;font-weight:700;color:var(--apt-text)}.detail-icon[data-v-4dbef8e4]{font-size:1.2em}.close-btn[data-v-4dbef8e4]{background:hsla(0,0%,100%,.1);border:1px solid var(--apt-border);border-radius:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--apt-text);font-size:1.5em;transition:all .2s}.close-btn[data-v-4dbef8e4]:hover{background:rgba(255,107,157,.2);border-color:var(--apt-primary)}.detail-body[data-v-4dbef8e4]{flex:1;overflow-y:auto;padding:24px}.item-details[data-v-4dbef8e4]{display:flex;flex-direction:column;gap:20px}.detail-section[data-v-4dbef8e4]{background:hsla(0,0%,100%,.03);border:1px solid hsla(0,0%,100%,.1);border-radius:12px;padding:16px}.section-title[data-v-4dbef8e4]{margin:0 0 12px 0;font-size:1em;font-weight:600;color:var(--apt-primary)}.info-grid[data-v-4dbef8e4]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.info-item[data-v-4dbef8e4]{display:flex;flex-direction:column;gap:4px}.info-label[data-v-4dbef8e4]{font-size:.85em;color:var(--apt-text-secondary);opacity:.8}.info-value[data-v-4dbef8e4]{font-size:1em;font-weight:600;color:var(--apt-text)}.info-value.highlight[data-v-4dbef8e4]{color:var(--apt-primary)}.item-description[data-v-4dbef8e4],.item-effect[data-v-4dbef8e4]{margin:0;line-height:1.6;color:var(--apt-text);opacity:.9}.detail-footer[data-v-4dbef8e4]{display:flex;gap:12px;padding:20px 24px;border-top:1px solid var(--apt-border);background:rgba(0,0,0,.2)}
.modal-overlay[data-v-a67ded24]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn-a67ded24 .2s ease}@keyframes fadeIn-a67ded24{from{opacity:0}to{opacity:1}}.modal-content[data-v-a67ded24]{background:var(--apt-card);border:2px solid var(--apt-border);border-radius:16px;width:90%;max-width:600px;max-height:80vh;display:flex;flex-direction:column;box-shadow:0 8px 32px rgba(0,0,0,.5);animation:slideUp-a67ded24 .3s ease}@keyframes slideUp-a67ded24{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[data-v-a67ded24]{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid var(--apt-border);background:rgba(255,107,157,.1)}.modal-title[data-v-a67ded24]{display:flex;align-items:center;gap:12px;margin:0;font-size:1.5em;font-weight:700;color:var(--apt-text)}.room-icon[data-v-a67ded24]{font-size:1.2em}.close-btn[data-v-a67ded24]{background:hsla(0,0%,100%,.1);border:1px solid var(--apt-border);border-radius:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--apt-text);font-size:1.5em;transition:all .2s}.close-btn[data-v-a67ded24]:hover{background:rgba(255,107,157,.2);border-color:var(--apt-primary)}.modal-body[data-v-a67ded24]{flex:1;overflow-y:auto;padding:24px}.room-details[data-v-a67ded24]{display:flex;flex-direction:column;gap:24px}.detail-section[data-v-a67ded24]{background:hsla(0,0%,100%,.03);border:1px solid hsla(0,0%,100%,.1);border-radius:12px;padding:16px}.section-title[data-v-a67ded24]{margin:0 0 16px 0;font-size:1.1em;font-weight:600;color:var(--apt-primary);display:flex;align-items:center;gap:8px}.info-grid[data-v-a67ded24]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.info-item[data-v-a67ded24]{display:flex;flex-direction:column;gap:4px}.info-item.full-width[data-v-a67ded24]{grid-column:1/-1}.info-label[data-v-a67ded24]{font-size:.85em;color:var(--apt-text-secondary);opacity:.8}.info-value[data-v-a67ded24]{font-size:1em;font-weight:600;color:var(--apt-text)}.info-value.highlight[data-v-a67ded24]{color:var(--apt-primary)}.occupants-grid[data-v-a67ded24]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px}.occupant-card[data-v-a67ded24]{display:flex;align-items:center;gap:8px;padding:10px 12px;background:rgba(255,107,157,.1);border:1px solid rgba(255,107,157,.3);border-radius:8px;font-weight:600;transition:all .2s}.occupant-card.clickable[data-v-a67ded24]{cursor:pointer}.occupant-card.clickable[data-v-a67ded24]:hover{background:rgba(255,107,157,.2);border-color:var(--apt-primary);transform:translateY(-2px);box-shadow:0 4px 12px rgba(255,107,157,.3)}.occupant-icon[data-v-a67ded24]{font-size:1.3em}.occupant-name[data-v-a67ded24]{font-size:.95em}.empty-message[data-v-a67ded24]{text-align:center;padding:20px;color:var(--apt-text-secondary);opacity:.6;font-style:italic}.room-description[data-v-a67ded24]{margin:0;line-height:1.6;color:var(--apt-text);opacity:.9}.modal-footer[data-v-a67ded24]{display:flex;gap:12px;padding:20px 24px;border-top:1px solid var(--apt-border);background:rgba(0,0,0,.2)}.interaction-overlay[data-v-a67ded24]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:2000;animation:fadeIn-a67ded24 .2s ease}.interaction-panel[data-v-a67ded24]{background:var(--apt-card);border:2px solid var(--apt-primary);border-radius:16px;width:90%;max-width:500px;display:flex;flex-direction:column;box-shadow:0 8px 32px rgba(255,107,157,.5);animation:slideUp-a67ded24 .3s ease}.interaction-header[data-v-a67ded24]{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid var(--apt-border);background:rgba(255,107,157,.15)}.interaction-title[data-v-a67ded24]{display:flex;align-items:center;gap:12px;margin:0;font-size:1.3em;font-weight:700;color:var(--apt-text)}.interaction-icon[data-v-a67ded24]{font-size:1.2em}.interaction-body[data-v-a67ded24]{padding:24px;display:flex;flex-direction:column;gap:20px}.interaction-hint[data-v-a67ded24]{text-align:center;color:var(--apt-text-secondary);opacity:.7;font-style:italic;margin:0}.interaction-actions[data-v-a67ded24]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px}.interaction-actions .apt-btn[data-v-a67ded24]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:16px 12px;font-size:.95em}.interaction-actions .apt-btn span[data-v-a67ded24]:first-child{font-size:1.8em}.interaction-footer[data-v-a67ded24]{padding:16px 24px;border-top:1px solid var(--apt-border);background:rgba(0,0,0,.2);display:flex;justify-content:center}
.map-view[data-v-723e6358]{height:100%;display:flex;flex-direction:column}.subtitle[data-v-723e6358]{margin-left:auto;font-size:.75em;color:var(--apt-text-secondary);opacity:.7;font-weight:400}.apt-card-body[data-v-723e6358]{flex:1;overflow-y:auto}.floor-level[data-v-723e6358]{background:var(--apt-card);border:1px solid var(--apt-border);border-radius:12px;padding:16px;margin-bottom:16px}.floor-level[data-v-723e6358]:last-child{margin-bottom:0}.floor-title[data-v-723e6358]{font-size:1.1em;font-weight:600;margin-bottom:12px;color:var(--apt-text);display:flex;align-items:center;gap:8px}.floor-title[data-v-723e6358]::before{content:"🏢"}.floor-grid[data-v-723e6358]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;width:100%}.room-card[data-v-723e6358]{border-radius:10px;padding:10px;min-height:100px;display:flex;flex-direction:row;justify-content:space-between;align-items:stretch;gap:8px;font-size:.85em;border:2px solid hsla(0,0%,100%,.3);box-shadow:0 2px 8px rgba(0,0,0,.08);cursor:pointer;transition:all .2s;position:relative}.room-card[data-v-723e6358]:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(255,107,157,.3);border-color:var(--apt-primary)}.room-card.double-width[data-v-723e6358]{grid-column:span 2}.room-card .room-info[data-v-723e6358]{flex:1;display:flex;flex-direction:column;justify-content:center;gap:6px;text-align:left;min-width:0}.room-card .room-id[data-v-723e6358]{font-weight:700;font-size:1.1em;color:var(--apt-text);opacity:.9}.room-card .room-name[data-v-723e6358]{font-weight:600;font-size:.95em;color:var(--apt-text-secondary)}.room-card .room-occupants[data-v-723e6358]{flex-shrink:0;width:80px;display:flex;flex-direction:column;justify-content:center;align-items:center;border-left:1px solid hsla(0,0%,100%,.2);padding-left:8px}.room-card .occupants-summary[data-v-723e6358]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;padding:8px 4px;background:rgba(255,107,157,.2);border-radius:6px;text-align:center;width:100%}.room-card .summary-icon[data-v-723e6358]{font-size:1.5em}.room-card .summary-text[data-v-723e6358]{font-size:.75em;font-weight:600;color:var(--apt-text)}.room-card .occupants-list[data-v-723e6358]{display:flex;flex-direction:column;gap:4px;width:100%}.room-card .person-indicator[data-v-723e6358]{display:flex;align-items:center;gap:4px;font-size:.8em;background:hsla(0,0%,100%,.1);padding:3px 5px;border-radius:4px;white-space:nowrap}.room-card .person-icon[data-v-723e6358]{flex-shrink:0;font-size:1.2em}.room-card .person-name[data-v-723e6358]{flex:1;min-width:0;overflow:hidden;text-overflow:ellipsis}.room-card .empty-indicator[data-v-723e6358]{font-size:.75em;color:var(--apt-text-secondary);opacity:.5}.room-card.bedroom[data-v-723e6358]{background:var(--room-bedroom)}.room-card.bedroom.vacant[data-v-723e6358]{background:var(--room-bedroom-vacant);border-color:rgba(255,182,193,.8)}.room-card.empty[data-v-723e6358]{background:var(--room-empty);border-color:#5a5f6b;opacity:.7}.room-card.your[data-v-723e6358]{background:var(--room-player);border-color:#5dade2}.room-card.public-lounge[data-v-723e6358]{background:var(--room-lounge);border-color:#fbbf24}.room-card.public-gym[data-v-723e6358]{background:var(--room-gym);border-color:#34d399}.room-card.public-laundry[data-v-723e6358]{background:var(--room-laundry);border-color:#38bdf8}.room-card.custom-functional[data-v-723e6358]{background:var(--room-custom);border-color:rgba(52,211,153,.8)}
.narrative-window[data-v-aa9c1544]{height:100%;display:flex;flex-direction:column}.apt-card-body[data-v-aa9c1544]{flex:1;overflow-y:auto;padding:16px}.empty-state[data-v-aa9c1544]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--apt-dim);text-align:center;padding:40px 20px}.empty-state .empty-icon[data-v-aa9c1544]{font-size:3em;margin-bottom:16px;opacity:.5}.empty-state .empty-text[data-v-aa9c1544]{font-size:1.1em;font-weight:600;margin-bottom:8px}.empty-state .empty-hint[data-v-aa9c1544]{font-size:.85em;opacity:.7;max-width:300px}.narrative-list[data-v-aa9c1544]{display:flex;flex-direction:column;gap:12px}.narrative-entry[data-v-aa9c1544]{padding:12px;border-radius:8px;border-left:3px solid;animation:fadeIn-aa9c1544 .3s ease-in}.narrative-entry.system[data-v-aa9c1544]{background:rgba(100,100,100,.2);border-left-color:#888}.narrative-entry.action[data-v-aa9c1544]{background:rgba(52,211,153,.15);border-left-color:#34d399}.narrative-entry.dialogue[data-v-aa9c1544]{background:rgba(59,130,246,.15);border-left-color:#3b82f6}.narrative-entry.event[data-v-aa9c1544]{background:rgba(255,107,157,.15);border-left-color:var(--apt-primary)}@keyframes fadeIn-aa9c1544{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.entry-time[data-v-aa9c1544]{font-size:.75em;color:var(--apt-dim);margin-bottom:6px;font-family:"Courier New",monospace}.entry-content[data-v-aa9c1544]{font-size:.9em;line-height:1.6;color:var(--apt-text)}.entry-content[data-v-aa9c1544] strong{color:var(--apt-primary);font-weight:700}.entry-content[data-v-aa9c1544] .time-change{color:var(--apt-primary);font-weight:600}.narrative-footer[data-v-aa9c1544]{flex-shrink:0;display:flex;gap:8px;padding:12px 16px;border-top:1px solid var(--apt-border);background:rgba(0,0,0,.2)}.narrative-footer button[data-v-aa9c1544]{flex:1}.apt-btn-small[data-v-aa9c1544]{padding:8px 12px;font-size:.85em}
.profile-page[data-v-05e19d48]{height:100%;display:flex;flex-direction:column}.subtitle[data-v-05e19d48]{margin-left:auto;font-size:.75em;color:var(--apt-text-secondary);opacity:.7;font-weight:400}.apt-card-body[data-v-05e19d48]{flex:1;overflow-y:auto}.tenants-grid[data-v-05e19d48]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;padding:4px}.tenant-profile-card[data-v-05e19d48]{display:flex;align-items:center;gap:16px;padding:16px;background:hsla(0,0%,100%,.05);border:1px solid var(--apt-border);border-radius:12px;cursor:pointer;transition:all .2s}.tenant-profile-card[data-v-05e19d48]:hover{background:rgba(255,107,157,.1);border-color:var(--apt-primary);transform:translateY(-2px);box-shadow:0 4px 12px rgba(255,107,157,.2)}.tenant-avatar[data-v-05e19d48]{width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,var(--apt-primary),var(--apt-secondary));display:flex;align-items:center;justify-content:center;flex-shrink:0}.avatar-icon[data-v-05e19d48]{font-size:2em}.tenant-basic-info[data-v-05e19d48]{flex:1;min-width:0}.tenant-name[data-v-05e19d48]{margin:0 0 8px 0;font-size:1.1em;font-weight:700;color:var(--apt-text)}.tenant-meta[data-v-05e19d48]{display:flex;flex-direction:column;gap:4px}.meta-item[data-v-05e19d48]{display:flex;align-items:center;gap:6px;font-size:.85em;color:var(--apt-text-secondary)}.meta-icon[data-v-05e19d48]{font-size:1.1em}.detail-overlay[data-v-05e19d48]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn-05e19d48 .2s ease}@keyframes fadeIn-05e19d48{from{opacity:0}to{opacity:1}}.detail-panel[data-v-05e19d48]{background:var(--apt-card);border:2px solid var(--apt-border);border-radius:16px;width:90%;max-width:600px;max-height:80vh;display:flex;flex-direction:column;box-shadow:0 8px 32px rgba(0,0,0,.5);animation:slideUp-05e19d48 .3s ease}@keyframes slideUp-05e19d48{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.detail-header[data-v-05e19d48]{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid var(--apt-border);background:rgba(255,107,157,.1)}.detail-title[data-v-05e19d48]{display:flex;align-items:center;gap:12px;margin:0;font-size:1.5em;font-weight:700;color:var(--apt-text)}.detail-icon[data-v-05e19d48]{font-size:1.2em}.close-btn[data-v-05e19d48]{background:hsla(0,0%,100%,.1);border:1px solid var(--apt-border);border-radius:8px;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--apt-text);font-size:1.5em;transition:all .2s}.close-btn[data-v-05e19d48]:hover{background:rgba(255,107,157,.2);border-color:var(--apt-primary)}.detail-body[data-v-05e19d48]{flex:1;overflow-y:auto;padding:24px}.tenant-details[data-v-05e19d48]{display:flex;flex-direction:column;gap:24px}.detail-section[data-v-05e19d48]{background:hsla(0,0%,100%,.03);border:1px solid hsla(0,0%,100%,.1);border-radius:12px;padding:16px}.section-title[data-v-05e19d48]{margin:0 0 16px 0;font-size:1.1em;font-weight:600;color:var(--apt-primary)}.info-grid[data-v-05e19d48]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.info-item[data-v-05e19d48]{display:flex;flex-direction:column;gap:4px}.info-label[data-v-05e19d48]{font-size:.85em;color:var(--apt-text-secondary);opacity:.8}.info-value[data-v-05e19d48]{font-size:1em;font-weight:600;color:var(--apt-text)}.info-value.highlight[data-v-05e19d48]{color:var(--apt-primary)}.memories-list[data-v-05e19d48],.schedule-list[data-v-05e19d48]{display:flex;flex-direction:column;gap:12px}.memory-item[data-v-05e19d48]{display:flex;align-items:flex-start;gap:10px;padding:10px;background:hsla(0,0%,100%,.05);border-radius:8px}.memory-icon[data-v-05e19d48]{font-size:1.2em;flex-shrink:0}.memory-text[data-v-05e19d48]{flex:1;line-height:1.5;color:var(--apt-text)}.schedule-item[data-v-05e19d48]{display:grid;grid-template-columns:80px 1fr auto;gap:12px;align-items:center;padding:10px;background:hsla(0,0%,100%,.05);border-radius:8px}.schedule-time[data-v-05e19d48]{font-weight:700;color:var(--apt-primary);font-size:.9em}.schedule-activity[data-v-05e19d48]{color:var(--apt-text);font-weight:600}.schedule-location[data-v-05e19d48]{font-size:.85em;color:var(--apt-text-secondary);opacity:.8}.empty-message[data-v-05e19d48]{text-align:center;padding:20px;color:var(--apt-text-secondary);opacity:.6;font-style:italic}.detail-footer[data-v-05e19d48]{display:flex;gap:12px;padding:20px 24px;border-top:1px solid var(--apt-border);background:rgba(0,0,0,.2)}
:root{--apt-primary:#ff6b9d;--apt-secondary:#c44569;--apt-bg:#1a1a2e;--apt-card:#16213e;--apt-border:rgba(255,107,157,0.2);--apt-text:#e8eaf6;--apt-dim:#e5e7eb;--room-bedroom:linear-gradient(135deg,#592e39 0%,#7a4053 100%);--room-bedroom-vacant:linear-gradient(135deg,rgba(255,182,193,0.6) 0%,rgba(255,192,203,0.7) 100%);--room-empty:linear-gradient(135deg,#3d3f47 0%,#4a4f5a 100%);--room-player:linear-gradient(135deg,#2e5266 0%,#3a6d8c 100%);--room-lounge:linear-gradient(135deg,#d97706 0%,#f59e0b 100%);--room-gym:linear-gradient(135deg,#059669 0%,#10b981 100%);--room-laundry:linear-gradient(135deg,#0284c7 0%,#0ea5e9 100%);--room-custom:linear-gradient(135deg,rgba(16,185,129,0.6) 0%,rgba(52,211,153,0.7) 100%)}#game-container *{box-sizing:border-box}.custom-scrollbar::-webkit-scrollbar{width:8px}.custom-scrollbar::-webkit-scrollbar-track{background:hsla(0,0%,100%,.05)}.custom-scrollbar::-webkit-scrollbar-thumb{background:var(--apt-primary);border-radius:4px}.apt-card{background:var(--apt-card);border:1px solid var(--apt-border);border-radius:10px;overflow:hidden}.apt-card-title{display:flex;align-items:center;gap:8px;padding:12px 16px;background:rgba(255,107,157,.15);font-weight:600;font-size:16px;color:var(--apt-text)}.apt-card-body{padding:16px}.apt-btn{padding:10px 20px;background:linear-gradient(135deg,var(--apt-primary) 0%,var(--apt-secondary) 100%);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:600;transition:all .2s;box-shadow:0 2px 8px rgba(255,107,157,.3)}.apt-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(255,107,157,.5)}.apt-btn:active{transform:translateY(0)}.apt-btn:disabled{opacity:.5;cursor:not-allowed;transform:none}.apt-btn-secondary{background:hsla(0,0%,100%,.1);border:1px solid var(--apt-border)}.apt-btn-secondary:hover{background:hsla(0,0%,100%,.15)}#app-container{width:100%;height:100%;min-width:800px;min-height:600px;color:var(--apt-text);background-color:var(--apt-bg);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;padding:16px;box-sizing:border-box;overflow:hidden;display:flex;align-items:center;justify-content:center}.main-card{display:flex;flex-direction:column;width:100%;height:100%;max-width:1400px;max-height:900px;margin:0 auto}.header-bar{display:flex;flex-direction:column;gap:4px;padding:12px 20px;background:linear-gradient(135deg,#ff6b9d,#c44569);border-bottom:none;flex-shrink:0;border-radius:12px 12px 0 0}.header-title{display:flex;align-items:center;gap:8px}.title-icon{font-size:1.5em;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.3))}.title-text{font-size:1.3em;font-weight:700;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.3)}.header-info-line{display:flex;align-items:center;gap:8px;font-size:.9em;color:hsla(0,0%,100%,.95);margin-left:32px}.info-item{white-space:nowrap}.info-separator{color:hsla(0,0%,100%,.6);font-weight:300}@media (max-width:600px){.header-bar{padding:10px 16px}.title-icon{font-size:1.2em}.title-text{font-size:1.1em}.header-info-line{font-size:.8em;margin-left:28px;flex-wrap:wrap}}.tab-content{flex:1;overflow:hidden;padding:16px;box-sizing:border-box}.tab-pane{width:100%;height:100%;overflow:auto;box-sizing:border-box}.tab-buttons{display:flex;justify-content:space-around;align-items:center;background:rgba(0,0,0,.2);border-top:1px solid var(--apt-border);padding:12px 16px;gap:8px}.tab-btn{flex:1;display:flex;flex-direction:row;align-items:center;justify-content:center;gap:8px;padding:10px 16px;background:hsla(0,0%,100%,.05);border:1px solid rgba(0,0,0,0);border-radius:8px;color:var(--apt-text-secondary);cursor:pointer;transition:all .2s ease;font-size:14px;font-weight:500;min-width:100px}.tab-btn:hover{background:hsla(0,0%,100%,.1);border-color:rgba(255,107,157,.5);color:var(--apt-text)}.tab-btn.active{background:linear-gradient(135deg,var(--apt-primary) 0%,var(--apt-secondary) 100%);border-color:var(--apt-primary);color:#fff;box-shadow:0 2px 8px rgba(255,107,157,.4)}.tab-btn.active .tab-icon{transform:scale(1.1)}.tab-btn:active{transform:scale(0.98)}.tab-icon{font-size:18px;transition:transform .2s ease}.tab-label{font-size:14px;white-space:nowrap;font-weight:600}@media (max-width:600px){.tab-btn{min-width:70px;padding:8px 12px;gap:6px}.tab-icon{font-size:16px}.tab-label{font-size:12px}}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body></html>