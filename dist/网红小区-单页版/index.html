<!doctype html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><script type="module">import{createPinia as e,defineStore as t}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';import{klona as n}from'https://testingcf.jsdelivr.net/npm/klona/+esm';var a={42:(e,t)=>{t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,a]of t)n[e]=a;return n}}},o={};function c(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return a[e](n,n.exports,c),n.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const l=Vue,r={年份:'2025年',日期:'10月28日',星期:'星期二',时间:'08:00',地点:'东海市·荟萃城'},s={楼层配置:{三楼:{显示名称:'三楼',顺序:3},二楼:{显示名称:'二楼',顺序:2},一楼:{显示名称:'一楼',顺序:1}},房间列表:{101:{类型:'公共客厅',名称:'101',描述:'公共客厅，配备会客区和用餐区，免费对所有租客开放',布局:{楼层:'一楼',位置:'A区'},功能区:'会客区、用餐区'},102:{类型:'公共客厅',名称:'102',描述:'公共客厅，配备休息区和娱乐区，免费对所有租客开放',布局:{楼层:'一楼',位置:'B区'},功能区:'休息区、娱乐区'},103:{类型:'健身房',名称:'103',描述:'公共健身房，配备健身设备和瑜伽区，免费对所有租客开放',布局:{楼层:'一楼',位置:'C区'},功能区:'健身设备区、瑜伽区'},104:{类型:'健身房',名称:'104',描述:'公共健身房舞蹈区和洗衣间，免费对所有租客开放',布局:{楼层:'一楼',位置:'D区'},功能区:'舞蹈区、洗衣设备'},201:{类型:'套间',名称:'201',住户:'未知',描述:'一室一厅一卫一厨，35-50㎡个人公寓',布局:{楼层:'二楼',位置:'A区'}},202:{类型:'套间',名称:'202',住户:'未知',描述:'一室一厅一卫一厨，35-50㎡个人公寓',布局:{楼层:'二楼',位置:'B区'}},203:{类型:'您的房间',名称:'203',住户:'<user>',描述:'一室一厅一卫一厨，房东自住公寓',布局:{楼层:'二楼',位置:'C区'}},204:{类型:'洗衣间',名称:'204',描述:'公共洗衣间，配备洗衣机和烘干机，免费对所有租客开放',布局:{楼层:'二楼',位置:'D区'},功能区:'洗衣设备、烘干设备'},301:{类型:'套间',名称:'301',住户:'未知',描述:'一室一厅一卫一厨，35-50㎡个人公寓',布局:{楼层:'三楼',位置:'A区'}},302:{类型:'套间',名称:'302',住户:'未知',描述:'一室一厅一卫一厨，35-50㎡个人公寓',布局:{楼层:'三楼',位置:'B区'}},303:{类型:'套间',名称:'303',住户:'未知',描述:'一室一厅一卫一厨，35-50㎡个人公寓',布局:{楼层:'三楼',位置:'C区'}},304:{类型:'洗衣间',名称:'304',描述:'公共洗衣间，配备洗衣机和烘干机，免费对所有租客开放',布局:{楼层:'三楼',位置:'D区'},功能区:'洗衣设备、烘干设备'}}},i={林悦:{年龄:24,外貌:'清秀甜美的面容，身材苗条，腰细腿长。留着齐肩的黑色短发，皮肤白皙，眼神清澈明亮。胸部B罩杯，臀部紧致有型。',职业:'舞蹈博主',性格:'开朗、活泼、自律、热爱生活',恋情:'单身',内心:'想通过努力成为知名舞蹈博主',状态:'刚刚起床，正在洗漱',穿搭:'粉色运动背心和黑色瑜伽裤',好感度:50,性欲:20,入住日期:'10月1日',入住天数:27,当前位置:'201',创作内容:'舞蹈教学视频、日常跳舞vlog',关系:{'<user>':'房东'},schedule:[{startTime:'06:00',endTime:'08:00',location:'201',activity:'起床、洗漱、准备'},{startTime:'08:00',endTime:'09:00',location:'101',activity:'早餐'},{startTime:'09:00',endTime:'11:00',location:'104',activity:'舞蹈练习'},{startTime:'11:00',endTime:'13:00',location:'201',activity:'休息、拍摄视频'},{startTime:'13:00',endTime:'14:00',location:'101',activity:'午餐'},{startTime:'14:00',endTime:'17:00',location:'201',activity:'剪辑视频、直播'},{startTime:'17:00',endTime:'19:00',location:'104',activity:'晚间舞蹈练习'},{startTime:'19:00',endTime:'20:00',location:'101',activity:'晚餐'},{startTime:'20:00',endTime:'22:00',location:'102',activity:'放松娱乐'},{startTime:'22:00',endTime:'06:00',location:'201',activity:'洗澡、睡觉'}]},苏婉:{年龄:26,外貌:'成熟知性的气质，身材高挑匀称，长发披肩。五官精致，眼神温柔。胸部C罩杯，体态优雅。',职业:'健身博主',性格:'自律、友善、专业、温和',恋情:'单身',内心:'希望帮助更多人建立健康的生活方式',状态:'正在健身房进行晨练',穿搭:'黑色运动紧身衣和灰色运动短裤',好感度:50,性欲:15,入住日期:'10月5日',入住天数:23,当前位置:'103',创作内容:'健身教程、营养指导、身材管理',关系:{'<user>':'房东'},schedule:[{startTime:'05:30',endTime:'07:00',location:'103',activity:'晨练'},{startTime:'07:00',endTime:'08:00',location:'302',activity:'洗澡、准备'},{startTime:'08:00',endTime:'09:00',location:'101',activity:'健康早餐'},{startTime:'09:00',endTime:'12:00',location:'302',activity:'拍摄健身教程'},{startTime:'12:00',endTime:'13:00',location:'101',activity:'午餐'},{startTime:'13:00',endTime:'15:00',location:'302',activity:'休息、剪辑视频'},{startTime:'15:00',endTime:'17:00',location:'103',activity:'下午训练课'},{startTime:'17:00',endTime:'18:00',location:'302',activity:'洗澡、整理'},{startTime:'18:00',endTime:'19:00',location:'101',activity:'晚餐'},{startTime:'19:00',endTime:'21:00',location:'302',activity:'直播、互动'},{startTime:'21:00',endTime:'22:00',location:'102',activity:'放松、社交'},{startTime:'22:00',endTime:'05:30',location:'302',activity:'睡眠'}]}};function d(e){const[t,n]=e.split(':').map(Number);return 60*t+n}function m(e,t){return function(e){const t=e%1440,n=t%60;return`${Math.floor(t/60).toString().padStart(2,'0')}:${n.toString().padStart(2,'0')}`}(d(e)+60*t)}function p(e,t,n){const a=d(e),o=d(t);let c=d(n);return c<=o&&(c+=1440,a<o)?a<=c-1440:a>=o&&a<c}function u(e,t){for(const n of t)if(p(e,n.startTime,n.endTime))return n.location;return null}const v=t('game',()=>{const e=(0,l.ref)(r),t=(0,l.ref)(s),n=(0,l.ref)(i),a=(0,l.ref)({currentLocation:'203'});return{world:e,apartments:t,tenants:n,player:a,advanceTime:function(t){console.log(`推进时间 ${t} 小时...`);const a=e.value.时间,o=m(a,t);e.value.时间=o,console.log(`时间从 ${a} 推进到 ${o}`);for(const[e,t]of Object.entries(n.value)){const n=u(o,t.schedule);if(n&&n!==t.当前位置){const a=t.当前位置;t.当前位置=n,console.log(`${e} 从 ${a} 移动到 ${n}`);const c=t.schedule.find(e=>p(o,e.startTime,e.endTime));c&&c.activity&&(t.状态=c.activity)}else n&&console.log(`${e} 仍在 ${n}`)}},interactWithTenant:async function(e){console.log(`与 ${e} 互动...`)}}}),E={class:'status-bar apt-card'},y={class:'apt-card-body'},V={class:'status-section'},N={class:'time-display'},k={class:'time-large'},f={class:'date-info'},g={class:'status-section'},b={class:'info-row'},B={class:'value'},T={class:'info-row'},C={class:'value'},h={key:0,class:'info-row'},S={class:'value'},w={class:'status-section'},D={class:'info-row'},L={class:'value highlight'},j={key:0,class:'nearby-tenants'},O={key:1,class:'info-text'},A=(0,l.defineComponent)({__name:'StatusBar',setup(e){const t=v(),n=(0,l.computed)(()=>Object.keys(t.tenants).length),a=(0,l.computed)(()=>{const e=t.player.currentLocation;return t.apartments.房间列表[e]||null}),o=(0,l.computed)(()=>{const e=t.player.currentLocation;return Object.entries(t.tenants).filter(([_,t])=>t.当前位置===e).map(([e])=>e)});return(e,c)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',E,[c[8]||(c[8]=(0,l.createElementVNode)('div',{class:'apt-card-title'},[(0,l.createElementVNode)('span',null,'📊'),(0,l.createElementVNode)('span',null,'游戏状态')],-1)),(0,l.createElementVNode)('div',y,[(0,l.createCommentVNode)(' 时间信息 '),(0,l.createElementVNode)('div',V,[c[0]||(c[0]=(0,l.createElementVNode)('div',{class:'section-title'},'⏰ 当前时间',-1)),(0,l.createElementVNode)('div',N,[(0,l.createElementVNode)('div',k,(0,l.toDisplayString)((0,l.unref)(t).world.时间),1),(0,l.createElementVNode)('div',f,(0,l.toDisplayString)((0,l.unref)(t).world.年份)+' '+(0,l.toDisplayString)((0,l.unref)(t).world.日期)+' '+(0,l.toDisplayString)((0,l.unref)(t).world.星期),1)])]),(0,l.createCommentVNode)(' 位置信息 '),(0,l.createElementVNode)('div',g,[c[4]||(c[4]=(0,l.createElementVNode)('div',{class:'section-title'},'📍 位置信息',-1)),(0,l.createElementVNode)('div',b,[c[1]||(c[1]=(0,l.createElementVNode)('span',{class:'label'},'所在地:',-1)),(0,l.createElementVNode)('span',B,(0,l.toDisplayString)((0,l.unref)(t).world.地点),1)]),(0,l.createElementVNode)('div',T,[c[2]||(c[2]=(0,l.createElementVNode)('span',{class:'label'},'当前房间:',-1)),(0,l.createElementVNode)('span',C,(0,l.toDisplayString)((0,l.unref)(t).player.currentLocation),1)]),a.value?((0,l.openBlock)(),(0,l.createElementBlock)('div',h,[c[3]||(c[3]=(0,l.createElementVNode)('span',{class:'label'},'房间类型:',-1)),(0,l.createElementVNode)('span',S,(0,l.toDisplayString)(a.value.类型),1)])):(0,l.createCommentVNode)('v-if',!0)]),(0,l.createCommentVNode)(' 租客统计 '),(0,l.createElementVNode)('div',w,[c[7]||(c[7]=(0,l.createElementVNode)('div',{class:'section-title'},'👥 租客统计',-1)),(0,l.createElementVNode)('div',D,[c[5]||(c[5]=(0,l.createElementVNode)('span',{class:'label'},'总租客数:',-1)),(0,l.createElementVNode)('span',L,(0,l.toDisplayString)(n.value),1)]),o.value.length>0?((0,l.openBlock)(),(0,l.createElementBlock)('div',j,[c[6]||(c[6]=(0,l.createElementVNode)('div',{class:'subsection-title'},'附近的租客:',-1)),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.value,e=>((0,l.openBlock)(),(0,l.createElementBlock)('div',{key:e,class:'tenant-tag'},' 👤 '+(0,l.toDisplayString)(e),1))),128))])):((0,l.openBlock)(),(0,l.createElementBlock)('div',O,' 当前房间没有其他人 '))])])]))}});var x=c(42);const M=(0,x.A)(A,[['__scopeId','data-v-3e811dd0']]),F={class:'action-panel apt-card'},I={class:'apt-card-body'},P={class:'action-section'},H={class:'button-grid'},W={class:'action-section'},q={class:'room-select-grid'},G=['onClick','disabled'],J={class:'room-icon'},K={class:'room-label'},Q={class:'room-type-label'},R={key:0,class:'action-section'},U={class:'tenant-interaction'},X={class:'tenant-interact-info'},Y={class:'tenant-name'},Z=['onClick'],ee=(0,l.defineComponent)({__name:'ActionPanel',setup(e){const t=v(),n=(0,l.computed)(()=>{const e={};for(const[n,a]of Object.entries(t.apartments.房间列表))'空房间'!==a.类型&&(e[n]=a);return e}),a=(0,l.computed)(()=>{const e=t.player.currentLocation;return Object.entries(t.tenants).filter(([_,t])=>t.当前位置===e).map(([e])=>e)});function o(e){t.advanceTime(e)}return(e,c)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',F,[c[12]||(c[12]=(0,l.createElementVNode)('div',{class:'apt-card-title'},[(0,l.createElementVNode)('span',null,'🎮'),(0,l.createElementVNode)('span',null,'行动面板')],-1)),(0,l.createElementVNode)('div',I,[(0,l.createCommentVNode)(' 时间控制区 '),(0,l.createElementVNode)('div',P,[c[8]||(c[8]=(0,l.createElementVNode)('div',{class:'section-title'},'⏳ 时间控制',-1)),(0,l.createElementVNode)('div',H,[(0,l.createElementVNode)('button',{class:'apt-btn',onClick:c[0]||(c[0]=e=>o(1))},[...c[4]||(c[4]=[(0,l.createElementVNode)('span',{class:'btn-icon'},'⏩',-1),(0,l.createElementVNode)('span',null,'推进 1 小时',-1)])]),(0,l.createElementVNode)('button',{class:'apt-btn',onClick:c[1]||(c[1]=e=>o(2))},[...c[5]||(c[5]=[(0,l.createElementVNode)('span',{class:'btn-icon'},'⏩⏩',-1),(0,l.createElementVNode)('span',null,'推进 2 小时',-1)])]),(0,l.createElementVNode)('button',{class:'apt-btn',onClick:c[2]||(c[2]=e=>o(6))},[...c[6]||(c[6]=[(0,l.createElementVNode)('span',{class:'btn-icon'},'⏰',-1),(0,l.createElementVNode)('span',null,'推进 6 小时',-1)])]),(0,l.createElementVNode)('button',{class:'apt-btn apt-btn-secondary',onClick:c[3]||(c[3]=e=>o(12))},[...c[7]||(c[7]=[(0,l.createElementVNode)('span',{class:'btn-icon'},'🌙',-1),(0,l.createElementVNode)('span',null,'推进 12 小时',-1)])])])]),(0,l.createCommentVNode)(' 移动控制区 '),(0,l.createElementVNode)('div',W,[c[9]||(c[9]=(0,l.createElementVNode)('div',{class:'section-title'},'🚶 房间移动',-1)),(0,l.createElementVNode)('div',q,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.value,(e,n)=>{return(0,l.openBlock)(),(0,l.createElementBlock)('button',{key:n,class:(0,l.normalizeClass)(['room-btn',{active:n===(0,l.unref)(t).player.currentLocation}]),onClick:e=>function(e){t.player.currentLocation=e,console.log(`移动到房间: ${e}`)}(n),disabled:n===(0,l.unref)(t).player.currentLocation},[(0,l.createElementVNode)('span',J,(0,l.toDisplayString)((a=e.类型,{套间:'🛏️',您的房间:'🏠',公共客厅:'🛋️',健身房:'💪',洗衣间:'🧺',空房间:'📦'}[a]||'🚪')),1),(0,l.createElementVNode)('span',K,(0,l.toDisplayString)(n),1),(0,l.createElementVNode)('span',Q,(0,l.toDisplayString)(e.类型),1)],10,G);var a}),128))])]),(0,l.createCommentVNode)(' 互动区 '),a.value.length>0?((0,l.openBlock)(),(0,l.createElementBlock)('div',R,[c[11]||(c[11]=(0,l.createElementVNode)('div',{class:'section-title'},'💬 互动',-1)),(0,l.createElementVNode)('div',U,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(a.value,e=>((0,l.openBlock)(),(0,l.createElementBlock)('div',{key:e,class:'tenant-interact-card'},[(0,l.createElementVNode)('div',X,[c[10]||(c[10]=(0,l.createElementVNode)('span',{class:'tenant-icon'},'👤',-1)),(0,l.createElementVNode)('span',Y,(0,l.toDisplayString)(e),1)]),(0,l.createElementVNode)('button',{class:'apt-btn apt-btn-small',onClick:n=>{return a=e,void t.interactWithTenant(a);var a}},' 互动 ',8,Z)]))),128))])])):(0,l.createCommentVNode)('v-if',!0)])]))}}),te=(0,x.A)(ee,[['__scopeId','data-v-7780554d']]),ne=_;var ae=c.n(ne);const oe={class:'map-view apt-card'},ce={class:'apt-card-body custom-scrollbar'},le={class:'floor-title'},re={class:'floor-grid'},se=['onClick'],ie={class:'room-name'},de={class:'room-type'},me={key:0,class:'room-occupant'},pe={key:1,class:'room-people'},ue=(0,l.defineComponent)({__name:'MapView',setup(e){const t=v(),n=(0,l.computed)(()=>{const e=t.apartments.楼层配置;return ae().orderBy(Object.entries(e).map(([e,t])=>({key:e,...t})),['顺序'],['desc']).reduce((e,t)=>(e[t.key]=t,e),{})});function a(e){const n=t.apartments.房间列表;return ae().pickBy(n,t=>t.布局?.楼层===e)}function o(e){const t=e.类型;return'套间'===t?'未知'===e.住户?'bedroom vacant':'bedroom':'您的房间'===t?'your':'公共客厅'===t?'public-lounge':'健身房'===t?'public-gym':'洗衣间'===t?'public-laundry':'空房间'===t?'empty':'custom-functional'}function c(e){const n=[];t.player.currentLocation===e&&n.push({name:'你',icon:'👤'});for(const[a,o]of Object.entries(t.tenants))o.当前位置===e&&n.push({name:a,icon:'👥'});return n}return(e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',oe,[t[0]||(t[0]=(0,l.createElementVNode)('div',{class:'apt-card-title'},[(0,l.createElementVNode)('span',null,'🏢'),(0,l.createElementVNode)('span',null,'公寓地图')],-1)),(0,l.createElementVNode)('div',ce,[(0,l.createCommentVNode)(' 按楼层倒序显示（三楼在最上面） '),((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(n.value,(e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',{key:t,class:'floor-level'},[(0,l.createElementVNode)('div',le,(0,l.toDisplayString)(e.显示名称),1),(0,l.createElementVNode)('div',re,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(a(t),(e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',{key:t,class:(0,l.normalizeClass)(['room-card',o(e)]),onClick:n=>function(e,t){console.log('点击房间:',e,t)}(t,e)},[(0,l.createElementVNode)('div',ie,(0,l.toDisplayString)(t),1),(0,l.createElementVNode)('div',de,(0,l.toDisplayString)(e.类型),1),e.住户?((0,l.openBlock)(),(0,l.createElementBlock)('div',me,(0,l.toDisplayString)(e.住户),1)):(0,l.createCommentVNode)('v-if',!0),(0,l.createCommentVNode)(' 显示当前在房间里的角色 '),c(t).length>0?((0,l.openBlock)(),(0,l.createElementBlock)('div',pe,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(c(t),e=>((0,l.openBlock)(),(0,l.createElementBlock)('div',{key:e.name,class:'person-indicator'},(0,l.toDisplayString)(e.icon)+' '+(0,l.toDisplayString)(e.name),1))),128))])):(0,l.createCommentVNode)('v-if',!0)],10,se))),128))])]))),128))])]))}}),ve=(0,x.A)(ue,[['__scopeId','data-v-3ed63694']]),Ee={class:'narrative-window apt-card'},ye={key:0,class:'empty-state'},Ve={key:1,class:'narrative-list'},Ne={class:'entry-time'},ke=['innerHTML'],fe=(0,l.defineComponent)({__name:'NarrativeWindow',setup(e,{expose:t}){const n=v(),a=(0,l.ref)([]),o=(0,l.ref)(null);function c(e,t='system'){const o={time:n.world.时间,content:e,type:t};a.value.push(o),(0,l.nextTick)(()=>{s()})}function r(){a.value=[]}function s(){o.value&&(o.value.scrollTop=o.value.scrollHeight)}let i=n.world.时间;return(0,l.watch)(()=>n.world.时间,e=>{e!==i&&(c(`<span class="time-change">⏰ 时间推进到 ${e}</span>`,'system'),i=e)}),c('<strong>欢迎来到网红小区</strong><br>\n  这是一个充满活力的社区，住着许多从事内容创作的年轻租客。<br>\n  作为房东，你可以与租客互动，管理公寓，体验精彩的故事。','event'),t({addNarrativeEntry:c,clearNarrative:r}),(e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',Ee,[t[3]||(t[3]=(0,l.createElementVNode)('div',{class:'apt-card-title'},[(0,l.createElementVNode)('span',null,'📖'),(0,l.createElementVNode)('span',null,'叙事窗口')],-1)),(0,l.createElementVNode)('div',{class:'apt-card-body custom-scrollbar',ref_key:'narrativeBody',ref:o},[0===a.value.length?((0,l.openBlock)(),(0,l.createElementBlock)('div',ye,[...t[0]||(t[0]=[(0,l.createElementVNode)('div',{class:'empty-icon'},'📝',-1),(0,l.createElementVNode)('div',{class:'empty-text'},'暂无叙事内容',-1),(0,l.createElementVNode)('div',{class:'empty-hint'},'与租客互动或推进时间时，叙事内容将显示在这里',-1)])])):((0,l.openBlock)(),(0,l.createElementBlock)('div',Ve,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(a.value,(e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',{key:t,class:(0,l.normalizeClass)(['narrative-entry',e.type])},[(0,l.createElementVNode)('div',Ne,(0,l.toDisplayString)(e.time),1),(0,l.createElementVNode)('div',{class:'entry-content',innerHTML:e.content},null,8,ke)],2))),128))]))],512),(0,l.createCommentVNode)(' 底部工具栏 '),(0,l.createElementVNode)('div',{class:'narrative-footer'},[(0,l.createElementVNode)('button',{class:'apt-btn apt-btn-small apt-btn-secondary',onClick:r},[...t[1]||(t[1]=[(0,l.createElementVNode)('span',null,'🗑️ 清空',-1)])]),(0,l.createElementVNode)('button',{class:'apt-btn apt-btn-small apt-btn-secondary',onClick:s},[...t[2]||(t[2]=[(0,l.createElementVNode)('span',null,'⬇️ 滚到底部',-1)])])])]))}}),ge=(0,x.A)(fe,[['__scopeId','data-v-53b76b14']]),be={id:'game-container'},Be={class:'game-layout'},Te={class:'left-panel'},Ce={class:'center-panel'},he={class:'right-panel'},Se=(0,l.defineComponent)({__name:'App',setup(e){const t=v();return(0,l.onMounted)(()=>{const e=getMessageId();if(!e)return void console.warn('无法获取消息ID, 状态持久化将不会生效.');const n=getVariables({type:'message',message_id:e});n&&Object.keys(n).length>0?(console.log('发现已保存的状态, 正在恢复...'),t.$patch(n)):console.log('未发现已保存的状态, 使用初始状态.')}),(0,l.watchEffect)(()=>{const e=getMessageId();if(!e)return;const a=n(t.$state);replaceVariables(a,{type:'message',message_id:e})}),(e,t)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',be,[(0,l.createCommentVNode)(' 游戏主界面 '),(0,l.createElementVNode)('div',Be,[(0,l.createCommentVNode)(' 左侧面板 '),(0,l.createElementVNode)('div',Te,[(0,l.createVNode)(M),(0,l.createVNode)(te)]),(0,l.createCommentVNode)(' 中间地图区域 '),(0,l.createElementVNode)('div',Ce,[(0,l.createVNode)(ve)]),(0,l.createCommentVNode)(' 右侧叙事窗口 '),(0,l.createElementVNode)('div',he,[(0,l.createVNode)(ge)])])]))}});$(()=>{console.log('“网红小区-单页版”脚本加载...');const t=e(),n=(0,l.createApp)(Se);n.use(t),n.mount('#app'),console.log('Vue 应用已成功挂载.')}),$(window).on('pagehide',()=>{console.log('“网红小区-单页版”脚本卸载.')});
//# sourceMappingURL=index.js.map</script><style>.status-bar[data-v-3e811dd0]{height:100%;display:flex;flex-direction:column}.apt-card-body[data-v-3e811dd0]{flex:1;overflow-y:auto}.status-section[data-v-3e811dd0]{margin-bottom:20px;padding-bottom:16px;border-bottom:1px solid hsla(0,0%,100%,.1)}.status-section[data-v-3e811dd0]:last-child{border-bottom:none;margin-bottom:0}.section-title[data-v-3e811dd0]{font-size:.95em;font-weight:600;color:var(--apt-primary);margin-bottom:12px;display:flex;align-items:center;gap:6px}.subsection-title[data-v-3e811dd0]{font-size:.85em;color:var(--apt-dim);margin-bottom:8px;margin-top:8px}.time-display[data-v-3e811dd0]{text-align:center;padding:12px;background:rgba(255,107,157,.1);border-radius:8px}.time-large[data-v-3e811dd0]{font-size:2em;font-weight:700;color:var(--apt-primary);margin-bottom:4px;font-family:"Courier New",monospace}.date-info[data-v-3e811dd0]{font-size:.9em;color:var(--apt-text);opacity:.9}.info-row[data-v-3e811dd0]{display:flex;justify-content:space-between;align-items:center;padding:8px 0;font-size:.9em}.info-row .label[data-v-3e811dd0]{color:var(--apt-dim)}.info-row .value[data-v-3e811dd0]{color:var(--apt-text);font-weight:500}.info-row .value.highlight[data-v-3e811dd0]{color:var(--apt-primary);font-weight:700;font-size:1.1em}.info-text[data-v-3e811dd0]{font-size:.85em;color:var(--apt-dim);font-style:italic;text-align:center;padding:8px}.nearby-tenants[data-v-3e811dd0]{margin-top:8px}.tenant-tag[data-v-3e811dd0]{display:inline-block;padding:4px 10px;margin:4px 4px 4px 0;background:rgba(255,107,157,.2);border:1px solid var(--apt-border);border-radius:12px;font-size:.85em;color:var(--apt-text)}
.action-panel[data-v-7780554d]{height:100%;display:flex;flex-direction:column}.apt-card-body[data-v-7780554d]{flex:1;overflow-y:auto}.action-section[data-v-7780554d]{margin-bottom:24px}.action-section[data-v-7780554d]:last-child{margin-bottom:0}.section-title[data-v-7780554d]{font-size:.95em;font-weight:600;color:var(--apt-primary);margin-bottom:12px;display:flex;align-items:center;gap:6px}.button-grid[data-v-7780554d]{display:grid;grid-template-columns:1fr 1fr;gap:10px}.apt-btn[data-v-7780554d]{display:flex;flex-direction:column;align-items:center;gap:4px;padding:12px 8px;font-size:.85em}.apt-btn .btn-icon[data-v-7780554d]{font-size:1.3em}.apt-btn-small[data-v-7780554d]{padding:6px 12px;font-size:.8em}.room-select-grid[data-v-7780554d]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;max-height:300px;overflow-y:auto}.room-btn[data-v-7780554d]{display:flex;flex-direction:column;align-items:center;gap:4px;padding:10px 8px;background:hsla(0,0%,100%,.05);border:1px solid var(--apt-border);border-radius:8px;cursor:pointer;transition:all .2s;color:var(--apt-text);font-size:.8em}.room-btn[data-v-7780554d]:hover:not(:disabled){background:rgba(255,107,157,.15);border-color:var(--apt-primary);transform:translateY(-2px)}.room-btn.active[data-v-7780554d]{background:rgba(255,107,157,.2);border-color:var(--apt-primary);box-shadow:0 0 8px rgba(255,107,157,.3)}.room-btn[data-v-7780554d]:disabled{opacity:.6;cursor:not-allowed}.room-btn .room-icon[data-v-7780554d]{font-size:1.5em}.room-btn .room-label[data-v-7780554d]{font-weight:600;font-size:.95em}.room-btn .room-type-label[data-v-7780554d]{font-size:.75em;opacity:.8}.tenant-interaction[data-v-7780554d]{display:flex;flex-direction:column;gap:8px}.tenant-interact-card[data-v-7780554d]{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:hsla(0,0%,100%,.05);border:1px solid var(--apt-border);border-radius:8px;transition:all .2s}.tenant-interact-card[data-v-7780554d]:hover{background:rgba(255,107,157,.1);border-color:var(--apt-primary)}.tenant-interact-info[data-v-7780554d]{display:flex;align-items:center;gap:8px}.tenant-interact-info .tenant-icon[data-v-7780554d]{font-size:1.3em}.tenant-interact-info .tenant-name[data-v-7780554d]{font-weight:600;color:var(--apt-text)}
.map-view[data-v-3ed63694]{height:100%;display:flex;flex-direction:column}.apt-card-body[data-v-3ed63694]{flex:1;overflow-y:auto}.floor-level[data-v-3ed63694]{background:var(--apt-card);border:1px solid var(--apt-border);border-radius:12px;padding:16px;margin-bottom:16px}.floor-level[data-v-3ed63694]:last-child{margin-bottom:0}.floor-title[data-v-3ed63694]{font-size:1.1em;font-weight:600;margin-bottom:12px;color:var(--apt-text);display:flex;align-items:center;gap:8px}.floor-title[data-v-3ed63694]::before{content:"🏢"}.floor-grid[data-v-3ed63694]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;width:100%}.room-card[data-v-3ed63694]{border-radius:10px;padding:12px 8px;min-height:100px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;font-weight:600;font-size:.85em;border:2px solid hsla(0,0%,100%,.3);box-shadow:0 2px 8px rgba(0,0,0,.08);cursor:pointer;transition:all .2s;position:relative}.room-card[data-v-3ed63694]:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(255,107,157,.3);border-color:var(--apt-primary)}.room-card.bedroom[data-v-3ed63694]{background:var(--room-bedroom)}.room-card.bedroom.vacant[data-v-3ed63694]{background:var(--room-bedroom-vacant);border-color:rgba(255,182,193,.8)}.room-card.empty[data-v-3ed63694]{background:var(--room-empty);border-color:#5a5f6b;opacity:.7}.room-card.your[data-v-3ed63694]{background:var(--room-player);border-color:#5dade2}.room-card.public-lounge[data-v-3ed63694]{background:var(--room-lounge);border-color:#fbbf24}.room-card.public-gym[data-v-3ed63694]{background:var(--room-gym);border-color:#34d399}.room-card.public-laundry[data-v-3ed63694]{background:var(--room-laundry);border-color:#38bdf8}.room-card.custom-functional[data-v-3ed63694]{background:var(--room-custom);border-color:rgba(52,211,153,.8)}.room-name[data-v-3ed63694]{font-weight:bold;font-size:1em;margin-bottom:4px}.room-type[data-v-3ed63694]{font-size:.75em;opacity:.9;margin-bottom:2px}.room-occupant[data-v-3ed63694]{font-size:.7em;color:var(--apt-dim);margin-top:2px}.room-people[data-v-3ed63694]{margin-top:8px;padding-top:8px;border-top:1px solid hsla(0,0%,100%,.2);width:100%}.person-indicator[data-v-3ed63694]{font-size:.7em;margin:2px 0;padding:2px 4px;background:rgba(0,0,0,.3);border-radius:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.narrative-window[data-v-53b76b14]{height:100%;display:flex;flex-direction:column}.apt-card-body[data-v-53b76b14]{flex:1;overflow-y:auto;padding:16px}.empty-state[data-v-53b76b14]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--apt-dim);text-align:center;padding:40px 20px}.empty-state .empty-icon[data-v-53b76b14]{font-size:3em;margin-bottom:16px;opacity:.5}.empty-state .empty-text[data-v-53b76b14]{font-size:1.1em;font-weight:600;margin-bottom:8px}.empty-state .empty-hint[data-v-53b76b14]{font-size:.85em;opacity:.7;max-width:300px}.narrative-list[data-v-53b76b14]{display:flex;flex-direction:column;gap:12px}.narrative-entry[data-v-53b76b14]{padding:12px;border-radius:8px;border-left:3px solid;animation:fadeIn-53b76b14 .3s ease-in}.narrative-entry.system[data-v-53b76b14]{background:rgba(100,100,100,.2);border-left-color:#888}.narrative-entry.action[data-v-53b76b14]{background:rgba(52,211,153,.15);border-left-color:#34d399}.narrative-entry.dialogue[data-v-53b76b14]{background:rgba(59,130,246,.15);border-left-color:#3b82f6}.narrative-entry.event[data-v-53b76b14]{background:rgba(255,107,157,.15);border-left-color:var(--apt-primary)}@keyframes fadeIn-53b76b14{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.entry-time[data-v-53b76b14]{font-size:.75em;color:var(--apt-dim);margin-bottom:6px;font-family:"Courier New",monospace}.entry-content[data-v-53b76b14]{font-size:.9em;line-height:1.6;color:var(--apt-text)}.entry-content[data-v-53b76b14] strong{color:var(--apt-primary);font-weight:700}.entry-content[data-v-53b76b14] .time-change{color:var(--apt-primary);font-weight:600}.narrative-footer[data-v-53b76b14]{flex-shrink:0;display:flex;gap:8px;padding:12px 16px;border-top:1px solid var(--apt-border);background:rgba(0,0,0,.2)}.narrative-footer button[data-v-53b76b14]{flex:1}.apt-btn-small[data-v-53b76b14]{padding:8px 12px;font-size:.85em}
:root{--apt-primary:#ff6b9d;--apt-secondary:#c44569;--apt-bg:#1a1a2e;--apt-card:#16213e;--apt-border:rgba(255,107,157,0.2);--apt-text:#e8eaf6;--apt-dim:#e5e7eb;--room-bedroom:linear-gradient(135deg,#592e39 0%,#7a4053 100%);--room-bedroom-vacant:linear-gradient(135deg,rgba(255,182,193,0.6) 0%,rgba(255,192,203,0.7) 100%);--room-empty:linear-gradient(135deg,#3d3f47 0%,#4a4f5a 100%);--room-player:linear-gradient(135deg,#2e5266 0%,#3a6d8c 100%);--room-lounge:linear-gradient(135deg,#d97706 0%,#f59e0b 100%);--room-gym:linear-gradient(135deg,#059669 0%,#10b981 100%);--room-laundry:linear-gradient(135deg,#0284c7 0%,#0ea5e9 100%);--room-custom:linear-gradient(135deg,rgba(16,185,129,0.6) 0%,rgba(52,211,153,0.7) 100%)}#game-container *{box-sizing:border-box}.custom-scrollbar::-webkit-scrollbar{width:8px}.custom-scrollbar::-webkit-scrollbar-track{background:hsla(0,0%,100%,.05)}.custom-scrollbar::-webkit-scrollbar-thumb{background:var(--apt-primary);border-radius:4px}.apt-card{background:var(--apt-card);border:1px solid var(--apt-border);border-radius:10px;overflow:hidden}.apt-card-title{display:flex;align-items:center;gap:8px;padding:12px 16px;background:rgba(255,107,157,.15);font-weight:600;font-size:16px;color:var(--apt-text)}.apt-card-body{padding:16px}.apt-btn{padding:10px 20px;background:linear-gradient(135deg,var(--apt-primary) 0%,var(--apt-secondary) 100%);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:14px;font-weight:600;transition:all .2s;box-shadow:0 2px 8px rgba(255,107,157,.3)}.apt-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(255,107,157,.5)}.apt-btn:active{transform:translateY(0)}.apt-btn:disabled{opacity:.5;cursor:not-allowed;transform:none}.apt-btn-secondary{background:hsla(0,0%,100%,.1);border:1px solid var(--apt-border)}.apt-btn-secondary:hover{background:hsla(0,0%,100%,.15)}#game-container{width:100%;min-height:600px;background:var(--apt-bg);font-family:"Microsoft YaHei","Segoe UI",sans-serif;color:var(--apt-text)}.game-layout{display:flex;width:100%;height:600px;gap:16px;padding:16px}.left-panel{width:280px;flex-shrink:0;display:flex;flex-direction:column;gap:16px}.left-panel>*{flex:1}.center-panel{flex:1;min-width:0}.right-panel{width:320px;flex-shrink:0}@media (max-width:1200px){.game-layout{flex-direction:column;height:auto}.left-panel,.center-panel,.right-panel{width:100%;min-height:400px}.left-panel>*{min-height:300px}}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body></html>