{"version":3,"file":"index.js","mappings":"qLAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,E,GCRPI,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaV,QAGrB,IAAIY,EAASL,EAAyBE,GAAY,CAGjDT,QAAS,CAAC,GAOX,OAHAa,EAAoBJ,GAAUG,EAAQA,EAAOZ,QAASQ,GAG/CI,EAAOZ,OACf,CCrBAQ,EAAoBM,EAAKF,IACxB,IAAIG,EAASH,GAAUA,EAAOI,WAC7B,IAAOJ,EAAiB,QACxB,IAAM,EAEP,OADAJ,EAAoBS,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GCLRP,EAAoBS,EAAI,CAACjB,EAASmB,KACjC,IAAI,IAAId,KAAOc,EACXX,EAAoBY,EAAED,EAAYd,KAASG,EAAoBY,EAAEpB,EAASK,IAC5EgB,OAAOC,eAAetB,EAASK,EAAK,CAAEkB,YAAY,EAAMC,IAAKL,EAAWd,MCJ3EG,EAAoBY,EAAI,CAACK,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCAlF,MAAM,EAA+BI,ICKxBC,EAAoB,CAC/B,GAAI,QACJ,GAAI,SACJ,GAAI,MACJ,GAAI,QACJ,GAAI,WAGOC,EAAyB,CACpC,KAAM,CACJ,GAAI,CAAE,KAAM,KAAM,GAAI,GACtB,GAAI,CAAE,KAAM,KAAM,GAAI,GACtB,GAAI,CAAE,KAAM,KAAM,GAAI,IAExB,KAAM,CACJ,IAAO,CAAE,GAAI,OAAQ,GAAI,MAAO,GAAI,2BAA4B,GAAI,CAAE,GAAI,KAAM,GAAI,MAAQ,IAAK,WACjG,IAAO,CAAE,GAAI,OAAQ,GAAI,MAAO,GAAI,2BAA4B,GAAI,CAAE,GAAI,KAAM,GAAI,MAAQ,IAAK,WACjG,IAAO,CAAE,GAAI,MAAO,GAAI,MAAO,GAAI,6BAA8B,GAAI,CAAE,GAAI,KAAM,GAAI,MAAQ,IAAK,aAClG,IAAO,CAAE,GAAI,MAAO,GAAI,MAAO,GAAI,yBAA0B,GAAI,CAAE,GAAI,KAAM,GAAI,MAAQ,IAAK,YAC9F,IAAO,CAAE,GAAI,KAAM,GAAI,MAAO,GAAI,KAAM,GAAI,sBAAuB,GAAI,CAAE,GAAI,KAAM,GAAI,OACvF,IAAO,CAAE,GAAI,KAAM,GAAI,MAAO,GAAI,KAAM,GAAI,sBAAuB,GAAI,CAAE,GAAI,KAAM,GAAI,OACvF,IAAO,CAAE,GAAI,OAAQ,GAAI,MAAO,GAAI,SAAU,GAAI,kBAAmB,GAAI,CAAE,GAAI,KAAM,GAAI,OACzF,IAAO,CAAE,GAAI,MAAO,GAAI,MAAO,GAAI,4BAA6B,GAAI,CAAE,GAAI,KAAM,GAAI,MAAQ,IAAK,aACjG,IAAO,CAAE,GAAI,KAAM,GAAI,MAAO,GAAI,KAAM,GAAI,sBAAuB,GAAI,CAAE,GAAI,KAAM,GAAI,OACvF,IAAO,CAAE,GAAI,KAAM,GAAI,MAAO,GAAI,KAAM,GAAI,sBAAuB,GAAI,CAAE,GAAI,KAAM,GAAI,OACvF,IAAO,CAAE,GAAI,KAAM,GAAI,MAAO,GAAI,KAAM,GAAI,sBAAuB,GAAI,CAAE,GAAI,KAAM,GAAI,OACvF,IAAO,CAAE,GAAI,MAAO,GAAI,MAAO,GAAI,4BAA6B,GAAI,CAAE,GAAI,KAAM,GAAI,MAAQ,IAAK,eA2CxFC,EAA8C,CACzD,GAAM,CACJ,GAAI,GACJ,GAAI,wDACJ,GAAI,OACJ,GAAI,gBACJ,GAAI,KACJ,GAAI,gBACJ,GAAI,YACJ,GAAI,eACJ,IAAK,GACL,GAAI,GACJ,KAAM,QACN,KAAM,GACN,KAAM,MACN,KAAM,kBACN,GAAI,CACF,SAAU,MAEZC,SAAU,CACR,CAAEC,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,YACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,MACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,QACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,WACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,MACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,WACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,UACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,MACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,QACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,WAGvE,GAAM,CACJ,GAAI,GACJ,GAAI,4CACJ,GAAI,OACJ,GAAI,cACJ,GAAI,KACJ,GAAI,mBACJ,GAAI,YACJ,GAAI,iBACJ,IAAK,GACL,GAAI,GACJ,KAAM,QACN,KAAM,GACN,KAAM,MACN,KAAM,iBACN,GAAI,CACF,SAAU,MAEZJ,SAAU,CACR,CAAEC,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,MACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,SACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,QACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,UACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,MACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,WACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,SACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,SACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,MACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,SACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,SACnE,CAAEH,UAAW,QAASC,QAAS,QAASC,SAAU,MAAOC,SAAU,SC7HzE,SAASC,EAAUC,GACjB,MAAOC,EAAOC,GAAWF,EAAQG,MAAM,KAAKC,IAAIC,QAChD,OAAe,GAARJ,EAAaC,CACtB,CAqBA,SAASI,EAASN,EAAiBC,GAGjC,OAjBF,SAAoBC,GAElB,MAAMK,EAAeL,EAAU,KAEzBM,EAAOD,EAAe,GAC5B,MAAO,GAFOE,KAAKC,MAAMH,EAAe,IAExBI,WAAWC,SAAS,EAAG,QAAQJ,EAAKG,WAAWC,SAAS,EAAG,MAC7E,CAWSC,CAFSd,EAAUC,GACW,GAARC,EAE/B,CASA,SAASa,EAAcC,EAAqBpB,EAAmBC,GAC7D,MAAMoB,EAAUjB,EAAUgB,GACpBE,EAAQlB,EAAUJ,GACxB,IAAIuB,EAAMnB,EAAUH,GAGpB,OAAIsB,GAAOD,IACTC,GAAO,KAEHF,EAAUC,GACLD,GAAWE,EAAM,KAIrBF,GAAWC,GAASD,EAAUE,CACvC,CAQA,SAASC,EAAmBJ,EAAqBrB,GAC/C,IAAK,MAAM0B,KAAS1B,EAClB,GAAIoB,EAAcC,EAAaK,EAAMzB,UAAWyB,EAAMxB,SACpD,OAAOwB,EAAMvB,SAGjB,OAAO,IACT,CAEO,MAAMwB,EAAe,EAAY,OAAQ,KAG9C,MAAMC,GAAQ,IAAAC,KAAIhC,GACZiC,GAAa,IAAAD,KAAI/B,GACjBiC,GAAU,IAAAF,KAAI9B,GAGdiC,GAAS,IAAAH,KAAI,CACjBI,gBAAiB,QA2DnB,MAAO,CACLL,QACAE,aACAC,UACAC,SACAE,YAzDF,SAAqB3B,GACnB4B,QAAQC,IAAI,QAAQ7B,WAGpB,MAAMc,EAAcO,EAAMS,MAAM,GAC1BC,EAAU1B,EAASS,EAAad,GACtCqB,EAAMS,MAAM,GAAKC,EAEjBH,QAAQC,IAAI,OAAOf,SAAmBiB,KAGtC,IAAK,MAAOC,EAAYC,KAAWrD,OAAOsD,QAAQV,EAAQM,OAAQ,CAChE,MAAMK,EAAcjB,EAAmBa,EAASE,EAAOxC,UAEvD,GAAI0C,GAAeA,IAAgBF,EAAO,KAAM,CAC9C,MAAMG,EAAcH,EAAO,KAC3BA,EAAO,KAAOE,EACdP,QAAQC,IAAI,GAAGG,OAAgBI,SAAmBD,KAGlD,MAAME,EAAgBJ,EAAOxC,SAAS6C,KAAKnB,GACzCN,EAAckB,EAASZ,EAAMzB,UAAWyB,EAAMxB,UAE5C0C,GAAiBA,EAAcxC,WACjCoC,EAAO,GAAKI,EAAcxC,SAE9B,MAAWsC,GACTP,QAAQC,IAAI,GAAGG,QAAiBG,IAEpC,CAQF,EAqBEI,mBAfFC,eAAkCC,GAChCb,QAAQC,IAAI,KAAKY,UAMnB,KChJIC,EAAa,CAAEC,MAAO,uBACtBC,EAAa,CAAED,MAAO,iBACtBE,EAAa,CAAEF,MAAO,kBACtBG,EAAa,CAAEH,MAAO,gBACtBI,EAAa,CAAEJ,MAAO,cACtBK,EAAa,CAAEL,MAAO,aACtBM,EAAa,CAAEN,MAAO,kBACtBO,EAAa,CAAEP,MAAO,YACtBQ,EAAa,CAAER,MAAO,SACtBS,EAAc,CAAET,MAAO,YACvBU,EAAc,CAAEV,MAAO,SACvBW,EAAc,CAChB1F,IAAK,EACL+E,MAAO,YAELY,EAAc,CAAEZ,MAAO,SACvBa,EAAc,CAAEb,MAAO,kBACvBc,EAAc,CAAEd,MAAO,YACvBe,EAAc,CAAEf,MAAO,mBACvBgB,EAAc,CAChB/F,IAAK,EACL+E,MAAO,kBAELiB,EAAc,CAChBhG,IAAK,EACL+E,MAAO,aAIX,GAA6B,qBAAiB,CAC1CkB,OAAQ,YACR,KAAAC,CAAMC,GACF,MAAMC,EAAQ5C,IAER6C,GAAc,IAAAC,UAAS,IAClBtF,OAAOuF,KAAKH,EAAMxC,SAAS4C,QAGhCC,GAAkB,IAAAH,UAAS,KAC7B,MAAMI,EAASN,EAAMvC,OAAOC,gBAC5B,OAAOsC,EAAMzC,WAAW,KAAK+C,IAAW,OAGtCC,GAAgB,IAAAL,UAAS,KAC3B,MAAMM,EAAiBR,EAAMvC,OAAOC,gBACpC,OAAO9C,OAAOsD,QAAQ8B,EAAMxC,SACvBiD,OAAO,EAAEC,EAAGzC,KAAYA,EAAO,OAASuC,GACxCrE,IAAI,EAAEwE,KAAUA,KAEzB,MAAO,CAACC,EAAMC,MACF,kBAAc,wBAAoB,MAAOnC,EAAY,CACzDmC,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAElC,MAAO,kBAAoB,EAC9E,wBAAoB,OAAQ,KAAM,OAClC,wBAAoB,OAAQ,KAAM,UAClC,KACJ,wBAAoB,MAAOC,EAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAOC,EAAY,CACnCgC,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAElC,MAAO,iBAAmB,UAAW,KAC5F,wBAAoB,MAAOG,EAAY,EACnC,wBAAoB,MAAOC,GAAY,sBAAiB,WAAOiB,GAAO3C,MAAM,IAAK,IACjF,wBAAoB,MAAO2B,GAAY,sBAAiB,WAAOgB,GAAO3C,MAAM,IAAM,KAAM,sBAAiB,WAAO2C,GAAO3C,MAAM,IAAM,KAAM,sBAAiB,WAAO2C,GAAO3C,MAAM,IAAK,QAG3L,wBAAoB,WACpB,wBAAoB,MAAO4B,EAAY,CACnC4B,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAElC,MAAO,iBAAmB,WAAY,KAC7F,wBAAoB,MAAOO,EAAY,CACnC2B,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAElC,MAAO,SAAW,QAAS,KACnF,wBAAoB,OAAQQ,GAAY,sBAAiB,WAAOa,GAAO3C,MAAM,IAAK,MAEtF,wBAAoB,MAAO+B,EAAa,CACpCyB,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAElC,MAAO,SAAW,SAAU,KACpF,wBAAoB,OAAQU,GAAa,sBAAiB,WAAOW,GAAOvC,OAAOC,iBAAkB,KAEpG2C,EAAqB,QACf,kBAAc,wBAAoB,MAAOf,EAAa,CACrDuB,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAElC,MAAO,SAAW,SAAU,KACpF,wBAAoB,OAAQY,GAAa,qBAAiBc,EAAgBvC,MAAM,IAAK,OAEvF,wBAAoB,QAAQ,MAEtC,wBAAoB,WACpB,wBAAoB,MAAO0B,EAAa,CACpCqB,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAElC,MAAO,iBAAmB,WAAY,KAC7F,wBAAoB,MAAOc,EAAa,CACpCoB,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAElC,MAAO,SAAW,SAAU,KACpF,wBAAoB,OAAQe,GAAa,qBAAiBO,EAAYnC,OAAQ,KAEjFyC,EAAczC,MAAMsC,OAAS,IACvB,kBAAc,wBAAoB,MAAOT,EAAa,CACrDkB,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAElC,MAAO,oBAAsB,UAAW,MAC9F,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY4B,EAAczC,MAAQG,KAC9E,kBAAc,wBAAoB,MAAO,CAC7CrE,IAAKqE,EACLU,MAAO,cACR,QAAS,qBAAiBV,GAAS,KACtC,WAEL,kBAAc,wBAAoB,MAAO2B,EAAa,sBAKjF,I,YCpGJ,MAEA,GAFiC,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBCJjE,EAAa,CAAEjB,MAAO,yBACtB,EAAa,CAAEA,MAAO,iBACtB,EAAa,CAAEA,MAAO,kBACtB,EAAa,CAAEA,MAAO,eACtB,EAAa,CAAEA,MAAO,kBACtB,EAAa,CAAEA,MAAO,oBACtB,EAAa,CAAC,UAAW,YACzB,EAAa,CAAEA,MAAO,aACtB,EAAa,CAAEA,MAAO,cACtB,EAAc,CAAEA,MAAO,mBACvB,EAAc,CAChB/E,IAAK,EACL+E,MAAO,kBAEL,EAAc,CAAEA,MAAO,sBACvB,EAAc,CAAEA,MAAO,wBACvB,EAAc,CAAEA,MAAO,eACvB,EAAc,CAAC,WAGrB,IAA6B,qBAAiB,CAC1CkB,OAAQ,cACR,KAAAC,CAAMC,GACF,MAAMC,EAAQ5C,IAER0D,GAAiB,IAAAZ,UAAS,KAC5B,MAAMa,EAAQ,CAAC,EACf,IAAK,MAAOT,EAAQU,KAASpG,OAAOsD,QAAQ8B,EAAMzC,WAAW,MACzC,QAAZyD,EAAK,KACLD,EAAMT,GAAUU,GAGxB,OAAOD,IAGLR,GAAgB,IAAAL,UAAS,KAC3B,MAAMM,EAAiBR,EAAMvC,OAAOC,gBACpC,OAAO9C,OAAOsD,QAAQ8B,EAAMxC,SACvBiD,OAAO,EAAEC,EAAGzC,KAAYA,EAAO,OAASuC,GACxCrE,IAAI,EAAEwE,KAAUA,KAGzB,SAAShD,EAAY3B,GACjBgE,EAAMrC,YAAY3B,EACtB,CAsBA,MAAO,CAAC4E,EAAMC,MACF,kBAAc,wBAAoB,MAAO,EAAY,CACzDA,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAElC,MAAO,kBAAoB,EAChF,wBAAoB,OAAQ,KAAM,OAClC,wBAAoB,OAAQ,KAAM,UAClC,KACJ,wBAAoB,MAAO,EAAY,EACnC,wBAAoB,YACpB,wBAAoB,MAAO,EAAY,CACnCkC,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAElC,MAAO,iBAAmB,UAAW,KAC5F,wBAAoB,MAAO,EAAY,EACnC,wBAAoB,SAAU,CAC1BA,MAAO,UACPsC,QAASJ,EAAO,KAAOA,EAAO,GAAMK,GAAYvD,EAAY,KAC7D,IAAKkD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,OAAQ,CAAElC,MAAO,YAAc,KAAM,IACzD,wBAAoB,OAAQ,KAAM,WAAY,QAEtD,wBAAoB,SAAU,CAC1BA,MAAO,UACPsC,QAASJ,EAAO,KAAOA,EAAO,GAAMK,GAAYvD,EAAY,KAC7D,IAAKkD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,OAAQ,CAAElC,MAAO,YAAc,MAAO,IAC1D,wBAAoB,OAAQ,KAAM,WAAY,QAEtD,wBAAoB,SAAU,CAC1BA,MAAO,UACPsC,QAASJ,EAAO,KAAOA,EAAO,GAAMK,GAAYvD,EAAY,KAC7D,IAAKkD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,OAAQ,CAAElC,MAAO,YAAc,KAAM,IACzD,wBAAoB,OAAQ,KAAM,WAAY,QAEtD,wBAAoB,SAAU,CAC1BA,MAAO,4BACPsC,QAASJ,EAAO,KAAOA,EAAO,GAAMK,GAAYvD,EAAY,MAC7D,IAAKkD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,OAAQ,CAAElC,MAAO,YAAc,MAAO,IAC1D,wBAAoB,OAAQ,KAAM,YAAa,YAI/D,wBAAoB,YACpB,wBAAoB,MAAO,EAAY,CACnCkC,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAElC,MAAO,iBAAmB,WAAY,KAC7F,wBAAoB,MAAO,EAAY,GAClC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYmC,EAAehD,MAAO,CAACkD,EAAMV,KAC7F,OAAQ,kBAAc,wBAAoB,SAAU,CAChD1G,IAAK0G,EACL3B,OAAO,oBAAgB,CAAC,WAAY,CAAE,OAAU2B,KAAW,WAAON,GAAOvC,OAAOC,mBAChFuD,QAAUC,GArEtC,SAAoBZ,GAChBN,EAAMvC,OAAOC,gBAAkB4C,EAC/B1C,QAAQC,IAAI,UAAUyC,IAC1B,CAkEiD,CAAYA,GACjCa,SAAUb,KAAW,WAAON,GAAOvC,OAAOC,iBAC3C,EACC,wBAAoB,OAAQ,GAAY,sBA/D/C0D,EA+D4EJ,EAAK,GA9DlF,CACZ,GAAM,MACN,KAAQ,KACR,KAAQ,MACR,IAAO,KACP,IAAO,KACP,IAAO,MAEII,IAAS,OAsDgF,IAChF,wBAAoB,OAAQ,GAAY,qBAAiBd,GAAS,IAClE,wBAAoB,OAAQ,GAAa,qBAAiBU,EAAK,IAAK,IACrE,GAAuB,GAlElD,IAAqBI,IAmEG,WAGZ,wBAAoB,SACnBb,EAAczC,MAAMsC,OAAS,IACvB,kBAAc,wBAAoB,MAAO,EAAa,CACrDS,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAElC,MAAO,iBAAmB,SAAU,KAC7F,wBAAoB,MAAO,EAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY4B,EAAczC,MAAQG,KAC9E,kBAAc,wBAAoB,MAAO,CAC7CrE,IAAKqE,EACLU,MAAO,wBACR,EACC,wBAAoB,MAAO,EAAa,CACpCkC,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAElC,MAAO,eAAiB,MAAO,KACzF,wBAAoB,OAAQ,GAAa,qBAAiBV,GAAS,MAEvE,wBAAoB,SAAU,CAC1BU,MAAO,wBACPsC,QAAUC,IAAW,OA1F7BlD,EA0FiDC,OAzFzE+B,EAAMzB,mBAAmBP,GAD7B,IAA4BA,IA2FO,OAAQ,EAAe,OAE9B,YAGV,wBAAoB,QAAQ,OAIlD,ICjJJ,IAFiC,OAAgB,GAAQ,CAAC,CAAC,YAAY,qBCNjE,GAA+B0C,E,eCErC,MAAM,GAAa,CAAE/B,MAAO,qBACtB,GAAa,CAAEA,MAAO,kCACtB,GAAa,CAAEA,MAAO,eACtB,GAAa,CAAEA,MAAO,cACtB,GAAa,CAAC,WACd,GAAa,CAAEA,MAAO,aACtB,GAAa,CAAEA,MAAO,aACtB,GAAa,CACf/E,IAAK,EACL+E,MAAO,iBAEL,GAAa,CACf/E,IAAK,EACL+E,MAAO,eAKX,IAA6B,qBAAiB,CAC1CkB,OAAQ,UACR,KAAAC,CAAMC,GACF,MAAMC,EAAQ5C,IAERiE,GAAe,IAAAnB,UAAS,KAC1B,MAAMoB,EAAStB,EAAMzC,WAAW,KAChC,OAAO,aAAU3C,OAAOsD,QAAQoD,GAAQnF,IAAI,EAAEvC,EAAKkE,MAAW,CAAGlE,SAAQkE,KAAW,CAAC,MAAO,CAAC,SAASyD,OAAO,CAACC,EAAK/E,KAC/G+E,EAAI/E,EAAM7C,KAAO6C,EACV+E,GACR,CAAC,KAGR,SAASC,EAAcC,GACnB,MAAMX,EAAQf,EAAMzC,WAAW,KAC/B,OAAO,YAASwD,EAAOC,GAAQA,EAAK,IAAI,KAAOU,EACnD,CAEA,SAASC,EAAaX,GAClB,MAAMI,EAAOJ,EAAK,GAClB,MAAa,OAATI,EACmB,OAAZJ,EAAK,GAAc,iBAAmB,UAE/B,SAATI,EACE,OAEO,SAATA,EACE,gBAEO,QAATA,EACE,aAEO,QAATA,EACE,iBAEO,QAATA,EACE,QAEJ,mBACX,CAEA,SAASQ,EAAiBtB,GACtB,MAAMuB,EAAY,GAEd7B,EAAMvC,OAAOC,kBAAoB4C,GACjCuB,EAAUC,KAAK,CAAEnB,KAAM,IAAKoB,KAAM,OAGtC,IAAK,MAAO/D,EAAYC,KAAWrD,OAAOsD,QAAQ8B,EAAMxC,SAChDS,EAAO,OAASqC,GAChBuB,EAAUC,KAAK,CAAEnB,KAAM3C,EAAY+D,KAAM,OAGjD,OAAOF,CACX,CAMA,MAAO,CAACjB,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,CACzDA,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAElC,MAAO,kBAAoB,EAC9E,wBAAoB,OAAQ,KAAM,OAClC,wBAAoB,OAAQ,KAAM,UAClC,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,uBACnB,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY0C,EAAavD,MAAO,CAACkE,EAAaN,MAC1F,kBAAc,wBAAoB,MAAO,CAC7C9H,IAAK8H,EACL/C,MAAO,eACR,EACC,wBAAoB,MAAO,IAAY,qBAAiBqD,EAAY,MAAO,IAC3E,wBAAoB,MAAO,GAAY,GAClC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYP,EAAcC,GAAW,CAACV,EAAMV,MACxF,kBAAc,wBAAoB,MAAO,CAC7C1G,IAAK0G,EACL3B,OAAO,oBAAgB,CAAC,YAAagD,EAAaX,KAClDC,QAAUC,GAvB1C,SAAqBZ,EAAQU,GACzBpD,QAAQC,IAAI,QAASyC,EAAQU,EAEjC,CAoBqD,CAAaV,EAAQU,IAC3C,EACC,wBAAoB,MAAO,IAAY,qBAAiBV,GAAS,IACjE,wBAAoB,MAAO,IAAY,qBAAiBU,EAAK,IAAK,GACjEA,EAAO,KACD,kBAAc,wBAAoB,MAAO,IAAY,qBAAiBA,EAAK,IAAK,KACjF,wBAAoB,QAAQ,IAClC,wBAAoB,iBACnBY,EAAiBtB,GAAQF,OAAS,IAC5B,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYwB,EAAiBtB,GAAU2B,KACnF,kBAAc,wBAAoB,MAAO,CAC7CrI,IAAKqI,EAAOtB,KACZhC,MAAO,qBACR,qBAAiBsD,EAAOF,MAAQ,KAAM,qBAAiBE,EAAOtB,MAAO,KACxE,UAEN,wBAAoB,QAAQ,IACnC,GAAuB,MAC1B,YAGZ,UAIpB,ICrHJ,IAFiC,OAAgB,GAAQ,CAAC,CAAC,YAAY,qBCJjE,GAAa,CAAEhC,MAAO,6BACtB,GAAa,CACf/E,IAAK,EACL+E,MAAO,eAEL,GAAa,CACf/E,IAAK,EACL+E,MAAO,kBAEL,GAAa,CAAEA,MAAO,cACtB,GAAa,CAAC,aAIpB,IAA6B,qBAAiB,CAC1CkB,OAAQ,kBACR,KAAAC,CAAMC,GAAWmC,OAAQC,IACrB,MAAMnC,EAAQ5C,IAERgF,GAAmB,IAAA9E,KAAI,IAEvB+E,GAAgB,IAAA/E,KAAI,MAE1B,SAASgF,EAAkBC,EAASnB,EAAO,UACvC,MAAMjE,EAAQ,CACVqF,KAAMxC,EAAM3C,MAAM,GAClBkF,UACAnB,QAEJgB,EAAiBtE,MAAMgE,KAAK3E,IAE5B,IAAAsF,UAAS,KACLC,KAER,CAEA,SAASC,IACLP,EAAiBtE,MAAQ,EAC7B,CAEA,SAAS4E,IACDL,EAAcvE,QACduE,EAAcvE,MAAM8E,UAAYP,EAAcvE,MAAM+E,aAE5D,CAEA,IAAIC,EAAW9C,EAAM3C,MAAM,GAgB3B,OAfA,IAAA0F,OAAM,IAAM/C,EAAM3C,MAAM,GAAKU,IACrBA,IAAY+E,IACZR,EAAkB,qCAAqCvE,WAAkB,UACzE+E,EAAW/E,KAInBuE,EAAkB,mGAEM,SAExBH,EAAS,CACLG,oBACAK,mBAEG,CAAC/B,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,CACzDA,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAElC,MAAO,kBAAoB,EAC9E,wBAAoB,OAAQ,KAAM,OAClC,wBAAoB,OAAQ,KAAM,UAClC,KACJ,wBAAoB,MAAO,CACvBA,MAAO,iCACPqE,QAAS,gBACT1F,IAAK+E,GACN,CACoC,IAAlCD,EAAiBtE,MAAMsC,SACjB,kBAAc,wBAAoB,MAAO,GAAY,IAAKS,EAAO,KAAOA,EAAO,GAAK,EAC/E,wBAAoB,MAAO,CAAElC,MAAO,cAAgB,MAAO,IAC3D,wBAAoB,MAAO,CAAEA,MAAO,cAAgB,UAAW,IAC/D,wBAAoB,MAAO,CAAEA,MAAO,cAAgB,0BAA2B,UAEpF,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYyD,EAAiBtE,MAAO,CAACX,EAAO8F,MACxF,kBAAc,wBAAoB,MAAO,CAC7CrJ,IAAKqJ,EACLtE,OAAO,oBAAgB,CAAC,kBAAmBxB,EAAMiE,QAClD,EACC,wBAAoB,MAAO,IAAY,qBAAiBjE,EAAMqF,MAAO,IACrE,wBAAoB,MAAO,CACvB7D,MAAO,gBACPuE,UAAW/F,EAAMoF,SAClB,KAAM,EAAe,KACzB,KACH,UAEb,MACH,wBAAoB,YACpB,wBAAoB,MAAO,CAAE5D,MAAO,oBAAsB,EACtD,wBAAoB,SAAU,CAC1BA,MAAO,0CACPsC,QAAS0B,GACV,IAAK9B,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,OAAQ,KAAM,UAAW,QAErD,wBAAoB,SAAU,CAC1BlC,MAAO,0CACPsC,QAASyB,GACV,IAAK7B,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,OAAQ,KAAM,WAAY,WAKtE,ICzGJ,IAFiC,OAAgB,GAAQ,CAAC,CAAC,YAAY,qBCJjE,GAAa,CAAEsC,GAAI,kBACnB,GAAa,CAAExE,MAAO,eACtB,GAAa,CAAEA,MAAO,cACtB,GAAa,CAAEA,MAAO,gBACtB,GAAa,CAAEA,MAAO,eCC5B,IDQ6B,qBAAiB,CAC1CkB,OAAQ,MACR,KAAAC,CAAMC,GACF,MAAMC,EAAQ5C,IA+Bd,OA5BA,IAAAgG,WAAU,KAEN,MAAMC,EAAYC,eAClB,IAAKD,EAED,YADAzF,QAAQ2F,KAAK,yBAGjB,MAAMC,EAAaC,aAAa,CAAErC,KAAM,UAAWsC,WAAYL,IAC3DG,GAAc5I,OAAOuF,KAAKqD,GAAYpD,OAAS,GAC/CxC,QAAQC,IAAI,qBAEZmC,EAAM2D,OAAOH,IAGb5F,QAAQC,IAAI,yBAIpB,IAAA+F,aAAY,KACR,MAAMP,EAAYC,eAClB,IAAKD,EACD,OAGJ,MAAMQ,EAAc,EAAM7D,EAAM8D,QAEhCC,iBAAiBF,EAAa,CAAEzC,KAAM,UAAWsC,WAAYL,MAE1D,CAACzC,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,YACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,iBAAamD,IACb,iBAAaC,OAEjB,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,EACnC,iBAAaC,OAEjB,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,EACnC,iBAAaC,UAKjC,IE7DJC,EAAE,KACAxG,QAAQC,IAAI,qBAEZ,MAAMwG,EAAQ,IACRC,GAAM,IAAAC,WAAUC,IAEtBF,EAAIG,IAAIJ,GAIRC,EAAII,MAAM,QAEV9G,QAAQC,IAAI,kBAIduG,EAAEO,QAAQC,GAAG,WAAY,KACvBhH,QAAQC,IAAI","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/网红小区-单页版/initialData.ts","src://tavern_helper_template/src/网红小区-单页版/gameStore.ts","webpack://tavern_helper_template/./src/网红小区-单页版/components/StatusBar.vue?c63f","webpack://tavern_helper_template/src/网红小区-单页版/components/StatusBar.vue?76db","webpack://tavern_helper_template/./src/网红小区-单页版/components/ActionPanel.vue?9e43","webpack://tavern_helper_template/src/网红小区-单页版/components/ActionPanel.vue?94b9","src://tavern_helper_template/external var \"_\"","webpack://tavern_helper_template/./src/网红小区-单页版/components/MapView.vue?377f","webpack://tavern_helper_template/src/网红小区-单页版/components/MapView.vue?9f47","webpack://tavern_helper_template/./src/网红小区-单页版/components/NarrativeWindow.vue?cfdc","webpack://tavern_helper_template/src/网红小区-单页版/components/NarrativeWindow.vue?a725","webpack://tavern_helper_template/./src/网红小区-单页版/App.vue?651c","webpack://tavern_helper_template/src/网红小区-单页版/App.vue?9adc","src://tavern_helper_template/src/网红小区-单页版/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","/**\n * 本文件包含了从“网红小区”原始设定文件 `变量初始化.xyaml` 中提取的初始游戏状态。\n * 这使得我们的游戏状态管理与原始数据分离，更易于维护。\n */\n\nexport const initialWorldState = {\n  年份: \"2025年\",\n  日期: \"10月28日\",\n  星期: \"星期二\",\n  时间: \"08:00\",\n  地点: \"东海市·荟萃城\",\n};\n\nexport const initialApartmentsState = {\n  楼层配置: {\n    三楼: { 显示名称: \"三楼\", 顺序: 3 },\n    二楼: { 显示名称: \"二楼\", 顺序: 2 },\n    一楼: { 显示名称: \"一楼\", 顺序: 1 },\n  },\n  房间列表: {\n    \"101\": { 类型: \"公共客厅\", 名称: \"101\", 描述: \"公共客厅，配备会客区和用餐区，免费对所有租客开放\", 布局: { 楼层: \"一楼\", 位置: \"A区\" }, 功能区: \"会客区、用餐区\" },\n    \"102\": { 类型: \"公共客厅\", 名称: \"102\", 描述: \"公共客厅，配备休息区和娱乐区，免费对所有租客开放\", 布局: { 楼层: \"一楼\", 位置: \"B区\" }, 功能区: \"休息区、娱乐区\" },\n    \"103\": { 类型: \"健身房\", 名称: \"103\", 描述: \"公共健身房，配备健身设备和瑜伽区，免费对所有租客开放\", 布局: { 楼层: \"一楼\", 位置: \"C区\" }, 功能区: \"健身设备区、瑜伽区\" },\n    \"104\": { 类型: \"健身房\", 名称: \"104\", 描述: \"公共健身房舞蹈区和洗衣间，免费对所有租客开放\", 布局: { 楼层: \"一楼\", 位置: \"D区\" }, 功能区: \"舞蹈区、洗衣设备\" },\n    \"201\": { 类型: \"套间\", 名称: \"201\", 住户: \"未知\", 描述: \"一室一厅一卫一厨，35-50㎡个人公寓\", 布局: { 楼层: \"二楼\", 位置: \"A区\" } },\n    \"202\": { 类型: \"套间\", 名称: \"202\", 住户: \"未知\", 描述: \"一室一厅一卫一厨，35-50㎡个人公寓\", 布局: { 楼层: \"二楼\", 位置: \"B区\" } },\n    \"203\": { 类型: \"您的房间\", 名称: \"203\", 住户: \"<user>\", 描述: \"一室一厅一卫一厨，房东自住公寓\", 布局: { 楼层: \"二楼\", 位置: \"C区\" } },\n    \"204\": { 类型: \"洗衣间\", 名称: \"204\", 描述: \"公共洗衣间，配备洗衣机和烘干机，免费对所有租客开放\", 布局: { 楼层: \"二楼\", 位置: \"D区\" }, 功能区: \"洗衣设备、烘干设备\" },\n    \"301\": { 类型: \"套间\", 名称: \"301\", 住户: \"未知\", 描述: \"一室一厅一卫一厨，35-50㎡个人公寓\", 布局: { 楼层: \"三楼\", 位置: \"A区\" } },\n    \"302\": { 类型: \"套间\", 名称: \"302\", 住户: \"未知\", 描述: \"一室一厅一卫一厨，35-50㎡个人公寓\", 布局: { 楼层: \"三楼\", 位置: \"B区\" } },\n    \"303\": { 类型: \"套间\", 名称: \"303\", 住户: \"未知\", 描述: \"一室一厅一卫一厨，35-50㎡个人公寓\", 布局: { 楼层: \"三楼\", 位置: \"C区\" } },\n    \"304\": { 类型: \"洗衣间\", 名称: \"304\", 描述: \"公共洗衣间，配备洗衣机和烘干机，免费对所有租客开放\", 布局: { 楼层: \"三楼\", 位置: \"D区\" }, 功能区: \"洗衣设备、烘干设备\" },\n  },\n};\n\n/**\n * 日程表类型定义\n * 每个时间段指定租客应该在哪个位置\n */\nexport interface ScheduleEntry {\n  /** 开始时间，格式：HH:MM */\n  startTime: string;\n  /** 结束时间，格式：HH:MM */\n  endTime: string;\n  /** 该时间段应该在的位置（房间号） */\n  location: string;\n  /** 该时间段在做什么（可选，用于未来的叙事描述） */\n  activity?: string;\n}\n\n/**\n * 租客数据接口\n */\nexport interface Tenant {\n  年龄: number;\n  外貌: string;\n  职业: string;\n  性格: string;\n  恋情: string;\n  内心: string;\n  状态: string;\n  穿搭: string;\n  好感度: number;\n  性欲: number;\n  入住日期: string;\n  入住天数: number;\n  当前位置: string;\n  创作内容: string;\n  关系: Record<string, string>;\n  /** 日程表：定义租客在一天中不同时间段的位置 */\n  schedule: ScheduleEntry[];\n}\n\n// 初始租客状态，包含两个示例租客\nexport const initialTenantsState: Record<string, Tenant> = {\n  \"林悦\": {\n    年龄: 24,\n    外貌: \"清秀甜美的面容，身材苗条，腰细腿长。留着齐肩的黑色短发，皮肤白皙，眼神清澈明亮。胸部B罩杯，臀部紧致有型。\",\n    职业: \"舞蹈博主\",\n    性格: \"开朗、活泼、自律、热爱生活\",\n    恋情: \"单身\",\n    内心: \"想通过努力成为知名舞蹈博主\",\n    状态: \"刚刚起床，正在洗漱\",\n    穿搭: \"粉色运动背心和黑色瑜伽裤\",\n    好感度: 50,\n    性欲: 20,\n    入住日期: \"10月1日\",\n    入住天数: 27,\n    当前位置: \"201\",\n    创作内容: \"舞蹈教学视频、日常跳舞vlog\",\n    关系: {\n      \"<user>\": \"房东\"\n    },\n    schedule: [\n      { startTime: \"06:00\", endTime: \"08:00\", location: \"201\", activity: \"起床、洗漱、准备\" },\n      { startTime: \"08:00\", endTime: \"09:00\", location: \"101\", activity: \"早餐\" },\n      { startTime: \"09:00\", endTime: \"11:00\", location: \"104\", activity: \"舞蹈练习\" },\n      { startTime: \"11:00\", endTime: \"13:00\", location: \"201\", activity: \"休息、拍摄视频\" },\n      { startTime: \"13:00\", endTime: \"14:00\", location: \"101\", activity: \"午餐\" },\n      { startTime: \"14:00\", endTime: \"17:00\", location: \"201\", activity: \"剪辑视频、直播\" },\n      { startTime: \"17:00\", endTime: \"19:00\", location: \"104\", activity: \"晚间舞蹈练习\" },\n      { startTime: \"19:00\", endTime: \"20:00\", location: \"101\", activity: \"晚餐\" },\n      { startTime: \"20:00\", endTime: \"22:00\", location: \"102\", activity: \"放松娱乐\" },\n      { startTime: \"22:00\", endTime: \"06:00\", location: \"201\", activity: \"洗澡、睡觉\" },\n    ]\n  },\n  \"苏婉\": {\n    年龄: 26,\n    外貌: \"成熟知性的气质，身材高挑匀称，长发披肩。五官精致，眼神温柔。胸部C罩杯，体态优雅。\",\n    职业: \"健身博主\",\n    性格: \"自律、友善、专业、温和\",\n    恋情: \"单身\",\n    内心: \"希望帮助更多人建立健康的生活方式\",\n    状态: \"正在健身房进行晨练\",\n    穿搭: \"黑色运动紧身衣和灰色运动短裤\",\n    好感度: 50,\n    性欲: 15,\n    入住日期: \"10月5日\",\n    入住天数: 23,\n    当前位置: \"103\",\n    创作内容: \"健身教程、营养指导、身材管理\",\n    关系: {\n      \"<user>\": \"房东\"\n    },\n    schedule: [\n      { startTime: \"05:30\", endTime: \"07:00\", location: \"103\", activity: \"晨练\" },\n      { startTime: \"07:00\", endTime: \"08:00\", location: \"302\", activity: \"洗澡、准备\" },\n      { startTime: \"08:00\", endTime: \"09:00\", location: \"101\", activity: \"健康早餐\" },\n      { startTime: \"09:00\", endTime: \"12:00\", location: \"302\", activity: \"拍摄健身教程\" },\n      { startTime: \"12:00\", endTime: \"13:00\", location: \"101\", activity: \"午餐\" },\n      { startTime: \"13:00\", endTime: \"15:00\", location: \"302\", activity: \"休息、剪辑视频\" },\n      { startTime: \"15:00\", endTime: \"17:00\", location: \"103\", activity: \"下午训练课\" },\n      { startTime: \"17:00\", endTime: \"18:00\", location: \"302\", activity: \"洗澡、整理\" },\n      { startTime: \"18:00\", endTime: \"19:00\", location: \"101\", activity: \"晚餐\" },\n      { startTime: \"19:00\", endTime: \"21:00\", location: \"302\", activity: \"直播、互动\" },\n      { startTime: \"21:00\", endTime: \"22:00\", location: \"102\", activity: \"放松、社交\" },\n      { startTime: \"22:00\", endTime: \"05:30\", location: \"302\", activity: \"睡眠\" },\n    ]\n  }\n};\n","import { defineStore } from 'pinia';\nimport { ref } from 'vue';\nimport { initialWorldState, initialApartmentsState, initialTenantsState, type Tenant, type ScheduleEntry } from './initialData';\n\n// ========== 时间处理辅助函数 ==========\n\n/**\n * 解析时间字符串为分钟数（从 00:00 开始算）\n * @param timeStr - 时间字符串，格式：HH:MM\n * @returns 从 00:00 开始的总分钟数\n */\nfunction parseTime(timeStr: string): number {\n  const [hours, minutes] = timeStr.split(':').map(Number);\n  return hours * 60 + minutes;\n}\n\n/**\n * 将分钟数格式化为时间字符串\n * @param minutes - 从 00:00 开始的总分钟数\n * @returns 格式化的时间字符串 HH:MM\n */\nfunction formatTime(minutes: number): string {\n  // 处理跨天情况（分钟数可能 >= 1440）\n  const totalMinutes = minutes % 1440; // 1440 = 24 * 60\n  const hours = Math.floor(totalMinutes / 60);\n  const mins = totalMinutes % 60;\n  return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;\n}\n\n/**\n * 给时间字符串增加指定的小时数\n * @param timeStr - 时间字符串，格式：HH:MM\n * @param hours - 要增加的小时数\n * @returns 新的时间字符串\n */\nfunction addHours(timeStr: string, hours: number): string {\n  const minutes = parseTime(timeStr);\n  const newMinutes = minutes + hours * 60;\n  return formatTime(newMinutes);\n}\n\n/**\n * 检查当前时间是否在某个时间段内\n * @param currentTime - 当前时间字符串 HH:MM\n * @param startTime - 时间段开始时间 HH:MM\n * @param endTime - 时间段结束时间 HH:MM\n * @returns 是否在时间段内\n */\nfunction isTimeInRange(currentTime: string, startTime: string, endTime: string): boolean {\n  const current = parseTime(currentTime);\n  const start = parseTime(startTime);\n  let end = parseTime(endTime);\n\n  // 处理跨天的情况（如 22:00 到次日 06:00）\n  if (end <= start) {\n    end += 1440; // 加上 24 小时\n    // 如果当前时间小于开始时间，说明当前时间是第二天的\n    if (current < start) {\n      return current <= end - 1440;\n    }\n  }\n\n  return current >= start && current < end;\n}\n\n/**\n * 根据当前时间和日程表，查找租客应该在的位置\n * @param currentTime - 当前时间字符串 HH:MM\n * @param schedule - 租客的日程表\n * @returns 应该在的位置（房间号），如果没有匹配则返回 null\n */\nfunction findLocationByTime(currentTime: string, schedule: ScheduleEntry[]): string | null {\n  for (const entry of schedule) {\n    if (isTimeInRange(currentTime, entry.startTime, entry.endTime)) {\n      return entry.location;\n    }\n  }\n  return null;\n}\n\nexport const useGameStore = defineStore('game', () => {\n  // --- 状态定义 ---\n  // 使用从 initialData.ts 导入的数据来初始化状态\n  const world = ref(initialWorldState);\n  const apartments = ref(initialApartmentsState);\n  const tenants = ref(initialTenantsState);\n\n  // --- 玩家状态 ---\n  const player = ref({\n    currentLocation: '203', // 默认为玩家自己的房间\n  });\n\n  /**\n   * 游戏核心循环: 推进时间并更新世界状态\n   * @param hours - 要推进的小时数\n   */\n  function advanceTime(hours: number) {\n    console.log(`推进时间 ${hours} 小时...`);\n\n    // 1. 更新世界时间\n    const currentTime = world.value.时间;\n    const newTime = addHours(currentTime, hours);\n    world.value.时间 = newTime;\n\n    console.log(`时间从 ${currentTime} 推进到 ${newTime}`);\n\n    // 2. 根据日程更新所有租客的位置\n    for (const [tenantName, tenant] of Object.entries(tenants.value)) {\n      const newLocation = findLocationByTime(newTime, tenant.schedule);\n\n      if (newLocation && newLocation !== tenant.当前位置) {\n        const oldLocation = tenant.当前位置;\n        tenant.当前位置 = newLocation;\n        console.log(`${tenantName} 从 ${oldLocation} 移动到 ${newLocation}`);\n\n        // 可选：更新租客的状态描述\n        const scheduleEntry = tenant.schedule.find(entry =>\n          isTimeInRange(newTime, entry.startTime, entry.endTime)\n        );\n        if (scheduleEntry && scheduleEntry.activity) {\n          tenant.状态 = scheduleEntry.activity;\n        }\n      } else if (newLocation) {\n        console.log(`${tenantName} 仍在 ${newLocation}`);\n      }\n    }\n\n    // 3. TODO: 检查并触发事件\n    // 未来可以在这里添加事件触发逻辑，例如：\n    // - 检查好感度阈值\n    // - 检查性欲阈值\n    // - 检查特定时间点的特殊事件\n    // - 检查玩家和租客是否在同一房间\n  }\n\n  /**\n   * 与租客互动\n   * @param tenantId - 要互动的租客ID\n   */\n  async function interactWithTenant(tenantId: string) {\n    console.log(`与 ${tenantId} 互动...`);\n    // TODO:\n    // 1. 构建 Prompt\n    // 2. 调用 generate()\n    // 3. 调用 Mvu.parseMessage()\n    // 4. 更新 store 状态\n  }\n\n  return {\n    world,\n    apartments,\n    tenants,\n    player,\n    advanceTime,\n    interactWithTenant,\n  };\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, unref as _unref, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"status-bar apt-card\" };\nconst _hoisted_2 = { class: \"apt-card-body\" };\nconst _hoisted_3 = { class: \"status-section\" };\nconst _hoisted_4 = { class: \"time-display\" };\nconst _hoisted_5 = { class: \"time-large\" };\nconst _hoisted_6 = { class: \"date-info\" };\nconst _hoisted_7 = { class: \"status-section\" };\nconst _hoisted_8 = { class: \"info-row\" };\nconst _hoisted_9 = { class: \"value\" };\nconst _hoisted_10 = { class: \"info-row\" };\nconst _hoisted_11 = { class: \"value\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"info-row\"\n};\nconst _hoisted_13 = { class: \"value\" };\nconst _hoisted_14 = { class: \"status-section\" };\nconst _hoisted_15 = { class: \"info-row\" };\nconst _hoisted_16 = { class: \"value highlight\" };\nconst _hoisted_17 = {\n    key: 0,\n    class: \"nearby-tenants\"\n};\nconst _hoisted_18 = {\n    key: 1,\n    class: \"info-text\"\n};\nimport { computed } from 'vue';\nimport { useGameStore } from '../gameStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'StatusBar',\n    setup(__props) {\n        const store = useGameStore();\n        // 租客总数\n        const tenantCount = computed(() => {\n            return Object.keys(store.tenants).length;\n        });\n        // 当前房间信息\n        const currentRoomInfo = computed(() => {\n            const roomId = store.player.currentLocation;\n            return store.apartments.房间列表[roomId] || null;\n        });\n        // 同一房间的租客\n        const nearbyTenants = computed(() => {\n            const playerLocation = store.player.currentLocation;\n            return Object.entries(store.tenants)\n                .filter(([_, tenant]) => tenant.当前位置 === playerLocation)\n                .map(([name]) => name);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"apt-card-title\" }, [\n                    _createElementVNode(\"span\", null, \"📊\"),\n                    _createElementVNode(\"span\", null, \"游戏状态\")\n                ], -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\" 时间信息 \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"section-title\" }, \"⏰ 当前时间\", -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, _toDisplayString(_unref(store).world.时间), 1 /* TEXT */),\n                            _createElementVNode(\"div\", _hoisted_6, _toDisplayString(_unref(store).world.年份) + \" \" + _toDisplayString(_unref(store).world.日期) + \" \" + _toDisplayString(_unref(store).world.星期), 1 /* TEXT */)\n                        ])\n                    ]),\n                    _createCommentVNode(\" 位置信息 \"),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"section-title\" }, \"📍 位置信息\", -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"label\" }, \"所在地:\", -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_9, _toDisplayString(_unref(store).world.地点), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_10, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"label\" }, \"当前房间:\", -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_11, _toDisplayString(_unref(store).player.currentLocation), 1 /* TEXT */)\n                        ]),\n                        (currentRoomInfo.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                                _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"label\" }, \"房间类型:\", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_13, _toDisplayString(currentRoomInfo.value.类型), 1 /* TEXT */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\" 租客统计 \"),\n                    _createElementVNode(\"div\", _hoisted_14, [\n                        _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"section-title\" }, \"👥 租客统计\", -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_15, [\n                            _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"label\" }, \"总租客数:\", -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_16, _toDisplayString(tenantCount.value), 1 /* TEXT */)\n                        ]),\n                        (nearbyTenants.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n                                _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"subsection-title\" }, \"附近的租客:\", -1 /* CACHED */)),\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(nearbyTenants.value, (tenant) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: tenant,\n                                        class: \"tenant-tag\"\n                                    }, \" 👤 \" + _toDisplayString(tenant), 1 /* TEXT */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_18, \" 当前房间没有其他人 \"))\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./StatusBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StatusBar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StatusBar.vue?vue&type=style&index=0&id=3e811dd0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3e811dd0\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"action-panel apt-card\" };\nconst _hoisted_2 = { class: \"apt-card-body\" };\nconst _hoisted_3 = { class: \"action-section\" };\nconst _hoisted_4 = { class: \"button-grid\" };\nconst _hoisted_5 = { class: \"action-section\" };\nconst _hoisted_6 = { class: \"room-select-grid\" };\nconst _hoisted_7 = [\"onClick\", \"disabled\"];\nconst _hoisted_8 = { class: \"room-icon\" };\nconst _hoisted_9 = { class: \"room-label\" };\nconst _hoisted_10 = { class: \"room-type-label\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"action-section\"\n};\nconst _hoisted_12 = { class: \"tenant-interaction\" };\nconst _hoisted_13 = { class: \"tenant-interact-info\" };\nconst _hoisted_14 = { class: \"tenant-name\" };\nconst _hoisted_15 = [\"onClick\"];\nimport { computed } from 'vue';\nimport { useGameStore } from '../gameStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ActionPanel',\n    setup(__props) {\n        const store = useGameStore();\n        // 可用房间列表（排除空房间）\n        const availableRooms = computed(() => {\n            const rooms = {};\n            for (const [roomId, room] of Object.entries(store.apartments.房间列表)) {\n                if (room.类型 !== '空房间') {\n                    rooms[roomId] = room;\n                }\n            }\n            return rooms;\n        });\n        // 同一房间的租客\n        const nearbyTenants = computed(() => {\n            const playerLocation = store.player.currentLocation;\n            return Object.entries(store.tenants)\n                .filter(([_, tenant]) => tenant.当前位置 === playerLocation)\n                .map(([name]) => name);\n        });\n        // 推进时间\n        function advanceTime(hours) {\n            store.advanceTime(hours);\n        }\n        // 移动到指定房间\n        function moveToRoom(roomId) {\n            store.player.currentLocation = roomId;\n            console.log(`移动到房间: ${roomId}`);\n        }\n        // 与租客互动\n        function interactWithTenant(tenantName) {\n            store.interactWithTenant(tenantName);\n        }\n        // 获取房间图标\n        function getRoomIcon(type) {\n            const iconMap = {\n                '套间': '🛏️',\n                '您的房间': '🏠',\n                '公共客厅': '🛋️',\n                '健身房': '💪',\n                '洗衣间': '🧺',\n                '空房间': '📦',\n            };\n            return iconMap[type] || '🚪';\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"apt-card-title\" }, [\n                    _createElementVNode(\"span\", null, \"🎮\"),\n                    _createElementVNode(\"span\", null, \"行动面板\")\n                ], -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\" 时间控制区 \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"section-title\" }, \"⏳ 时间控制\", -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"button\", {\n                                class: \"apt-btn\",\n                                onClick: _cache[0] || (_cache[0] = ($event) => (advanceTime(1)))\n                            }, [...(_cache[4] || (_cache[4] = [\n                                    _createElementVNode(\"span\", { class: \"btn-icon\" }, \"⏩\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", null, \"推进 1 小时\", -1 /* CACHED */)\n                                ]))]),\n                            _createElementVNode(\"button\", {\n                                class: \"apt-btn\",\n                                onClick: _cache[1] || (_cache[1] = ($event) => (advanceTime(2)))\n                            }, [...(_cache[5] || (_cache[5] = [\n                                    _createElementVNode(\"span\", { class: \"btn-icon\" }, \"⏩⏩\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", null, \"推进 2 小时\", -1 /* CACHED */)\n                                ]))]),\n                            _createElementVNode(\"button\", {\n                                class: \"apt-btn\",\n                                onClick: _cache[2] || (_cache[2] = ($event) => (advanceTime(6)))\n                            }, [...(_cache[6] || (_cache[6] = [\n                                    _createElementVNode(\"span\", { class: \"btn-icon\" }, \"⏰\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", null, \"推进 6 小时\", -1 /* CACHED */)\n                                ]))]),\n                            _createElementVNode(\"button\", {\n                                class: \"apt-btn apt-btn-secondary\",\n                                onClick: _cache[3] || (_cache[3] = ($event) => (advanceTime(12)))\n                            }, [...(_cache[7] || (_cache[7] = [\n                                    _createElementVNode(\"span\", { class: \"btn-icon\" }, \"🌙\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", null, \"推进 12 小时\", -1 /* CACHED */)\n                                ]))])\n                        ])\n                    ]),\n                    _createCommentVNode(\" 移动控制区 \"),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"section-title\" }, \"🚶 房间移动\", -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableRooms.value, (room, roomId) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: roomId,\n                                    class: _normalizeClass(['room-btn', { 'active': roomId === _unref(store).player.currentLocation }]),\n                                    onClick: ($event) => (moveToRoom(roomId)),\n                                    disabled: roomId === _unref(store).player.currentLocation\n                                }, [\n                                    _createElementVNode(\"span\", _hoisted_8, _toDisplayString(getRoomIcon(room.类型)), 1 /* TEXT */),\n                                    _createElementVNode(\"span\", _hoisted_9, _toDisplayString(roomId), 1 /* TEXT */),\n                                    _createElementVNode(\"span\", _hoisted_10, _toDisplayString(room.类型), 1 /* TEXT */)\n                                ], 10 /* CLASS, PROPS */, _hoisted_7));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ]),\n                    _createCommentVNode(\" 互动区 \"),\n                    (nearbyTenants.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                            _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"section-title\" }, \"💬 互动\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_12, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(nearbyTenants.value, (tenant) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: tenant,\n                                        class: \"tenant-interact-card\"\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_13, [\n                                            _cache[10] || (_cache[10] = _createElementVNode(\"span\", { class: \"tenant-icon\" }, \"👤\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_14, _toDisplayString(tenant), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"button\", {\n                                            class: \"apt-btn apt-btn-small\",\n                                            onClick: ($event) => (interactWithTenant(tenant))\n                                        }, \" 互动 \", 8 /* PROPS */, _hoisted_15)\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ActionPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ActionPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ActionPanel.vue?vue&type=style&index=0&id=7780554d&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7780554d\"]])\n\nexport default __exports__","const __WEBPACK_NAMESPACE_OBJECT__ = _;","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"map-view apt-card\" };\nconst _hoisted_2 = { class: \"apt-card-body custom-scrollbar\" };\nconst _hoisted_3 = { class: \"floor-title\" };\nconst _hoisted_4 = { class: \"floor-grid\" };\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = { class: \"room-name\" };\nconst _hoisted_7 = { class: \"room-type\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"room-occupant\"\n};\nconst _hoisted_9 = {\n    key: 1,\n    class: \"room-people\"\n};\nimport { computed } from 'vue';\nimport { useGameStore } from '../gameStore';\nimport _ from 'lodash';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MapView',\n    setup(__props) {\n        const store = useGameStore();\n        // 按顺序（从高到低）排序楼层\n        const sortedFloors = computed(() => {\n            const floors = store.apartments.楼层配置;\n            return _.orderBy(Object.entries(floors).map(([key, value]) => ({ key, ...value })), ['顺序'], ['desc']).reduce((acc, floor) => {\n                acc[floor.key] = floor;\n                return acc;\n            }, {});\n        });\n        // 获取指定楼层的所有房间\n        function getFloorRooms(floorKey) {\n            const rooms = store.apartments.房间列表;\n            return _.pickBy(rooms, room => room.布局?.楼层 === floorKey);\n        }\n        // 获取房间的样式类\n        function getRoomClass(room) {\n            const type = room.类型;\n            if (type === '套间') {\n                return room.住户 === '未知' ? 'bedroom vacant' : 'bedroom';\n            }\n            else if (type === '您的房间') {\n                return 'your';\n            }\n            else if (type === '公共客厅') {\n                return 'public-lounge';\n            }\n            else if (type === '健身房') {\n                return 'public-gym';\n            }\n            else if (type === '洗衣间') {\n                return 'public-laundry';\n            }\n            else if (type === '空房间') {\n                return 'empty';\n            }\n            return 'custom-functional';\n        }\n        // 获取当前在房间里的所有人（包括玩家和租客）\n        function getRoomOccupants(roomId) {\n            const occupants = [];\n            // 检查玩家是否在此房间\n            if (store.player.currentLocation === roomId) {\n                occupants.push({ name: '你', icon: '👤' });\n            }\n            // 检查租客是否在此房间\n            for (const [tenantName, tenant] of Object.entries(store.tenants)) {\n                if (tenant.当前位置 === roomId) {\n                    occupants.push({ name: tenantName, icon: '👥' });\n                }\n            }\n            return occupants;\n        }\n        // 房间点击事件\n        function onRoomClick(roomId, room) {\n            console.log('点击房间:', roomId, room);\n            // TODO: 可以添加更多交互，如显示房间详情、移动玩家等\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"apt-card-title\" }, [\n                    _createElementVNode(\"span\", null, \"🏢\"),\n                    _createElementVNode(\"span\", null, \"公寓地图\")\n                ], -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\" 按楼层倒序显示（三楼在最上面） \"),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(sortedFloors.value, (floorConfig, floorKey) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: floorKey,\n                            class: \"floor-level\"\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_3, _toDisplayString(floorConfig.显示名称), 1 /* TEXT */),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getFloorRooms(floorKey), (room, roomId) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: roomId,\n                                        class: _normalizeClass(['room-card', getRoomClass(room)]),\n                                        onClick: ($event) => (onRoomClick(roomId, room))\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_6, _toDisplayString(roomId), 1 /* TEXT */),\n                                        _createElementVNode(\"div\", _hoisted_7, _toDisplayString(room.类型), 1 /* TEXT */),\n                                        (room.住户)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString(room.住户), 1 /* TEXT */))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createCommentVNode(\" 显示当前在房间里的角色 \"),\n                                        (getRoomOccupants(roomId).length > 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getRoomOccupants(roomId), (person) => {\n                                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                                        key: person.name,\n                                                        class: \"person-indicator\"\n                                                    }, _toDisplayString(person.icon) + \" \" + _toDisplayString(person.name), 1 /* TEXT */));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_5));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ]));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MapView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MapView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MapView.vue?vue&type=style&index=0&id=3ed63694&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3ed63694\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"narrative-window apt-card\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"empty-state\"\n};\nconst _hoisted_3 = {\n    key: 1,\n    class: \"narrative-list\"\n};\nconst _hoisted_4 = { class: \"entry-time\" };\nconst _hoisted_5 = [\"innerHTML\"];\nimport { ref, nextTick, watch } from 'vue';\nimport { useGameStore } from '../gameStore';\n// 叙事内容列表\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'NarrativeWindow',\n    setup(__props, { expose: __expose }) {\n        const store = useGameStore();\n        // 叙事内容条目\n        const narrativeEntries = ref([]);\n        // DOM 引用\n        const narrativeBody = ref(null);\n        // 添加叙事条目\n        function addNarrativeEntry(content, type = 'system') {\n            const entry = {\n                time: store.world.时间,\n                content,\n                type,\n            };\n            narrativeEntries.value.push(entry);\n            // 自动滚动到底部\n            nextTick(() => {\n                scrollToBottom();\n            });\n        }\n        // 清空叙事内容\n        function clearNarrative() {\n            narrativeEntries.value = [];\n        }\n        // 滚动到底部\n        function scrollToBottom() {\n            if (narrativeBody.value) {\n                narrativeBody.value.scrollTop = narrativeBody.value.scrollHeight;\n            }\n        }\n        // 监听游戏时间变化，添加时间推进提示\n        let lastTime = store.world.时间;\n        watch(() => store.world.时间, (newTime) => {\n            if (newTime !== lastTime) {\n                addNarrativeEntry(`<span class=\"time-change\">⏰ 时间推进到 ${newTime}</span>`, 'system');\n                lastTime = newTime;\n            }\n        });\n        // 初始欢迎消息\n        addNarrativeEntry(`<strong>欢迎来到网红小区</strong><br>\n  这是一个充满活力的社区，住着许多从事内容创作的年轻租客。<br>\n  作为房东，你可以与租客互动，管理公寓，体验精彩的故事。`, 'event');\n        // 暴露方法供其他组件使用\n        __expose({\n            addNarrativeEntry,\n            clearNarrative,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"apt-card-title\" }, [\n                    _createElementVNode(\"span\", null, \"📖\"),\n                    _createElementVNode(\"span\", null, \"叙事窗口\")\n                ], -1 /* CACHED */)),\n                _createElementVNode(\"div\", {\n                    class: \"apt-card-body custom-scrollbar\",\n                    ref_key: \"narrativeBody\",\n                    ref: narrativeBody\n                }, [\n                    (narrativeEntries.value.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"div\", { class: \"empty-icon\" }, \"📝\", -1 /* CACHED */),\n                                _createElementVNode(\"div\", { class: \"empty-text\" }, \"暂无叙事内容\", -1 /* CACHED */),\n                                _createElementVNode(\"div\", { class: \"empty-hint\" }, \"与租客互动或推进时间时，叙事内容将显示在这里\", -1 /* CACHED */)\n                            ]))]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(narrativeEntries.value, (entry, index) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: index,\n                                    class: _normalizeClass(['narrative-entry', entry.type])\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_4, _toDisplayString(entry.time), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"entry-content\",\n                                        innerHTML: entry.content\n                                    }, null, 8 /* PROPS */, _hoisted_5)\n                                ], 2 /* CLASS */));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]))\n                ], 512 /* NEED_PATCH */),\n                _createCommentVNode(\" 底部工具栏 \"),\n                _createElementVNode(\"div\", { class: \"narrative-footer\" }, [\n                    _createElementVNode(\"button\", {\n                        class: \"apt-btn apt-btn-small apt-btn-secondary\",\n                        onClick: clearNarrative\n                    }, [...(_cache[1] || (_cache[1] = [\n                            _createElementVNode(\"span\", null, \"🗑️ 清空\", -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: \"apt-btn apt-btn-small apt-btn-secondary\",\n                        onClick: scrollToBottom\n                    }, [...(_cache[2] || (_cache[2] = [\n                            _createElementVNode(\"span\", null, \"⬇️ 滚到底部\", -1 /* CACHED */)\n                        ]))])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./NarrativeWindow.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NarrativeWindow.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./NarrativeWindow.vue?vue&type=style&index=0&id=53b76b14&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_96d39c74a8c06e57a334244d199e36ff/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-53b76b14\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { id: \"game-container\" };\nconst _hoisted_2 = { class: \"game-layout\" };\nconst _hoisted_3 = { class: \"left-panel\" };\nconst _hoisted_4 = { class: \"center-panel\" };\nconst _hoisted_5 = { class: \"right-panel\" };\nimport { onMounted, watchEffect } from 'vue';\nimport { useGameStore } from './gameStore';\nimport { klona } from 'klona';\n// 导入组件\nimport StatusBar from './components/StatusBar.vue';\nimport ActionPanel from './components/ActionPanel.vue';\nimport MapView from './components/MapView.vue';\nimport NarrativeWindow from './components/NarrativeWindow.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const store = useGameStore();\n        // Phase 2: 实现游戏状态的持久化\n        // 1. 加载时: 在组件挂载后, 从酒馆变量恢复状态\n        onMounted(() => {\n            // getMessageId() 会获取当前UI所在的消息楼层ID\n            const messageId = getMessageId();\n            if (!messageId) {\n                console.warn('无法获取消息ID, 状态持久化将不会生效.');\n                return;\n            }\n            const savedState = getVariables({ type: 'message', message_id: messageId });\n            if (savedState && Object.keys(savedState).length > 0) {\n                console.log('发现已保存的状态, 正在恢复...');\n                // 使用 $patch 恢复状态, 这样更高效且不会替换掉 actions\n                store.$patch(savedState);\n            }\n            else {\n                console.log('未发现已保存的状态, 使用初始状态.');\n            }\n        });\n        // 2. 保存时: 监听状态变化并自动写入酒馆变量\n        watchEffect(() => {\n            const messageId = getMessageId();\n            if (!messageId) {\n                return; // 如果没有 messageId, 则不执行保存\n            }\n            // klona() 用于去除 Vue 的响应式代理, 得到一个纯净的JS对象, 这对于保存至关重要\n            const stateToSave = klona(store.$state);\n            // replaceVariables 会将新状态覆盖旧状态\n            replaceVariables(stateToSave, { type: 'message', message_id: messageId });\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 游戏主界面 \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\" 左侧面板 \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createVNode(StatusBar),\n                        _createVNode(ActionPanel)\n                    ]),\n                    _createCommentVNode(\" 中间地图区域 \"),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _createVNode(MapView)\n                    ]),\n                    _createCommentVNode(\" 右侧叙事窗口 \"),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _createVNode(NarrativeWindow)\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=6f396857&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue';\nimport { createPinia } from 'pinia';\nimport App from './App.vue';\n\n// 引入 to_do.md 中计划要创建的组件的样式 (如果它们有的话)\n// import './components/style.css';\n\n// 在加载脚本时执行\n$(() => {\n  console.log('“网红小区-单页版”脚本加载...');\n\n  const pinia = createPinia();\n  const app = createApp(App);\n\n  app.use(pinia);\n\n  // 将 Vue 应用挂载到 #app 元素上\n  // 这个 #app 元素是在 index.html 中定义的\n  app.mount('#app');\n\n  console.log('Vue 应用已成功挂载.');\n});\n\n// 在卸载脚本时执行\n$(window).on('pagehide', () => {\n  console.log('“网红小区-单页版”脚本卸载.');\n  // 注意: 实际项目中可能需要在这里处理应用卸载和资源清理\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","n","getter","__esModule","d","a","definition","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Vue","initialWorldState","initialApartmentsState","initialTenantsState","schedule","startTime","endTime","location","activity","parseTime","timeStr","hours","minutes","split","map","Number","addHours","totalMinutes","mins","Math","floor","toString","padStart","formatTime","isTimeInRange","currentTime","current","start","end","findLocationByTime","entry","useGameStore","world","ref","apartments","tenants","player","currentLocation","advanceTime","console","log","value","newTime","tenantName","tenant","entries","newLocation","oldLocation","scheduleEntry","find","interactWithTenant","async","tenantId","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","__name","setup","__props","store","tenantCount","computed","keys","length","currentRoomInfo","roomId","nearbyTenants","playerLocation","filter","_","name","_ctx","_cache","availableRooms","rooms","room","onClick","$event","disabled","type","sortedFloors","floors","reduce","acc","getFloorRooms","floorKey","getRoomClass","getRoomOccupants","occupants","push","icon","floorConfig","person","expose","__expose","narrativeEntries","narrativeBody","addNarrativeEntry","content","time","nextTick","scrollToBottom","clearNarrative","scrollTop","scrollHeight","lastTime","watch","ref_key","index","innerHTML","id","onMounted","messageId","getMessageId","warn","savedState","getVariables","message_id","$patch","watchEffect","stateToSave","$state","replaceVariables","StatusBar","ActionPanel","MapView","NarrativeWindow","$","pinia","app","createApp","App","use","mount","window","on"],"sourceRoot":""}