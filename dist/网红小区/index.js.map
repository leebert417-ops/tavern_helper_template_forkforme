{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/src/网红小区/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// ==================== 网红小区 - 公寓管理 ====================\n// 使用 TypeScript + 原生实现（参考江畔夜总会的架构）\n// 版本：重构版\n\nconsole.log('🏠 加载网红小区公寓管理插件...');\n\n// ==================== 类型定义 ====================\ntype AnyObject = Record<string, any>;\n\n// ==================== 样式定义 ====================\n/* eslint-disable */\nconst styles = `\n<style id=\"ngq-plugin-styles\">\n:root {\n  --apt-primary: #ff6b9d;\n  --apt-secondary: #c44569;\n  --apt-bg: #1a1a2e;\n  --apt-card: #16213e;\n  --apt-border: rgba(255, 107, 157, 0.2);\n  --apt-text: #e8eaf6;\n  --apt-dim: #e5e7eb;\n}\n\n/* ==================== 拖动按钮 */\n.ngq-toggle-btn {\n  position: fixed !important;\n  top: 100px;\n  left: 20px;\n  width: 64px;\n  height: 64px;\n  background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: grab;\n  z-index: 10000 !important;\n  box-shadow: 0 6px 20px rgba(255, 107, 157, 0.4);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: none;\n  font-size: 28px;\n  border: 3px solid rgba(255, 255, 255, 0.3);\n  color: #fff;\n  transition: transform 0.2s, box-shadow 0.2s, opacity 0.2s;\n}\n\n.ngq-toggle-btn:hover {\n  transform: scale(1.05);\n}\n\n.ngq-toggle-btn.dragging {\n  cursor: grabbing !important;\n  opacity: 0.9;\n  z-index: 10001 !important;\n  transition: none !important;\n}\n\n/* ==================== 主面板容器 */\n.ngq-main-panel {\n  position: fixed !important;\n  top: 50vh !important;\n  left: 50vw !important;\n  transform: translate(-50%, -50%) !important;\n  width: 90vw !important;\n  max-width: 900px !important;\n  height: 85vh !important;\n  max-height: 650px !important;\n  background: var(--apt-bg);\n  background: linear-gradient(135deg, var(--apt-bg) 0%, #16213e 100%);\n  border: 2px solid var(--apt-primary);\n  border-radius: 16px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n  z-index: 9999 !important;\n  display: none;\n  flex-direction: column;\n  overflow: hidden;\n  color: var(--apt-text);\n  font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;\n}\n\n.ngq-main-panel.active {\n  display: flex;\n}\n\n.ngq-main-panel.dragging {\n  transition: none !important;\n}\n\n/* ==================== 头部 */\n.ngq-header {\n  flex-shrink: 0;\n  padding: 16px 20px;\n  background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: 600;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  cursor: move;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  transition: opacity 0.2s;\n  touch-action: none !important;\n}\n\n.ngq-header.dragging {\n  opacity: 0.8;\n  cursor: grabbing !important;\n  transition: none !important;\n}\n\n.ngq-header-left {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.ngq-header-title {\n  font-size: 18px;\n  font-weight: 700;\n}\n\n.ngq-header-subtitle {\n  font-size: 12px;\n  opacity: 0.9;\n}\n\n.ngq-close-btn {\n  background: transparent;\n  border: none;\n  color: white;\n  font-size: 32px;\n  cursor: pointer;\n  line-height: 1;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.2s;\n}\n\n.ngq-close-btn:hover {\n  transform: scale(1.1);\n}\n\n/* ==================== 标签页导航 */\n.ngq-tabs {\n  display: flex;\n  flex-shrink: 0;\n  border-bottom: 2px solid rgba(255, 255, 255, 0.1);\n}\n\n.ngq-tab {\n  flex: 1;\n  padding: 12px 16px;\n  background: transparent;\n  border: none;\n  color: rgba(255, 255, 255, 0.6);\n  font-size: 14px;\n  cursor: pointer;\n  transition: all 0.3s;\n  border-bottom: 2px solid transparent;\n  text-align: center;\n}\n\n.ngq-tab:hover {\n  background: rgba(255, 255, 255, 0.05);\n  color: rgba(255, 255, 255, 0.9);\n}\n\n.ngq-tab.active {\n  color: var(--apt-primary);\n  border-bottom-color: var(--apt-primary);\n}\n\n.ngq-tab-badge {\n  display: inline-block;\n  margin-left: 6px;\n  padding: 2px 6px;\n  background: var(--apt-primary);\n  border-radius: 10px;\n  font-size: 11px;\n  font-weight: 700;\n  color: #fff;\n}\n\n/* ==================== 内容区域 */\n.ngq-content {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.ngq-content::-webkit-scrollbar {\n  width: 8px;\n}\n\n.ngq-content::-webkit-scrollbar-track {\n  background: rgba(255, 255, 255, 0.05);\n}\n\n.ngq-content::-webkit-scrollbar-thumb {\n  background: var(--apt-primary);\n  border-radius: 4px;\n}\n\n/* ==================== 卡片样式 */\n.ngq-card {\n  background: var(--apt-card);\n  border: 1px solid var(--apt-border);\n  border-radius: 10px;\n  margin-bottom: 16px;\n  overflow: hidden;\n}\n\n.ngq-card-title {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 16px;\n  background: rgba(255, 107, 157, 0.15);\n  font-weight: 600;\n  font-size: 16px;\n}\n\n.ngq-card-body {\n  padding: 16px;\n}\n\n.ngq-info-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.ngq-info-row:last-child {\n  border-bottom: none;\n}\n\n.ngq-info-label {\n  color: var(--apt-dim);\n  font-size: 14px;\n}\n\n.ngq-info-value {\n  color: var(--apt-text);\n  font-weight: 500;\n  text-align: right;\n}\n\n/* ==================== 楼层样式 */\n.ngq-floor-level {\n  background: var(--apt-card);\n  border: 1px solid var(--apt-border);\n  border-radius: 12px;\n  padding: 16px;\n  margin-bottom: 16px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);\n}\n\n.ngq-floor-level-title {\n  font-size: 1.1em;\n  font-weight: 600;\n  margin-bottom: 12px;\n  color: var(--apt-text);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.ngq-floor-grid {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  gap: 12px;\n  width: 100%;\n}\n\n.ngq-room-card {\n  border-radius: 10px;\n  padding: 18px 12px;\n  min-height: 90px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  font-weight: 600;\n  font-size: 0.9em;\n  border: 2px solid rgba(255, 255, 255, 0.3);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.ngq-room-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(255, 107, 157, 0.3);\n  border-color: var(--apt-primary);\n}\n\n.ngq-room-card.bedroom {\n  background: linear-gradient(135deg, #592e39 0%, #7a4053 100%);\n}\n\n.ngq-room-card.bedroom.vacant {\n  background: linear-gradient(135deg, rgba(255, 182, 193, 0.6) 0%, rgba(255, 192, 203, 0.7) 100%);\n  border-color: rgba(255, 182, 193, 0.8);\n  backdrop-filter: blur(2px);\n}\n\n.ngq-room-card.empty {\n  background: linear-gradient(135deg, #3d3f47 0%, #4a4f5a 100%);\n  border-color: #5a5f6b;\n  opacity: 0.7;\n}\n\n.ngq-room-card.your {\n  background: linear-gradient(135deg, #2e5266 0%, #3a6d8c 100%);\n  border-color: #5dade2;\n}\n\n/* 公共客厅 - 温馨橙色 */\n.ngq-room-card.public-lounge {\n  background: linear-gradient(135deg, #d97706 0%, #f59e0b 100%);\n  border-color: #fbbf24;\n}\n\n/* 健身房 - 活力绿色 */\n.ngq-room-card.public-gym {\n  background: linear-gradient(135deg, #059669 0%, #10b981 100%);\n  border-color: #34d399;\n}\n\n/* 洗衣间 - 清新蓝色 */\n.ngq-room-card.public-laundry {\n  background: linear-gradient(135deg, #0284c7 0%, #0ea5e9 100%);\n  border-color: #38bdf8;\n}\n\n/* 用户自定义功能性房间 - 半透明绿色 */\n.ngq-room-card.custom-functional {\n  background: linear-gradient(135deg, rgba(16, 185, 129, 0.6) 0%, rgba(52, 211, 153, 0.7) 100%);\n  border-color: rgba(52, 211, 153, 0.8);\n  opacity: 0.95;\n}\n\n/* 合并房间 - 占据双倍宽度 */\n.ngq-room-card.merged {\n  grid-column: span 2;\n}\n\n.ngq-room-name {\n  font-weight: bold;\n  font-size: 0.95em;\n}\n\n.ngq-room-occupant {\n  font-size: 0.75em;\n  color: var(--apt-dim);\n  margin-top: 4px;\n}\n\n/* ==================== 租客卡片 */\n.ngq-tenant-card {\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid var(--apt-border);\n  border-radius: 8px;\n  padding: 12px;\n  margin-bottom: 12px;\n  transition: all 0.3s;\n  cursor: pointer;\n}\n\n.ngq-tenant-card:hover {\n  border-color: var(--apt-primary);\n  background: rgba(255, 107, 157, 0.1);\n  transform: translateX(4px);\n}\n\n.ngq-tenant-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.ngq-tenant-name {\n  font-weight: 600;\n  font-size: 15px;\n  color: var(--apt-primary);\n}\n\n.ngq-tenant-badge {\n  font-size: 12px;\n  padding: 2px 8px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 4px;\n}\n\n/* ==================== 按钮 */\n.ngq-btn {\n  padding: 10px 16px;\n  background: var(--apt-primary);\n  color: #fff;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  transition: all 0.3s;\n}\n\n.ngq-btn:hover:not(:disabled) {\n  background: var(--apt-secondary);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(255, 107, 157, 0.3);\n}\n\n.ngq-btn:disabled {\n  background: #555;\n  cursor: not-allowed;\n  opacity: 0.4;\n}\n\n.ngq-actions {\n  display: flex;\n  gap: 10px;\n  margin-top: 12px;\n}\n\n.ngq-management-actions {\n  display: flex;\n  flex-direction: row;\n  gap: 12px;\n  margin-top: 12px;\n}\n\n.ngq-management-actions .ngq-btn {\n  flex: 1;\n  padding: 14px 20px;\n  min-width: 0;\n}\n\n@media (max-width: 768px) and (orientation: portrait) {\n  .ngq-management-actions {\n    flex-direction: column;\n  }\n  \n  .ngq-management-actions .ngq-btn {\n    width: 100%;\n  }\n}\n\n.ngq-tenant-actions {\n  margin-bottom: 16px;\n  text-align: center;\n}\n\n/* ==================== 空状态 */\n.ngq-empty {\n  text-align: center;\n  padding: 40px 20px;\n  color: var(--apt-dim);\n}\n\n.ngq-empty-icon {\n  font-size: 48px;\n  margin-bottom: 12px;\n  opacity: 0.5;\n}\n\n.ngq-empty-text {\n  font-size: 14px;\n}\n\n/* ==================== 模态框 */\n.ngq-modal-overlay {\n  position: fixed !important;\n  top: 0 !important;\n  left: 0 !important;\n  width: 100vw !important;\n  height: 100vh !important;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(4px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 10500 !important;\n  opacity: 1;\n  transition: opacity 0.3s;\n}\n\n.ngq-modal-overlay.hidden {\n  display: none;\n  opacity: 0;\n}\n\n.ngq-modal-content {\n  background: var(--apt-card);\n  color: var(--apt-text);\n  padding: 28px;\n  border-radius: 20px;\n  width: 90%;\n  max-width: 420px;\n  max-height: 80vh;\n  overflow-y: auto;\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  border: 2px solid var(--apt-border);\n}\n\n.ngq-modal-title {\n  margin: 0;\n  font-size: 1.4em;\n  font-weight: 700;\n  color: var(--apt-primary);\n}\n\n.ngq-modal-subtitle {\n  color: var(--apt-dim);\n  margin: 0;\n  font-size: 0.95em;\n  line-height: 1.5;\n}\n\n.ngq-modal-input {\n  width: 100%;\n  padding: 12px 16px;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid var(--apt-border);\n  border-radius: 8px;\n  color: var(--apt-text);\n  font-size: 14px;\n  outline: none;\n  transition: border-color 0.3s;\n}\n\n.ngq-modal-input:focus {\n  border-color: var(--apt-primary);\n}\n\n.ngq-modal-input::placeholder {\n  color: var(--apt-dim);\n}\n\n.ngq-modal-actions {\n  display: flex;\n  gap: 12px;\n}\n\n.ngq-modal-btn {\n  flex: 1;\n  padding: 12px 16px;\n  border: none;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n\n.ngq-modal-btn-confirm {\n  background: var(--apt-primary);\n  color: #fff;\n}\n\n.ngq-modal-btn-confirm:hover {\n  background: var(--apt-secondary);\n  transform: translateY(-1px);\n}\n\n.ngq-modal-btn-cancel {\n  background: rgba(255, 255, 255, 0.1);\n  color: var(--apt-text);\n}\n\n.ngq-modal-btn-cancel:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n/* ==================== 加载状态 */\n.ngq-loading {\n  text-align: center;\n  padding: 40px;\n  color: var(--apt-dim);\n}\n\n.ngq-loading-icon {\n  font-size: 32px;\n  margin-bottom: 12px;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* ==================== 进度条 */\n.ngq-progress-bar {\n  width: 100%;\n  height: 20px;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 10px;\n  overflow: hidden;\n  position: relative;\n  margin-top: 6px;\n}\n\n.ngq-progress-fill {\n  height: 100%;\n  border-radius: 10px;\n  transition: width 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 12px;\n  font-weight: 600;\n  color: white;\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n}\n\n.ngq-progress-fill.favor {\n  background: linear-gradient(90deg, #ff6b9d 0%, #ff8fab 100%);\n}\n\n.ngq-progress-fill.lust {\n  background: linear-gradient(90deg, #ff4757 0%, #ff6348 100%);\n}\n\n.ngq-info-block {\n  display: block;\n  padding: 8px 0;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.ngq-info-block:last-child {\n  border-bottom: none;\n}\n\n.ngq-info-block .ngq-info-label {\n  display: block;\n  margin-bottom: 6px;\n}\n\n.ngq-info-block .ngq-info-value {\n  display: block;\n  text-align: left;\n  line-height: 1.5;\n}\n\n/* ==================== 移动端适配 */\n@media (max-width: 768px) {\n  .ngq-main-panel {\n    width: 95vw;\n    height: 90vh;\n  }\n\n  .ngq-toggle-btn {\n    width: 56px;\n    height: 56px;\n    font-size: 24px;\n  }\n\n  .ngq-tab {\n    font-size: 12px;\n    padding: 10px 8px;\n  }\n\n  .ngq-toggle-btn {\n    pointer-events: auto;\n    z-index: 10002;\n  }\n}\n\n@media (max-width: 480px) and (orientation: portrait) {\n  .ngq-main-panel {\n    width: 100vw;\n    height: 100vh;\n    max-width: none;\n    max-height: none;\n    border-radius: 0;\n    border: none;\n  }\n\n  .ngq-toggle-btn {\n    width: 50px;\n    height: 50px;\n    font-size: 22px;\n  }\n\n  .ngq-tab {\n    font-size: 11px;\n    padding: 8px 4px;\n  }\n\n  .ngq-toggle-btn {\n    z-index: 10002;\n  }\n}\n\n@media (max-height: 600px) and (orientation: landscape) {\n  .ngq-main-panel {\n    height: 95vh;\n    max-height: none;\n  }\n\n  .ngq-content {\n    padding: 10px;\n  }\n}\n\n/* ==================== 全局移动端优化 */\n* {\n  touch-action: manipulation;\n}\n\n.ngq-toggle-btn {\n  touch-action: none !important;\n}\n\n* {\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n\n.ngq-content {\n  -webkit-overflow-scrolling: touch;\n}\n\nbody {\n  -webkit-text-size-adjust: 100%;\n  -ms-text-size-adjust: 100%;\n  text-size-adjust: 100%;\n}\n\n@supports (padding: max(0px)) {\n  @media (max-width: 480px) {\n    .ngq-main-panel {\n      padding-top: max(0px, env(safe-area-inset-top));\n      padding-bottom: max(0px, env(safe-area-inset-bottom));\n      padding-left: max(0px, env(safe-area-inset-left));\n      padding-right: max(0px, env(safe-area-inset-right));\n    }\n  }\n}\n\nbutton:focus,\nbutton:active,\n.ngq-toggle-btn:focus,\n.ngq-toggle-btn:active,\n.ngq-close-btn:focus,\n.ngq-close-btn:active,\n.ngq-tenant-card:focus,\n.ngq-tenant-card:active {\n  outline: none;\n  outline-color: transparent;\n}\n</style>\n`;\n/* eslint-enable */\n\n// ==================== HTML 结构 ====================\nconst html = `\n<!-- 拖动按钮 -->\n<div id=\"ngq-toggle-btn\" class=\"ngq-toggle-btn\">\n  <span>🏠</span>\n</div>\n\n<!-- 主面板 -->\n<div id=\"ngq-main-panel\" class=\"ngq-main-panel\">\n  <div class=\"ngq-header\">\n    <div class=\"ngq-header-left\">\n      <div class=\"ngq-header-title\">🏠 网红小区</div>\n      <div class=\"ngq-header-subtitle\" id=\"ngq-time-display\">东海市·荟萃城</div>\n    </div>\n    <button class=\"ngq-close-btn\" id=\"ngq-close-btn\">×</button>\n  </div>\n  \n  <div class=\"ngq-content\" id=\"ngq-content\">\n    <div class=\"ngq-loading\">\n      <div class=\"ngq-loading-icon\">⏳</div>\n      <div>正在加载数据...</div>\n    </div>\n  </div>\n</div>\n\n<!-- 招募租客模态框 -->\n<div id=\"ngq-recruitment-modal\" class=\"ngq-modal-overlay hidden\">\n  <div class=\"ngq-modal-content\">\n    <h2 class=\"ngq-modal-title\">👤 招募新租客</h2>\n    <p class=\"ngq-modal-subtitle\">网红小区专注于内容创作者，请输入您期望的租客特征</p>\n    <input type=\"text\" id=\"ngq-recruitment-keywords\" class=\"ngq-modal-input\" placeholder=\"例如：美妆博主、游戏主播、舞蹈UP主\">\n    <div class=\"ngq-modal-actions\">\n      <button class=\"ngq-modal-btn ngq-modal-btn-cancel\" id=\"ngq-modal-cancel\">取消</button>\n      <button class=\"ngq-modal-btn ngq-modal-btn-confirm\" id=\"ngq-modal-confirm\">确认招募</button>\n    </div>\n  </div>\n</div>\n\n<!-- 房间详情模态框 -->\n<div id=\"ngq-room-modal\" class=\"ngq-modal-overlay hidden\">\n  <div class=\"ngq-modal-content\" style=\"max-width: 500px\">\n    <h2 class=\"ngq-modal-title\" id=\"ngq-room-modal-title\">🏠 房间详情</h2>\n    <div id=\"ngq-room-modal-body\"></div>\n    <div class=\"ngq-modal-actions\" id=\"ngq-room-modal-actions\">\n      <button class=\"ngq-modal-btn ngq-modal-btn-confirm\" id=\"ngq-room-modal-close\" style=\"width:100%\">关闭</button>\n    </div>\n    <div class=\"ngq-modal-actions\" id=\"ngq-room-demolish-actions\" style=\"display:none; margin-top: 8px;\">\n      <button class=\"ngq-modal-btn\" id=\"ngq-room-demolish\" style=\"width:100%; background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);\">\n        🗑️ 拆除房间\n      </button>\n    </div>\n  </div>\n</div>\n\n<!-- 装修选择模态框 -->\n<div id=\"ngq-renovate-modal\" class=\"ngq-modal-overlay hidden\">\n  <div class=\"ngq-modal-content\" style=\"max-width: 450px\">\n    <h2 class=\"ngq-modal-title\">🔨 装修选择</h2>\n    <p class=\"ngq-modal-subtitle\" id=\"ngq-renovate-room-info\">选择要将此空房间装修为何种类型：</p>\n    <div style=\"display: flex; flex-direction: column; gap: 12px; margin-top: 16px;\">\n      <button class=\"ngq-modal-btn ngq-modal-btn-confirm\" id=\"ngq-renovate-suite\" style=\"padding: 16px; font-size: 15px;\">\n        🏠 标准套间\n        <div style=\"font-size: 12px; opacity: 0.8; margin-top: 4px;\">一室一厅一卫一厨，可出租给租客</div>\n      </button>\n      <button class=\"ngq-modal-btn ngq-modal-btn-confirm\" id=\"ngq-renovate-functional\" style=\"padding: 16px; font-size: 15px; background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);\">\n        🔧 功能性房间\n        <div style=\"font-size: 12px; opacity: 0.8; margin-top: 4px;\">公共设施（客厅/健身房/洗衣间等）</div>\n      </button>\n    </div>\n    <div class=\"ngq-modal-actions\" style=\"margin-top: 16px;\">\n      <button class=\"ngq-modal-btn ngq-modal-btn-cancel\" id=\"ngq-renovate-cancel\" style=\"width:100%\">取消</button>\n    </div>\n  </div>\n</div>\n\n<!-- 功能性房间详情输入模态框 -->\n<div id=\"ngq-functional-input-modal\" class=\"ngq-modal-overlay hidden\">\n  <div class=\"ngq-modal-content\" style=\"max-width: 450px\">\n    <h2 class=\"ngq-modal-title\">🔧 功能性房间详情</h2>\n    <p class=\"ngq-modal-subtitle\" id=\"ngq-functional-room-info\">请输入功能性房间的详细信息：</p>\n    <div style=\"display: flex; flex-direction: column; gap: 12px; margin-top: 16px;\">\n      <div>\n        <label style=\"display: block; margin-bottom: 6px; color: var(--apt-dim); font-size: 14px;\">房间名称</label>\n        <input type=\"text\" id=\"ngq-functional-name\" class=\"ngq-modal-input\" placeholder=\"例如：健身房、影音室、茶室\">\n      </div>\n      <div>\n        <label style=\"display: block; margin-bottom: 6px; color: var(--apt-dim); font-size: 14px;\">房间作用</label>\n        <input type=\"text\" id=\"ngq-functional-purpose\" class=\"ngq-modal-input\" placeholder=\"例如：配备跑步机和瑜伽垫，供租客免费使用\">\n      </div>\n    </div>\n    <div class=\"ngq-modal-actions\" style=\"margin-top: 16px;\">\n      <button class=\"ngq-modal-btn ngq-modal-btn-cancel\" id=\"ngq-functional-cancel\">取消</button>\n      <button class=\"ngq-modal-btn ngq-modal-btn-confirm\" id=\"ngq-functional-confirm\">确认装修</button>\n    </div>\n  </div>\n</div>\n`;\n\n// ==================== 全局变量 ====================\nlet btnDragData: {\n  startX: number;\n  startY: number;\n  initialLeft: number;\n  initialTop: number;\n} | null = null;\nlet panelDragData: {\n  startX: number;\n  startY: number;\n  initialLeft: number;\n  initialTop: number;\n} | null = null;\nlet cachedMVUData: any = null;\nconst MAX_RETRIES = 5;\nconst RETRY_DELAY = 400;\nlet currentRetry = 0;\nlet autoRefreshTimer: number | null = null;\nlet contentEventsInitialized = false; // 标记内容区事件是否已绑定\nlet currentRenovatingRoom = ''; // 当前正在装修的房间号\nlet currentRoomForDemolish = ''; // 当前待拆除的房间号\n\n// ==================== 工具函数 ====================\nfunction safeGetValue(obj: AnyObject | undefined, path: string, defaultValue: string = ''): string {\n  if (!obj) return defaultValue;\n  const keys = path.split('.');\n  let current: any = obj;\n  for (const key of keys) {\n    if (current === undefined || current === null) return defaultValue;\n    // 先解包 MVU 数组格式\n    if (Array.isArray(current)) {\n      current = current[0];\n    }\n    if (typeof current !== 'object' || !Object.prototype.hasOwnProperty.call(current, key)) {\n      return defaultValue;\n    }\n    current = current[key];\n  }\n  // 最后解包 MVU 数组格式\n  if (Array.isArray(current)) return current.length > 0 ? String(current[0] ?? defaultValue) : defaultValue;\n  if (current === undefined || current === null) return defaultValue;\n  return String(current);\n}\n\n// ==================== 初始化函数 ====================\nfunction initializeNgqPlugin(): void {\n  console.log('🚀 初始化网红小区插件...');\n\n  // 获取目标文档\n  let targetDoc: Document;\n  try {\n    targetDoc = window.top ? window.top.document : document;\n  } catch (e) {\n    console.warn('⚠️ 无法访问 window.top，使用当前 document');\n    targetDoc = document;\n  }\n\n  // 检查是否已存在\n  if (targetDoc.getElementById('ngq-toggle-btn')) {\n    console.log('⚠️ 网红小区插件已存在，先移除旧的');\n    targetDoc.getElementById('ngq-toggle-btn')?.remove();\n    targetDoc.getElementById('ngq-main-panel')?.remove();\n    targetDoc.getElementById('ngq-plugin-styles')?.remove();\n    targetDoc.getElementById('ngq-recruitment-modal')?.remove();\n    targetDoc.getElementById('ngq-room-modal')?.remove();\n    targetDoc.getElementById('ngq-renovate-modal')?.remove();\n    targetDoc.getElementById('ngq-functional-input-modal')?.remove();\n    // 清理事件\n    $(targetDoc).off('.ngq-plugin');\n    // 重置事件绑定标志\n    contentEventsInitialized = false;\n  }\n\n  // 注入样式\n  if (!targetDoc.getElementById('ngq-plugin-styles')) {\n    targetDoc.head.insertAdjacentHTML('beforeend', styles);\n    console.log('✅ 样式已注入');\n  }\n\n  // 注入 HTML\n  targetDoc.body.insertAdjacentHTML('beforeend', html);\n  console.log('✅ HTML 已注入');\n\n  // 从 localStorage 恢复按钮位置\n  const btn = targetDoc.getElementById('ngq-toggle-btn');\n  if (btn) {\n    try {\n      const saved = localStorage.getItem('ngq-btn-position');\n      if (saved) {\n        const pos = JSON.parse(saved);\n        // 验证位置是否在屏幕内\n        const targetWindow = window.top || window;\n        const maxX = $(targetWindow).width()! - 80;\n        const maxY = $(targetWindow).height()! - 80;\n\n        // 确保位置有效\n        if (pos.left >= 0 && pos.left <= maxX && pos.top >= 0 && pos.top <= maxY) {\n          btn.style.left = pos.left + 'px';\n          btn.style.top = pos.top + 'px';\n          console.log('📍 恢复按钮位置:', pos);\n        } else {\n          console.log('⚠️ 保存的位置无效，使用默认位置');\n        }\n      }\n    } catch (e) {\n      console.warn('⚠️ 恢复按钮位置失败');\n    }\n  }\n\n  // 初始化按钮拖动功能\n  initializeButtonDrag(targetDoc);\n\n  // 初始化面板功能\n  initializePanelSystem(targetDoc);\n\n  // 初始化模态框事件\n  initializeModalEvents(targetDoc);\n\n  console.log('✅ 网红小区插件初始化完成！');\n}\n\n// ==================== 按钮拖动功能 ====================\nfunction initializeButtonDrag(targetDoc: Document): void {\n  const btn = targetDoc.getElementById('ngq-toggle-btn');\n  const panel = targetDoc.getElementById('ngq-main-panel');\n  const $targetDoc = $(targetDoc);\n\n  // 拖动开始\n  function handleBtnDragStart(clientX: number, clientY: number): boolean {\n    if (btnDragData) return false;\n\n    const computedStyle = window.getComputedStyle(btn!);\n    const currentLeft = parseInt(computedStyle.left) || 0;\n    const currentTop = parseInt(computedStyle.top) || 0;\n\n    btnDragData = {\n      startX: clientX,\n      startY: clientY,\n      initialLeft: currentLeft,\n      initialTop: currentTop,\n    };\n\n    btn!.classList.add('dragging');\n    console.log('🖱️ 开始拖动按钮');\n    return true;\n  }\n\n  // 拖动移动\n  function handleBtnDragMove(clientX: number, clientY: number): void {\n    if (!btnDragData) return;\n\n    const deltaX = clientX - btnDragData.startX;\n    const deltaY = clientY - btnDragData.startY;\n\n    let newLeft = btnDragData.initialLeft + deltaX;\n    let newTop = btnDragData.initialTop + deltaY;\n\n    // 限制范围\n    const targetWindow = window.top || window;\n    const maxX = $(targetWindow).width()! - 80;\n    const maxY = $(targetWindow).height()! - 80;\n\n    newLeft = Math.max(0, Math.min(newLeft, maxX));\n    newTop = Math.max(0, Math.min(newTop, maxY));\n\n    btn!.style.left = newLeft + 'px';\n    btn!.style.top = newTop + 'px';\n  }\n\n  // 拖动结束\n  function handleBtnDragEnd(clientX: number, clientY: number): void {\n    if (!btnDragData) return;\n\n    btn!.classList.remove('dragging');\n\n    // 计算拖动距离\n    const deltaX = clientX - btnDragData.startX;\n    const deltaY = clientY - btnDragData.startY;\n    const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n\n    // 保存位置\n    const computedStyle = window.getComputedStyle(btn!);\n    const currentLeft = parseInt(computedStyle.left) || 0;\n    const currentTop = parseInt(computedStyle.top) || 0;\n\n    const position = {\n      left: currentLeft,\n      top: currentTop,\n    };\n\n    localStorage.setItem('ngq-btn-position', JSON.stringify(position));\n    console.log('✅ 按钮拖动结束，保存位置:', position);\n\n    btnDragData = null;\n\n    // 如果是点击（移动距离小于5像素），打开/关闭面板\n    if (distance < 5) {\n      console.log('🎨 检测到点击，切换面板');\n      panel!.classList.toggle('active');\n      // 打开面板时加载数据\n      if (panel!.classList.contains('active')) {\n        currentRetry = 0;\n        loadNgqData(targetDoc);\n      }\n    }\n  }\n\n  // 绑定事件\n  $(btn!).on('mousedown.ngq-plugin', function (e) {\n    if (handleBtnDragStart(e.clientX, e.clientY)) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  });\n\n  $(btn!).on('touchstart.ngq-plugin', function (e) {\n    const touch = e.originalEvent!.touches[0];\n    if (handleBtnDragStart(touch.clientX, touch.clientY)) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  });\n\n  $targetDoc.on('mousemove.ngq-plugin', function (e) {\n    handleBtnDragMove(e.clientX, e.clientY);\n    if (btnDragData) e.preventDefault();\n  });\n\n  $targetDoc.on('touchmove.ngq-plugin', function (e) {\n    const touch = e.originalEvent!.touches[0];\n    handleBtnDragMove(touch.clientX, touch.clientY);\n    if (btnDragData) e.preventDefault();\n  });\n\n  $targetDoc.on('mouseup.ngq-plugin', function (e) {\n    handleBtnDragEnd(e.clientX, e.clientY);\n  });\n\n  $targetDoc.on('touchend.ngq-plugin touchcancel.ngq-plugin', function (e) {\n    const touch = e.originalEvent!.changedTouches[0];\n    if (touch) {\n      handleBtnDragEnd(touch.clientX, touch.clientY);\n    } else {\n      handleBtnDragEnd(0, 0);\n    }\n  });\n\n  console.log('✅ 按钮拖动功能已初始化');\n}\n\n// ==================== 面板拖动 ====================\nfunction initializePanelDrag(targetDoc: Document): void {\n  const panel = $('#ngq-main-panel', targetDoc)[0];\n  const header = $('.ngq-header', targetDoc)[0];\n  const $targetDoc = $(targetDoc);\n\n  if (!panel || !header) {\n    console.error('❌ 面板或头部元素未找到');\n    return;\n  }\n\n  function handlePanelDragStart(clientX: number, clientY: number): void {\n    console.log('🖱️ 开始拖动面板');\n    const rect = panel!.getBoundingClientRect();\n\n    panel!.style.setProperty('transform', 'none', 'important');\n    panel!.style.setProperty('left', `${rect.left}px`, 'important');\n    panel!.style.setProperty('top', `${rect.top}px`, 'important');\n\n    panelDragData = {\n      startX: clientX,\n      startY: clientY,\n      initialLeft: rect.left,\n      initialTop: rect.top,\n    };\n    $(panel!).addClass('dragging');\n    $(header!).addClass('dragging');\n    console.log('✅ 面板拖动数据已设置:', panelDragData);\n  }\n\n  function handlePanelDragMove(clientX: number, clientY: number): void {\n    if (!panelDragData) return;\n\n    const deltaX = clientX - panelDragData.startX;\n    const deltaY = clientY - panelDragData.startY;\n    const newLeft = panelDragData.initialLeft + deltaX;\n    const newTop = panelDragData.initialTop + deltaY;\n\n    panel!.style.setProperty('left', `${newLeft}px`, 'important');\n    panel!.style.setProperty('top', `${newTop}px`, 'important');\n  }\n\n  function handlePanelDragEnd(): void {\n    console.log('🖱️ 面板拖动结束');\n    if (panelDragData) {\n      const rect = panel!.getBoundingClientRect();\n      const savedPosition = {\n        left: rect.left,\n        top: rect.top,\n      };\n      localStorage.setItem('ngq-panel-position', JSON.stringify(savedPosition));\n      console.log('✅ 面板拖动结束，保存位置:', savedPosition);\n    }\n\n    panelDragData = null;\n    $(panel!).removeClass('dragging');\n    $(header!).removeClass('dragging');\n  }\n\n  // 鼠标事件\n  $(header!).on('mousedown.ngq-panel-drag', function (e) {\n    if ($(e.target).closest('#ngq-close-btn').length > 0) {\n      console.log('⚠️ 点击了关闭按钮，跳过拖动');\n      return;\n    }\n    e.preventDefault();\n    handlePanelDragStart(e.clientX, e.clientY);\n  });\n\n  $targetDoc.on('mousemove.ngq-panel-drag', function (e) {\n    handlePanelDragMove(e.clientX, e.clientY);\n  });\n\n  $targetDoc.on('mouseup.ngq-panel-drag', function () {\n    handlePanelDragEnd();\n  });\n\n  // 触摸事件\n  $(header!).on('touchstart.ngq-panel-drag', function (e) {\n    if ($(e.target).closest('#ngq-close-btn').length > 0) {\n      console.log('⚠️ 触摸了关闭按钮，跳过拖动');\n      return;\n    }\n    const touch = e.originalEvent!.touches[0];\n    if (touch) {\n      e.preventDefault();\n      handlePanelDragStart(touch.clientX, touch.clientY);\n    }\n  });\n\n  $targetDoc.on('touchmove.ngq-panel-drag', function (e) {\n    const touch = e.originalEvent!.touches[0];\n    if (touch) {\n      handlePanelDragMove(touch.clientX, touch.clientY);\n    }\n  });\n\n  $targetDoc.on('touchend.ngq-panel-drag touchcancel.ngq-panel-drag', function () {\n    handlePanelDragEnd();\n  });\n\n  // 恢复保存的位置\n  const savedPos = localStorage.getItem('ngq-panel-position');\n  if (savedPos) {\n    try {\n      const pos = JSON.parse(savedPos);\n      panel!.style.setProperty('transform', 'none', 'important');\n      panel!.style.setProperty('left', `${pos.left}px`, 'important');\n      panel!.style.setProperty('top', `${pos.top}px`, 'important');\n      console.log('✅ 已恢复面板位置:', pos);\n    } catch (e) {\n      console.error('❌ 恢复面板位置失败:', e);\n    }\n  }\n\n  console.log('✅ 面板拖动功能已初始化');\n}\n\n// ==================== 面板系统 ====================\nfunction initializePanelSystem(targetDoc: Document): void {\n  const closeBtn = targetDoc.getElementById('ngq-close-btn');\n  if (closeBtn) {\n    closeBtn.addEventListener('click', e => {\n      e.stopPropagation();\n      const panel = targetDoc.getElementById('ngq-main-panel');\n      if (panel) {\n        panel.classList.remove('active');\n      }\n    });\n  }\n\n  // 初始化面板拖动\n  initializePanelDrag(targetDoc);\n\n  console.log('✅ 面板系统已初始化');\n}\n\n// ==================== 数据加载 ====================\nasync function loadNgqData(targetDoc: Document): Promise<void> {\n  try {\n    // 检查 MVU 是否可用\n    if (typeof Mvu === 'undefined') {\n      try {\n        if (window.parent && typeof (window.parent as any).Mvu !== 'undefined') {\n          (window as any).Mvu = (window.parent as any).Mvu;\n          console.log('✅ 已从父窗口引用 MVU');\n        } else {\n          throw new Error('父窗口中也没有 MVU');\n        }\n      } catch (e) {\n        console.warn('⚠️ MVU 框架未加载或无法访问父窗口');\n        if (currentRetry < MAX_RETRIES) {\n          currentRetry++;\n          console.log(`🔄 第 ${currentRetry}/${MAX_RETRIES} 次重试加载 MVU...`);\n          setTimeout(() => loadNgqData(targetDoc), RETRY_DELAY);\n        } else {\n          showError(targetDoc, 'MVU 框架未加载，请确保已安装酒馆助手并启用 MVU 框架');\n        }\n        return;\n      }\n    }\n\n    // 获取最新消息的 MVU 数据\n    const mvuResult = Mvu.getMvuData({\n      type: 'message',\n      message_id: 'latest',\n    });\n\n    const data = mvuResult?.stat_data;\n\n    if (!data) {\n      console.warn('⚠️ MVU 数据为空');\n      if (currentRetry < MAX_RETRIES) {\n        currentRetry++;\n        setTimeout(() => loadNgqData(targetDoc), RETRY_DELAY);\n      } else {\n        showError(targetDoc, '未能加载数据');\n      }\n      return;\n    }\n\n    cachedMVUData = data;\n    console.log('✅ 数据加载成功', data);\n\n    // 渲染数据\n    renderNgqData(targetDoc, data);\n  } catch (error) {\n    console.error('❌ 加载数据出错:', error);\n    showError(targetDoc, '加载出错: ' + (error as Error).message);\n  }\n}\n\nfunction showError(targetDoc: Document, message: string): void {\n  const contentDiv = targetDoc.getElementById('ngq-content');\n  if (contentDiv) {\n    contentDiv.innerHTML = `\n      <div class=\"ngq-empty\">\n        <div class=\"ngq-empty-icon\">⚠️</div>\n        <div class=\"ngq-empty-text\">${message}</div>\n      </div>\n    `;\n  }\n}\n\n// ==================== 数据渲染 ====================\nfunction renderNgqData(targetDoc: Document, data: AnyObject): void {\n  const contentDiv = targetDoc.getElementById('ngq-content');\n  const timeDisplay = targetDoc.getElementById('ngq-time-display');\n\n  if (!contentDiv) return;\n\n  // 更新时间显示\n  if (timeDisplay) {\n    const date =\n      `${safeGetValue(data, '世界.年份', '')} ${safeGetValue(data, '世界.日期', '')} ${safeGetValue(data, '世界.星期', '')}`.trim();\n    const time = safeGetValue(data, '世界.时间', '');\n    const location = safeGetValue(data, '世界.地点', '东海市·荟萃城');\n    timeDisplay.textContent = `${location} | ${date} ${time}`;\n  }\n\n  // 构建 HTML\n  const html = renderOverviewPage(data);\n\n  contentDiv.innerHTML = html;\n\n  // 只在第一次绑定事件（避免重复绑定导致多次触发）\n  if (!contentEventsInitialized) {\n    initializeContentEvents(targetDoc);\n    contentEventsInitialized = true;\n    console.log('✅ 内容区事件已绑定（首次）');\n  }\n}\n\n// ==================== 渲染总览页面 ====================\nfunction renderOverviewPage(data: AnyObject): string {\n  if (!data) {\n    return '<div class=\"ngq-empty\"><div class=\"ngq-empty-icon\">📭</div><div>暂无数据</div></div>';\n  }\n\n  const cfg = data?.公寓?.楼层配置 || {};\n  const rooms = (data?.公寓?.房间列表 && data.公寓.房间列表[0]) || {};\n\n  const floors = Object.keys(cfg)\n    .filter(k => k !== '$meta')\n    .map(k => ({\n      key: k,\n      order: parseFloat(safeGetValue(cfg[k], '顺序', '0')) || 0,\n      name: safeGetValue(cfg[k], '显示名称', k),\n      capacity: safeGetValue(cfg[k], '总容量', '10'),\n    }))\n    .sort((a, b) => b.order - a.order);\n\n  if (floors.length === 0) {\n    return '<div class=\"ngq-empty\"><div class=\"ngq-empty-icon\">🏗️</div><div>未找到楼层数据</div></div>';\n  }\n\n  let html = '<div style=\"display:flex;flex-direction:column;gap:12px\">';\n\n  floors.forEach(floor => {\n    html += renderSingleFloor(floor, rooms);\n  });\n\n  html += '</div>';\n\n  // 添加操作按钮\n  html += `\n    <div class=\"ngq-card\" style=\"margin-top:16px\">\n      <div class=\"ngq-card-title\">\n        <span>🏢</span>\n        <span>小区管理</span>\n      </div>\n      <div class=\"ngq-card-body\">\n        <div class=\"ngq-management-actions\">\n          <button class=\"ngq-btn\" data-action=\"recruit\">👤 招募新租客</button>\n          <button class=\"ngq-btn\" data-action=\"buy-floor\">🏗️ 购置新楼层</button>\n        </div>\n        <div class=\"ngq-management-actions\" style=\"margin-top:12px\">\n          <button class=\"ngq-btn\" data-action=\"refresh\">🔄 刷新数据</button>\n          <button class=\"ngq-btn\" data-action=\"auto-refresh\" id=\"auto-refresh-btn\">⏱️ 自动刷新: 关</button>\n        </div>\n        <div style=\"margin-top:12px;padding:12px;background:rgba(255,107,157,0.1);border-radius:8px;font-size:13px;color:var(--apt-dim);line-height:1.5\">\n          💡 提示：购置新楼层将同时建造4个公寓单元（如四楼：401/402/403/404）\n        </div>\n      </div>\n    </div>\n  `;\n\n  return html;\n}\n\nfunction renderSingleFloor(floor: any, rooms: any): string {\n  let html = `<div class=\"ngq-floor-level\">`;\n  html += `<div class=\"ngq-floor-level-title\">🏢 ${floor.name}</div>`;\n  html += `<div class=\"ngq-floor-grid\">`;\n\n  const floorRooms: Array<{ name: string; type: string; tenant: string; position: string }> = [];\n  const roomKeys = Object.keys(rooms).filter(k => k !== '$meta');\n\n  roomKeys.forEach(roomKey => {\n    const r = rooms[roomKey];\n    const layout = r?.布局;\n    if (!layout || typeof layout !== 'object') return;\n\n    const floorName = typeof layout.楼层 === 'string' ? layout.楼层 : String(layout.楼层 || '');\n    if (floorName !== floor.name) return;\n\n    const type = safeGetValue(r, '类型', '套间');\n    const tenant = safeGetValue(r, '住户', '未知');\n    const position = typeof layout.位置 === 'string' ? layout.位置 : String(layout.位置 || '');\n    floorRooms.push({ name: roomKey, type, tenant, position });\n  });\n\n  // 按单元号排序：A/B/C/D区（01/02/03/04）\n  floorRooms.sort((a, b) => {\n    const getOrder = (pos: string) => {\n      if (pos.includes('A区') || pos.includes('01')) return 1;\n      if (pos.includes('B区') || pos.includes('02')) return 2;\n      if (pos.includes('C区') || pos.includes('03')) return 3;\n      if (pos.includes('D区') || pos.includes('04')) return 4;\n      return 0;\n    };\n    const orderDiff = getOrder(a.position) - getOrder(b.position);\n    return orderDiff !== 0 ? orderDiff : a.name.localeCompare(b.name);\n  });\n\n  if (floorRooms.length === 0) {\n    html += `<div style=\"padding:20px;text-align:center;color:var(--apt-dim)\">该楼层暂无房间</div>`;\n    html += `</div></div>`;\n    return html;\n  }\n\n  // 合并相邻的同类型公共设施\n  const mergedRooms: Array<{\n    rooms: string[];\n    type: string;\n    tenant: string;\n    isMerged: boolean;\n  }> = [];\n  const skipIndices = new Set<number>();\n\n  for (let i = 0; i < floorRooms.length; i++) {\n    if (skipIndices.has(i)) continue;\n\n    const currentRoom = floorRooms[i];\n    const isPublic = ['公共客厅', '健身房'].includes(currentRoom.type);\n\n    // 检查下一个房间是否是相同类型的公共设施\n    if (isPublic && i + 1 < floorRooms.length) {\n      const nextRoom = floorRooms[i + 1];\n      if (nextRoom.type === currentRoom.type) {\n        // 合并两个房间\n        mergedRooms.push({\n          rooms: [currentRoom.name, nextRoom.name],\n          type: currentRoom.type,\n          tenant: currentRoom.tenant,\n          isMerged: true,\n        });\n        skipIndices.add(i + 1);\n        continue;\n      }\n    }\n\n    // 不合并，单独显示\n    mergedRooms.push({\n      rooms: [currentRoom.name],\n      type: currentRoom.type,\n      tenant: currentRoom.tenant,\n      isMerged: false,\n    });\n  }\n\n  // 渲染房间（包括合并的）\n  mergedRooms.forEach(roomGroup => {\n    const isYourRoom = roomGroup.type === '您的房间';\n    const isEmptyRoom = roomGroup.type === '空房间';\n    const isSuite = roomGroup.type === '套间';\n    const isPublicLounge = roomGroup.type === '公共客厅';\n    const isPublicGym = roomGroup.type === '健身房';\n    const isPublicLaundry = roomGroup.type === '洗衣间';\n    const isDefaultPublic = isPublicLounge || isPublicGym || isPublicLaundry;\n    // 用户自定义功能性房间：不是套间、不是您的房间、不是空房间、也不是默认公共设施\n    const isCustomFunctional = !isSuite && !isYourRoom && !isEmptyRoom && !isDefaultPublic;\n    const isVacant = roomGroup.tenant === '未知' && isSuite;\n\n    let cls = '';\n    if (isYourRoom) cls = 'your';\n    else if (isEmptyRoom) cls = 'empty';\n    else if (isPublicLounge) cls = 'public-lounge';\n    else if (isPublicGym) cls = 'public-gym';\n    else if (isPublicLaundry) cls = 'public-laundry';\n    else if (isCustomFunctional) cls = 'custom-functional';\n    else if (isVacant) cls = 'bedroom vacant';\n    else cls = 'bedroom';\n\n    if (roomGroup.isMerged) cls += ' merged';\n\n    const tenantDisplay = roomGroup.tenant === '<user>' ? '房东' : roomGroup.tenant === '未知' ? '' : roomGroup.tenant;\n\n    // 图标选择\n    let roomIcon = '🏠';\n    if (isYourRoom) roomIcon = '👑';\n    else if (isEmptyRoom) roomIcon = '🔧';\n    else if (isPublicLounge) roomIcon = '🛋️';\n    else if (isPublicGym) roomIcon = '💪';\n    else if (isPublicLaundry) roomIcon = '🧺';\n    else if (isCustomFunctional) roomIcon = '🏢'; // 用户自定义功能性房间使用建筑图标\n\n    // 房间名称显示\n    const roomName = roomGroup.isMerged ? `${roomGroup.rooms[0]}-${roomGroup.rooms[1]}` : roomGroup.rooms[0];\n\n    // 房间类型标签\n    let typeLabel = '';\n    if (isPublicLounge) typeLabel = '公共客厅';\n    else if (isPublicGym) typeLabel = '健身房';\n    else if (isPublicLaundry) typeLabel = '洗衣间';\n    else if (isCustomFunctional) typeLabel = roomGroup.type; // 用户自定义功能性房间显示类型名称\n\n    html += `<div class=\"ngq-room-card ${cls}\" data-room=\"${roomGroup.rooms[0]}\" data-room-type=\"${roomGroup.type}\" data-room-tenant=\"${roomGroup.tenant}\">`;\n    html += `<div class=\"ngq-room-name\">${roomIcon} ${roomName}</div>`;\n    if (isYourRoom) {\n      html += `<div class=\"ngq-room-occupant\">🔑 房东自住</div>`;\n    } else if (isEmptyRoom) {\n      html += `<div class=\"ngq-room-occupant\">🔨 未装修</div>`;\n    } else if (isDefaultPublic) {\n      html += `<div class=\"ngq-room-occupant\">✨ ${typeLabel}</div>`;\n    } else if (isCustomFunctional) {\n      html += `<div class=\"ngq-room-occupant\">🎨 ${typeLabel}</div>`; // 显示房间名称\n    } else if (tenantDisplay) {\n      html += `<div class=\"ngq-room-occupant\">👤 ${tenantDisplay}</div>`;\n    } else {\n      html += `<div class=\"ngq-room-occupant\">🏷️ 待出租</div>`;\n    }\n    html += `</div>`;\n  });\n\n  html += `</div></div>`;\n  return html;\n}\n\n// ==================== 内容事件绑定 ====================\n// 注意：此函数只在第一次渲染时调用一次，避免重复绑定事件导致多次触发\nfunction initializeContentEvents(targetDoc: Document): void {\n  const content = targetDoc.getElementById('ngq-content');\n  if (!content) return;\n\n  // 房间卡片点击事件\n  content.addEventListener('click', e => {\n    const target = e.target as HTMLElement;\n    const roomCard = target.closest('.ngq-room-card') as HTMLElement;\n    if (roomCard) {\n      e.preventDefault();\n      e.stopPropagation();\n      const roomName = roomCard.getAttribute('data-room');\n      const roomType = roomCard.getAttribute('data-room-type');\n      const roomTenant = roomCard.getAttribute('data-room-tenant');\n      console.log('🖱️ 点击房间卡片:', { roomName, roomType, roomTenant });\n      console.log('🔍 roomCard HTML:', roomCard.outerHTML.substring(0, 200));\n      if (roomName) {\n        // 如果是空房间，打开装修选择模态框\n        if (roomType === '空房间') {\n          console.log('✅ 检测到空房间，打开装修选择模态框');\n          openRenovateModal(targetDoc, roomName);\n        } else {\n          // 否则打开房间详情模态框\n          console.log('✅ 打开房间详情模态框');\n          openRoomModal(targetDoc, roomName, roomType || '', roomTenant || '');\n        }\n      } else {\n        console.warn('⚠️ roomName 为空，无法打开模态框');\n      }\n      return;\n    }\n  });\n\n  // 按钮点击事件（使用事件委托）\n  content.addEventListener('click', e => {\n    const target = e.target as HTMLElement;\n    if (!target.matches('button[data-action]')) return;\n\n    const action = target.getAttribute('data-action');\n    const name = target.getAttribute('data-name');\n\n    if (action === 'favor-add' && name) {\n      e.preventDefault();\n      e.stopPropagation();\n      fillCommand(`_.add('租客列表[0].${name}.好感度[0]', 5); // 交互友好，略微提升好感`);\n    } else if (action === 'recruit') {\n      e.preventDefault();\n      e.stopPropagation();\n      openRecruitmentModal(targetDoc);\n    } else if (action === 'buy-floor') {\n      e.preventDefault();\n      e.stopPropagation();\n      fillCommand(`购置新楼层（需同时建造4个公寓单元：01/02/03/04）`);\n    } else if (action === 'refresh') {\n      e.preventDefault();\n      e.stopPropagation();\n      void loadNgqData(targetDoc);\n    } else if (action === 'auto-refresh') {\n      e.preventDefault();\n      e.stopPropagation();\n      if (autoRefreshTimer) {\n        clearInterval(autoRefreshTimer);\n        autoRefreshTimer = null;\n        target.textContent = '⏱️ 自动刷新: 关';\n      } else {\n        autoRefreshTimer = window.setInterval(() => {\n          void loadNgqData(targetDoc);\n        }, 4000);\n        target.textContent = '⏱️ 自动刷新: 开';\n      }\n    }\n  });\n}\n\n// ==================== 模态框功能 ====================\nfunction openRecruitmentModal(targetDoc: Document): void {\n  const modal = targetDoc.getElementById('ngq-recruitment-modal');\n  const input = targetDoc.getElementById('ngq-recruitment-keywords') as HTMLInputElement;\n  if (modal && input) {\n    modal.classList.remove('hidden');\n    // 清空输入框并聚焦\n    input.value = '';\n    setTimeout(() => {\n      input.focus();\n    }, 100);\n  }\n}\n\nfunction closeRecruitmentModal(targetDoc: Document): void {\n  const modal = targetDoc.getElementById('ngq-recruitment-modal');\n  if (modal) {\n    modal.classList.add('hidden');\n  }\n}\n\nfunction confirmRecruitment(targetDoc: Document): void {\n  const input = targetDoc.getElementById('ngq-recruitment-keywords') as HTMLInputElement;\n  if (input) {\n    const keywords = input.value.trim();\n    if (keywords) {\n      fillCommand(`招募一名符合以下特征的租客：${keywords}`);\n    } else {\n      alert('请输入租客特征后再确认。');\n      return;\n    }\n    closeRecruitmentModal(targetDoc);\n  }\n}\n\n// 房间详情模态框\nfunction openRoomModal(targetDoc: Document, roomName: string, roomType: string, tenantName: string): void {\n  const modal = targetDoc.getElementById('ngq-room-modal');\n  const title = targetDoc.getElementById('ngq-room-modal-title');\n  const body = targetDoc.getElementById('ngq-room-modal-body');\n\n  if (!modal || !title || !body || !cachedMVUData) return;\n\n  // 获取完整房间数据\n  const roomData = cachedMVUData?.公寓?.房间列表?.[0]?.[roomName];\n\n  // 设置标题\n  const isYourRoom = roomType === '您的房间';\n  const isPublicLounge = roomType === '公共客厅';\n  const isPublicGym = roomType === '健身房';\n  const isPublicLaundry = roomType === '洗衣间';\n  const isPublic = isPublicLounge || isPublicGym || isPublicLaundry;\n\n  let roomIcon = '🏠';\n  if (isYourRoom) roomIcon = '👑';\n  else if (isPublicLounge) roomIcon = '🛋️';\n  else if (isPublicGym) roomIcon = '💪';\n  else if (isPublicLaundry) roomIcon = '🧺';\n\n  title.textContent = `${roomIcon} ${roomName}`;\n\n  // 构建内容\n  let content = '';\n\n  if (!roomData) {\n    content = '<div class=\"ngq-empty\"><div class=\"ngq-empty-icon\">❓</div><div>房间数据不存在</div></div>';\n  } else {\n    // 房间基本信息\n    content += '<div style=\"margin-bottom:16px\">';\n    content += `<div class=\"ngq-info-row\"><span class=\"ngq-info-label\">房间类型</span><span class=\"ngq-info-value\">${roomType}</span></div>`;\n\n    const layout = roomData?.布局;\n    if (layout && typeof layout === 'object') {\n      const floor = layout.楼层 || '未知';\n      const position = layout.位置 || '未知';\n      const positionIcon =\n        position === 'A区'\n          ? '🅰 A区'\n          : position === 'B区'\n            ? '🅱 B区'\n            : position === 'C区'\n              ? '🅲 C区'\n              : position === 'D区'\n                ? '🅳 D区'\n                : position;\n      content += `<div class=\"ngq-info-row\"><span class=\"ngq-info-label\">所在楼层</span><span class=\"ngq-info-value\">${floor}</span></div>`;\n      content += `<div class=\"ngq-info-row\"><span class=\"ngq-info-label\">位置</span><span class=\"ngq-info-value\">${positionIcon}</span></div>`;\n    }\n\n    const desc = safeGetValue(roomData, '描述', '');\n    if (desc) {\n      content += `<div class=\"ngq-info-row\" style=\"display:block\"><span class=\"ngq-info-label\">房间描述</span><div style=\"margin-top:6px;color:var(--apt-text);line-height:1.5\">${desc}</div></div>`;\n    }\n\n    content += '</div>';\n\n    // 如果是套间且有租客，显示租客信息\n    if (roomType === '套间' && tenantName && tenantName !== '未知') {\n      const tenantData = cachedMVUData?.租客列表?.[0]?.[tenantName];\n\n      if (tenantData) {\n        content += '<div style=\"border-top:1px solid var(--apt-border);padding-top:16px;margin-top:8px\">';\n        content +=\n          '<div style=\"font-size:1.1em;font-weight:600;margin-bottom:12px;color:var(--apt-primary)\">👤 租客信息</div>';\n\n        const age = safeGetValue(tenantData, '年龄', '-');\n        const job = safeGetValue(tenantData, '职业', '-');\n        const creatorType = safeGetValue(tenantData, '创作内容', '-');\n        const appearance = safeGetValue(tenantData, '外貌', '-');\n        const personality = safeGetValue(tenantData, '性格', '-');\n        const favorValue = parseInt(safeGetValue(tenantData, '好感度', '0')) || 0;\n        const lustValue = parseInt(safeGetValue(tenantData, '性欲', '0')) || 0;\n        const days = safeGetValue(tenantData, '入住天数', '0');\n        const state = safeGetValue(tenantData, '状态', '-');\n        const mood = safeGetValue(tenantData, '内心', '-');\n\n        // 基本信息\n        content += `<div class=\"ngq-info-row\"><span class=\"ngq-info-label\">姓名</span><span class=\"ngq-info-value\">${tenantName}</span></div>`;\n        content += `<div class=\"ngq-info-row\"><span class=\"ngq-info-label\">年龄</span><span class=\"ngq-info-value\">${age}岁</span></div>`;\n        content += `<div class=\"ngq-info-row\"><span class=\"ngq-info-label\">职业</span><span class=\"ngq-info-value\">📱 ${job}</span></div>`;\n        content += `<div class=\"ngq-info-row\"><span class=\"ngq-info-label\">创作内容</span><span class=\"ngq-info-value\">✨ ${creatorType}</span></div>`;\n\n        // 好感度进度条\n        content += `<div class=\"ngq-info-block\">`;\n        content += `<span class=\"ngq-info-label\">❤️ 好感度</span>`;\n        content += `<div class=\"ngq-progress-bar\">`;\n        content += `<div class=\"ngq-progress-fill favor\" style=\"width:${favorValue}%\">${favorValue}</div>`;\n        content += `</div></div>`;\n\n        // 性欲进度条\n        content += `<div class=\"ngq-info-block\">`;\n        content += `<span class=\"ngq-info-label\">🔥 性欲</span>`;\n        content += `<div class=\"ngq-progress-bar\">`;\n        content += `<div class=\"ngq-progress-fill lust\" style=\"width:${lustValue}%\">${lustValue}</div>`;\n        content += `</div></div>`;\n\n        // 长文本信息（块级显示）\n        content += `<div class=\"ngq-info-block\"><span class=\"ngq-info-label\">外貌特征</span><div class=\"ngq-info-value\">${appearance}</div></div>`;\n        content += `<div class=\"ngq-info-block\"><span class=\"ngq-info-label\">性格</span><div class=\"ngq-info-value\">${personality}</div></div>`;\n        content += `<div class=\"ngq-info-block\"><span class=\"ngq-info-label\">当前状态</span><div class=\"ngq-info-value\">${state}</div></div>`;\n        content += `<div class=\"ngq-info-block\"><span class=\"ngq-info-label\">内心想法</span><div class=\"ngq-info-value\">${mood}</div></div>`;\n\n        // 其他信息（行内显示）\n        content += `<div class=\"ngq-info-row\"><span class=\"ngq-info-label\">入住天数</span><span class=\"ngq-info-value\">📅 ${days}天</span></div>`;\n\n        content += '</div>';\n      }\n    } else if (roomType === '套间') {\n      content += '<div style=\"text-align:center;padding:20px;color:var(--apt-dim)\">🏠 该套间暂无租客入住</div>';\n    } else if (isYourRoom) {\n      content += '<div style=\"text-align:center;padding:20px;color:var(--apt-dim)\">👑 这是您的私人套间</div>';\n    } else if (isPublic) {\n      // 显示公共设施信息\n      const desc = typeof roomData?.描述 === 'string' ? roomData.描述 : '';\n      const funcArea = typeof roomData?.功能区 === 'string' ? roomData.功能区 : '';\n\n      // 根据设施类型设置标题颜色\n      let facilityColor = 'var(--apt-primary)';\n      let facilityIcon = '✨';\n      if (isPublicLounge) {\n        facilityColor = '#f59e0b';\n        facilityIcon = '🛋️';\n      } else if (isPublicGym) {\n        facilityColor = '#10b981';\n        facilityIcon = '💪';\n      } else if (isPublicLaundry) {\n        facilityColor = '#0ea5e9';\n        facilityIcon = '🧺';\n      }\n\n      content += `<div style=\"text-align:center;padding:20px;color:var(--apt-text)\">`;\n      content += `<div style=\"font-size:16px;font-weight:600;color:${facilityColor};margin-bottom:16px\">${facilityIcon} ${roomType}</div>`;\n      if (desc) {\n        content += `<div style=\"margin-bottom:12px;font-size:14px;color:var(--apt-dim);line-height:1.6\">${desc}</div>`;\n      }\n      if (funcArea) {\n        content += `<div style=\"font-size:13px;color:${facilityColor};margin-top:12px;padding:8px;background:rgba(255,255,255,0.05);border-radius:6px\">🔧 ${funcArea}</div>`;\n      }\n      content += `<div style=\"margin-top:16px;font-size:13px;color:var(--apt-dim);padding:12px;background:rgba(255,255,255,0.03);border-radius:8px;border:1px dashed ${facilityColor}\">✨ 免费对所有租客开放</div>`;\n      content += `</div>`;\n    }\n  }\n\n  body.innerHTML = content;\n\n  // 判断是否显示拆除按钮\n  const demolishActionsDiv = targetDoc.getElementById('ngq-room-demolish-actions');\n  if (demolishActionsDiv) {\n    // 默认公共设施房间号（不可拆除）\n    const defaultPublicRooms = ['101', '102', '103', '104', '204', '304'];\n\n    // 判断是否可拆除\n    const canDemolish =\n      !isYourRoom && // 不是用户的房间\n      !defaultPublicRooms.includes(roomName) && // 不是默认公共设施\n      (roomType === '套间' ? tenantName === '未知' : true); // 套间需无人入住\n\n    if (canDemolish) {\n      demolishActionsDiv.style.display = 'flex';\n      currentRoomForDemolish = roomName;\n    } else {\n      demolishActionsDiv.style.display = 'none';\n      currentRoomForDemolish = '';\n    }\n  }\n\n  modal.classList.remove('hidden');\n}\n\nfunction closeRoomModal(targetDoc: Document): void {\n  const modal = targetDoc.getElementById('ngq-room-modal');\n  if (modal) {\n    modal.classList.add('hidden');\n    currentRoomForDemolish = '';\n  }\n}\n\n// 拆除房间\nfunction demolishRoom(targetDoc: Document): void {\n  if (!currentRoomForDemolish) return;\n\n  const confirmed = confirm(`确定要拆除 ${currentRoomForDemolish} 吗？\\n拆除后将变为空房间，需要重新装修才能使用。`);\n\n  if (confirmed) {\n    const command = `拆除 ${currentRoomForDemolish}，将其还原为空房间状态`;\n    fillCommand(command);\n    closeRoomModal(targetDoc);\n  }\n}\n\n// ==================== 装修选择模态框 ====================\nfunction openRenovateModal(targetDoc: Document, roomName: string): void {\n  console.log('🔍 openRenovateModal 被调用，传入的 roomName:', roomName, '类型:', typeof roomName);\n\n  const modal = targetDoc.getElementById('ngq-renovate-modal');\n  const info = targetDoc.getElementById('ngq-renovate-room-info');\n\n  if (!modal || !info) {\n    console.error('❌ 找不到装修模态框元素');\n    return;\n  }\n\n  currentRenovatingRoom = roomName;\n  console.log('✅ 已设置 currentRenovatingRoom:', currentRenovatingRoom);\n  info.textContent = `选择要将 ${roomName} 装修为何种类型：`;\n  modal.classList.remove('hidden');\n}\n\nfunction closeRenovateModal(targetDoc: Document, clearRoomName = true): void {\n  const modal = targetDoc.getElementById('ngq-renovate-modal');\n  if (modal) {\n    modal.classList.add('hidden');\n    // 只有在需要时才清空房间号（装修为标准套间时清空，转到功能性房间输入时保留）\n    if (clearRoomName) {\n      currentRenovatingRoom = '';\n    }\n  }\n}\n\nfunction renovateToSuite(targetDoc: Document): void {\n  if (!currentRenovatingRoom) return;\n\n  const command = `将 ${currentRenovatingRoom} 装修为标准套间（一室一厅一卫一厨，35-50㎡）`;\n  fillCommand(command);\n  closeRenovateModal(targetDoc);\n}\n\nfunction renovateToFunctional(targetDoc: Document): void {\n  if (!currentRenovatingRoom) return;\n\n  // 先打开功能性房间输入模态框，再关闭装修选择模态框（不清空 currentRenovatingRoom）\n  openFunctionalInputModal(targetDoc);\n  closeRenovateModal(targetDoc, false); // 传入 false 保留房间号\n}\n\n// ==================== 功能性房间详情输入模态框 ====================\nfunction openFunctionalInputModal(targetDoc: Document): void {\n  console.log('🔍 openFunctionalInputModal 被调用，房间号:', currentRenovatingRoom);\n\n  const modal = targetDoc.getElementById('ngq-functional-input-modal');\n  const info = targetDoc.getElementById('ngq-functional-room-info');\n  const nameInput = targetDoc.getElementById('ngq-functional-name') as HTMLInputElement;\n  const purposeInput = targetDoc.getElementById('ngq-functional-purpose') as HTMLInputElement;\n\n  console.log('🔍 找到的元素:', { modal, info, nameInput, purposeInput });\n\n  if (!modal || !info || !nameInput || !purposeInput) {\n    console.error('❌ 缺少必要元素，无法打开模态框');\n    return;\n  }\n\n  info.textContent = `请输入 ${currentRenovatingRoom} 的详细信息：`;\n  nameInput.value = '';\n  purposeInput.value = '';\n  modal.classList.remove('hidden');\n  setTimeout(() => nameInput.focus(), 100);\n  console.log('✅ 功能性房间输入模态框已打开');\n}\n\nfunction closeFunctionalInputModal(targetDoc: Document): void {\n  const modal = targetDoc.getElementById('ngq-functional-input-modal');\n  if (modal) {\n    modal.classList.add('hidden');\n  }\n}\n\nfunction confirmFunctionalRenovate(targetDoc: Document): void {\n  console.log('🔍 confirmFunctionalRenovate 被调用');\n  console.log('🔍 currentRenovatingRoom:', currentRenovatingRoom);\n\n  if (!currentRenovatingRoom) {\n    console.warn('⚠️ currentRenovatingRoom 为空，退出');\n    return;\n  }\n\n  const nameInput = targetDoc.getElementById('ngq-functional-name') as HTMLInputElement;\n  const purposeInput = targetDoc.getElementById('ngq-functional-purpose') as HTMLInputElement;\n\n  console.log('🔍 找到的输入框:', { nameInput, purposeInput });\n\n  const name = nameInput?.value.trim() || '';\n  const purpose = purposeInput?.value.trim() || '';\n\n  console.log('🔍 输入值:', { name, purpose });\n\n  if (!name) {\n    alert('请输入房间名称');\n    nameInput?.focus();\n    return;\n  }\n\n  if (!purpose) {\n    alert('请输入房间作用');\n    purposeInput?.focus();\n    return;\n  }\n\n  const command = `将 ${currentRenovatingRoom} 装修为功能性房间【${name}】，作用：${purpose}`;\n  console.log('✅ 生成命令:', command);\n  fillCommand(command);\n  closeFunctionalInputModal(targetDoc);\n  currentRenovatingRoom = '';\n}\n\nfunction initializeModalEvents(targetDoc: Document): void {\n  // 确认按钮\n  const confirmBtn = targetDoc.getElementById('ngq-modal-confirm');\n  if (confirmBtn) {\n    confirmBtn.addEventListener('click', () => {\n      confirmRecruitment(targetDoc);\n    });\n  }\n\n  // 取消按钮\n  const cancelBtn = targetDoc.getElementById('ngq-modal-cancel');\n  if (cancelBtn) {\n    cancelBtn.addEventListener('click', () => {\n      closeRecruitmentModal(targetDoc);\n    });\n  }\n\n  // 点击背景关闭\n  const modal = targetDoc.getElementById('ngq-recruitment-modal');\n  if (modal) {\n    modal.addEventListener('click', e => {\n      if (e.target === modal) {\n        closeRecruitmentModal(targetDoc);\n      }\n    });\n  }\n\n  // 回车确认\n  const input = targetDoc.getElementById('ngq-recruitment-keywords') as HTMLInputElement;\n  if (input) {\n    input.addEventListener('keypress', e => {\n      if (e.key === 'Enter') {\n        confirmRecruitment(targetDoc);\n      }\n    });\n  }\n\n  // 房间详情模态框关闭按钮\n  const roomCloseBtn = targetDoc.getElementById('ngq-room-modal-close');\n  if (roomCloseBtn) {\n    roomCloseBtn.addEventListener('click', () => {\n      closeRoomModal(targetDoc);\n    });\n  }\n\n  // 房间详情模态框拆除按钮\n  const roomDemolishBtn = targetDoc.getElementById('ngq-room-demolish');\n  if (roomDemolishBtn) {\n    roomDemolishBtn.addEventListener('click', () => {\n      demolishRoom(targetDoc);\n    });\n  }\n\n  // 点击背景关闭房间模态框\n  const roomModal = targetDoc.getElementById('ngq-room-modal');\n  if (roomModal) {\n    roomModal.addEventListener('click', e => {\n      if (e.target === roomModal) {\n        closeRoomModal(targetDoc);\n      }\n    });\n  }\n\n  // 装修模态框 - 装修为标准套间\n  const renovateSuiteBtn = targetDoc.getElementById('ngq-renovate-suite');\n  if (renovateSuiteBtn) {\n    renovateSuiteBtn.addEventListener('click', () => {\n      renovateToSuite(targetDoc);\n    });\n  }\n\n  // 装修模态框 - 装修为功能性房间\n  const renovateFunctionalBtn = targetDoc.getElementById('ngq-renovate-functional');\n  if (renovateFunctionalBtn) {\n    renovateFunctionalBtn.addEventListener('click', () => {\n      renovateToFunctional(targetDoc);\n    });\n  }\n\n  // 装修模态框 - 取消按钮\n  const renovateCancelBtn = targetDoc.getElementById('ngq-renovate-cancel');\n  if (renovateCancelBtn) {\n    renovateCancelBtn.addEventListener('click', () => {\n      closeRenovateModal(targetDoc);\n    });\n  }\n\n  // 点击背景关闭装修模态框\n  const renovateModal = targetDoc.getElementById('ngq-renovate-modal');\n  if (renovateModal) {\n    renovateModal.addEventListener('click', e => {\n      if (e.target === renovateModal) {\n        closeRenovateModal(targetDoc);\n      }\n    });\n  }\n\n  // 功能性房间输入模态框 - 确认按钮\n  const functionalConfirmBtn = targetDoc.getElementById('ngq-functional-confirm');\n  console.log('🔍 功能性房间确认按钮:', functionalConfirmBtn);\n  if (functionalConfirmBtn) {\n    functionalConfirmBtn.addEventListener('click', () => {\n      console.log('🖱️ 功能性房间确认按钮被点击');\n      confirmFunctionalRenovate(targetDoc);\n    });\n  } else {\n    console.error('❌ 未找到功能性房间确认按钮 (ngq-functional-confirm)');\n  }\n\n  // 功能性房间输入模态框 - 取消按钮\n  const functionalCancelBtn = targetDoc.getElementById('ngq-functional-cancel');\n  if (functionalCancelBtn) {\n    functionalCancelBtn.addEventListener('click', () => {\n      closeFunctionalInputModal(targetDoc);\n      currentRenovatingRoom = '';\n    });\n  }\n\n  // 点击背景关闭功能性房间输入模态框\n  const functionalModal = targetDoc.getElementById('ngq-functional-input-modal');\n  if (functionalModal) {\n    functionalModal.addEventListener('click', e => {\n      if (e.target === functionalModal) {\n        closeFunctionalInputModal(targetDoc);\n        currentRenovatingRoom = '';\n      }\n    });\n  }\n\n  // 功能性房间输入模态框 - 回车确认\n  const functionalNameInput = targetDoc.getElementById('ngq-functional-name') as HTMLInputElement;\n  const functionalPurposeInput = targetDoc.getElementById('ngq-functional-purpose') as HTMLInputElement;\n  if (functionalNameInput && functionalPurposeInput) {\n    [functionalNameInput, functionalPurposeInput].forEach(input => {\n      input.addEventListener('keypress', e => {\n        if (e.key === 'Enter') {\n          confirmFunctionalRenovate(targetDoc);\n        }\n      });\n    });\n  }\n\n  console.log('✅ 模态框事件已初始化');\n}\n\n// 填充命令到输入框\nfunction fillCommand(command: string): void {\n  try {\n    const chatInput = (parent.document || document).querySelector('#send_textarea') as HTMLTextAreaElement;\n    if (chatInput) {\n      if (chatInput.value.trim() !== '') {\n        chatInput.value += '\\n\\n' + command;\n      } else {\n        chatInput.value = command;\n      }\n      chatInput.focus();\n      console.log('✅ 命令已填充到输入框');\n    } else {\n      throw new Error('未找到输入框');\n    }\n  } catch (e) {\n    alert('未能自动找到输入框，请手动复制命令：\\n\\n' + command);\n    console.error('填充命令失败:', e);\n  }\n}\n\n// ==================== 启动脚本 ====================\nfunction waitForJQuery(callback: () => void): void {\n  if (typeof jQuery !== 'undefined' || typeof $ !== 'undefined') {\n    console.log('✅ jQuery 已就绪');\n    callback();\n  } else {\n    console.log('⏳ 等待 jQuery...');\n    setTimeout(() => waitForJQuery(callback), 100);\n  }\n}\n\n// 使用 jQuery 的方式初始化\nwaitForJQuery(() => {\n  $(() => {\n    console.log('✅ 开始初始化网红小区插件');\n    initializeNgqPlugin();\n  });\n});\n\nconsole.log('✅ 网红小区插件脚本加载完成');\n\n// 导出一个值以使其成为合法的ES Module\nexport const __initialized__ = true;\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","console","log","btnDragData","panelDragData","cachedMVUData","currentRetry","autoRefreshTimer","contentEventsInitialized","currentRenovatingRoom","currentRoomForDemolish","safeGetValue","path","defaultValue","keys","split","current","Array","isArray","length","String","initializeNgqPlugin","targetDoc","window","top","document","e","warn","getElementById","remove","$","off","head","insertAdjacentHTML","body","btn","saved","localStorage","getItem","pos","JSON","parse","targetWindow","maxX","width","maxY","height","left","style","panel","$targetDoc","handleBtnDragStart","clientX","clientY","computedStyle","getComputedStyle","currentLeft","parseInt","currentTop","startX","startY","initialLeft","initialTop","classList","add","handleBtnDragMove","deltaX","deltaY","newLeft","newTop","Math","max","min","handleBtnDragEnd","distance","sqrt","position","setItem","stringify","toggle","contains","loadNgqData","on","preventDefault","stopPropagation","touch","originalEvent","touches","changedTouches","initializeButtonDrag","closeBtn","addEventListener","header","error","handlePanelDragStart","rect","getBoundingClientRect","setProperty","addClass","handlePanelDragMove","handlePanelDragEnd","savedPosition","removeClass","target","closest","savedPos","initializePanelDrag","initializePanelSystem","confirmBtn","confirmRecruitment","cancelBtn","closeRecruitmentModal","modal","input","roomCloseBtn","closeRoomModal","roomDemolishBtn","confirm","fillCommand","demolishRoom","roomModal","renovateSuiteBtn","closeRenovateModal","renovateToSuite","renovateFunctionalBtn","info","nameInput","purposeInput","textContent","value","setTimeout","focus","openFunctionalInputModal","renovateToFunctional","renovateCancelBtn","renovateModal","functionalConfirmBtn","confirmFunctionalRenovate","functionalCancelBtn","closeFunctionalInputModal","functionalModal","functionalNameInput","functionalPurposeInput","forEach","initializeModalEvents","async","Mvu","parent","Error","showError","mvuResult","getMvuData","type","message_id","data","stat_data","contentDiv","timeDisplay","date","trim","time","location","html","cfg","rooms","floors","filter","k","map","order","parseFloat","name","capacity","sort","a","b","floor","floorRooms","roomKeys","roomKey","r","layout","tenant","push","getOrder","includes","orderDiff","localeCompare","mergedRooms","skipIndices","Set","i","has","currentRoom","nextRoom","isMerged","roomGroup","isYourRoom","isEmptyRoom","isSuite","isPublicLounge","isPublicGym","isPublicLaundry","isDefaultPublic","isCustomFunctional","isVacant","cls","tenantDisplay","roomIcon","roomName","typeLabel","renderSingleFloor","renderOverviewPage","innerHTML","content","roomCard","getAttribute","roomType","roomTenant","outerHTML","substring","openRenovateModal","tenantName","title","roomData","isPublic","desc","tenantData","age","job","creatorType","appearance","personality","favorValue","lustValue","days","funcArea","facilityColor","facilityIcon","demolishActionsDiv","display","openRoomModal","matches","action","openRecruitmentModal","clearInterval","setInterval","initializeContentEvents","renderNgqData","message","keywords","alert","clearRoomName","purpose","command","chatInput","querySelector","waitForJQuery","callback","jQuery","__initialized__"],"sourceRoot":""}