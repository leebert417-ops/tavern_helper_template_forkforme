import{createPinia as e,defineStore as t}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';const a=Vue,n=t('ui',{state:()=>({isPanelVisible:!1,activeModal:null,currentRoom:null,currentRenovatingRoom:'',currentRoomForDemolish:''}),getters:{hasModalOpen:e=>null!==e.activeModal,isRoomModalOpen:e=>'room'===e.activeModal,isRecruitmentModalOpen:e=>'recruitment'===e.activeModal,isRenovateModalOpen:e=>'renovate'===e.activeModal,isFunctionalInputModalOpen:e=>'functional-input'===e.activeModal,currentRoomNumber:e=>{if(!e.currentRoom)return'';const t=e.currentRoom.number;return Array.isArray(t)?t[0]||'':t||''}},actions:{openPanel(){this.isPanelVisible=!0,console.log('ğŸ“‚ é¢æ¿å·²æ‰“å¼€')},closePanel(){this.isPanelVisible=!1,console.log('ğŸ“ é¢æ¿å·²å…³é—­')},togglePanel(){this.isPanelVisible=!this.isPanelVisible,console.log('ğŸ“‚ é¢æ¿'+(this.isPanelVisible?'å·²æ‰“å¼€':'å·²å…³é—­'))},openModal(e,t){this.activeModal=e,t&&(this.currentRoom=t),console.log(`ğŸ”² æ‰“å¼€æ¨¡æ€æ¡†: ${e}`,t)},closeModal(){const e=this.activeModal;this.activeModal=null,this.currentRoom=null,this.currentRenovatingRoom='',this.currentRoomForDemolish='',console.log(`ğŸ”³ å…³é—­æ¨¡æ€æ¡†: ${e}`)},openRoomModal(e){this.openModal('room',e)},openRecruitmentModal(){this.openModal('recruitment')},openRenovateModal(e){this.currentRenovatingRoom=e,this.openModal('renovate')},openFunctionalInputModal(e){this.currentRenovatingRoom=e,this.openModal('functional-input')},setCurrentRoom(e){this.currentRoom=e},setCurrentRenovatingRoom(e){this.currentRenovatingRoom=e},setCurrentRoomForDemolish(e){this.currentRoomForDemolish=e},reset(){this.isPanelVisible=!1,this.activeModal=null,this.currentRoom=null,this.currentRenovatingRoom='',this.currentRoomForDemolish='',console.log('ğŸ”„ UI çŠ¶æ€å·²é‡ç½®')}}});function o(e){const{elementRef:t,handleRef:n,position:o,enabled:r=!0,constrainToViewport:l=!0,boundaryOffset:i=0,clickThreshold:s=5,onDragStart:p,onDragMove:d,onDragEnd:c,onClick:g}=e,u=(0,a.ref)(!1);return(0,a.onUnmounted)(()=>{unbindEvents()}),{isDragging:u}}const r=!1,l=3e4,i=5,s=400,p='ngq-plugin-position',d='ngq-plugin-settings';function c(e){const{key:t,defaultPosition:n={left:0,top:0},autoSave:o=!1,validateInViewport:r=!0}=e,l=(0,a.ref)({...n}),i=e=>{if(!r)return e;const t=window.innerWidth-100,a=window.innerHeight-100;return{left:Math.max(0,Math.min(e.left,t)),top:Math.max(0,Math.min(e.top,a))}},s=()=>{try{const e=localStorage.getItem(p);if(e)return JSON.parse(e)}catch(e){console.error('âŒ è¯»å–ä½ç½®å¤±è´¥:',e)}return{}},d=e=>{try{localStorage.setItem(p,JSON.stringify(e))}catch(e){console.error('âŒ ä¿å­˜ä½ç½®å¤±è´¥:',e)}},c=e=>{const a=e||l.value,n=i(a),o=s();o[t]=n,d(o),l.value=n,console.log(`ğŸ’¾ ${t} ä½ç½®å·²ä¿å­˜:`,n)};return o&&(0,a.watch)(l,e=>{c(e)},{deep:!0}),{position:l,savePosition:c,restorePosition:()=>{const e=s()[t];if(e){const a=i(e);return l.value=a,console.log(`ğŸ“‚ ${t} ä½ç½®å·²æ¢å¤:`,a),a}return l.value={...n},console.log(`â„¹ï¸ ${t} æœªæ‰¾åˆ°ä¿å­˜çš„ä½ç½®ï¼Œä½¿ç”¨é»˜è®¤å€¼:`,n),n},resetPosition:()=>{l.value={...n},c(n),console.log(`ğŸ”„ ${t} ä½ç½®å·²é‡ç½®ä¸ºé»˜è®¤å€¼:`,n)},clearSavedPosition:()=>{const e=s();delete e[t],d(e),console.log(`ğŸ—‘ï¸ ${t} ä¿å­˜çš„ä½ç½®å·²æ¸…é™¤`)}}}const g=['title'],u=(0,a.defineComponent)({__name:'ToggleButton',setup(e){const t=n(),r=(0,a.ref)(null),{position:l,savePosition:i,restorePosition:s}=c({key:'button',defaultPosition:{left:20,top:100},autoSave:!1}),{isDragging:p}=o({elementRef:r,position:l,enabled:!0,constrainToViewport:!0,boundaryOffset:10,clickThreshold:5,onDragStart:e=>{console.log('ğŸ–±ï¸ å¼€å§‹æ‹–åŠ¨æŒ‰é’®',e)},onDragEnd:(e,t)=>{console.log('âœ… æ‹–åŠ¨ç»“æŸ',{position:e,isClick:t}),i(e),t&&m()}}),d=(0,a.computed)(()=>({left:`${l.value.left}px`,top:`${l.value.top}px`})),u=(0,a.computed)(()=>t.isPanelVisible?'ç‚¹å‡»å…³é—­é¢æ¿':'ç‚¹å‡»æ‰“å¼€é¢æ¿'),m=()=>{console.log('ğŸ¨ æ£€æµ‹åˆ°ç‚¹å‡»ï¼Œåˆ‡æ¢é¢æ¿'),t.togglePanel()};return(0,a.onMounted)(()=>{const e=s();console.log('âœ… ToggleButton å·²æŒ‚è½½ï¼Œä½ç½®:',e)}),(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{ref_key:'buttonRef',ref:r,class:(0,a.normalizeClass)(['ngq-toggle-btn',{dragging:(0,a.unref)(p)}]),style:(0,a.normalizeStyle)(d.value),title:u.value},' ğŸ¢ ',14,g))}});function m(e,t){return null==e?t:Array.isArray(e)?e.length>0?e[0]:t:e}function v(e,t=''){const a=m(e);return null==a?t:String(a)}const f=t('apartment',{state:()=>({rawData:null,loading:!1,error:null,retryCount:0,lastUpdateTime:null}),getters:{hasData:e=>null!==e.rawData&&void 0!==e.rawData,floors:e=>e.rawData?.floors?e.rawData.floors:[],floorCount(){return this.floors.length},allRooms(){const e=[];return this.floors.forEach(t=>{t.rooms&&Array.isArray(t.rooms)&&e.push(...t.rooms)}),e},roomCount(){return this.allRooms.length},rentedRoomCount(){return this.allRooms.filter(e=>'æ ‡å‡†å¥—é—´'===v(e.type)&&e.tenant).length},emptyRoomCount(){return this.allRooms.filter(e=>'ç©ºæˆ¿é—´'===v(e.type)).length},functionalRoomCount(){return this.allRooms.filter(e=>'åŠŸèƒ½æ€§æˆ¿é—´'===v(e.type)).length},currentTime:e=>e.rawData?.current_time?v(e.rawData.current_time):'',apartmentName:e=>e.rawData?.apartment_name?v(e.rawData.apartment_name,'ç½‘çº¢å°åŒº'):'ç½‘çº¢å°åŒº',getRoomByNumber:e=>t=>{for(const a of e.rawData?.floors||[]){if(!a.rooms)continue;const e=a.rooms.find(e=>v(e.number)===t);if(e)return e}},getFloorByLevel:e=>t=>e.rawData?.floors?.find(e=>(Array.isArray(e.level)?e.level[0]:e.level)===t),canRetry:e=>e.retryCount<i},actions:{async loadData(){this.loading=!0,this.error=null;try{const e='undefined'!=typeof Mvu?Mvu:window.parent&&void 0!==window.parent.Mvu?(window.Mvu=window.parent.Mvu,window.Mvu):void 0;if(!e)throw new Error('MVU æ¡†æ¶æœªåŠ è½½æˆ–æ— æ³•è®¿é—®');const t={type:'message',message_id:'latest'},a=e.getMvuData(t),n=a?.stat_data;if(!n)throw new Error('MVU æ•°æ®ä¸ºç©º');return this.rawData=n,this.lastUpdateTime=Date.now(),this.retryCount=0,this.loading=!1,console.log('âœ… å…¬å¯“æ•°æ®åŠ è½½æˆåŠŸ',n),!0}catch(e){const t=e.message;return this.error=t,this.loading=!1,console.error('âŒ åŠ è½½å…¬å¯“æ•°æ®å¤±è´¥:',t),!!this.canRetry&&(this.retryCount++,console.log(`ğŸ”„ ç¬¬ ${this.retryCount}/${i} æ¬¡é‡è¯•...`),await new Promise(e=>setTimeout(e,s)),this.loadData())}},async refreshData(){return console.log('ğŸ”„ åˆ·æ–°å…¬å¯“æ•°æ®...'),this.retryCount=0,this.loadData()},clearData(){this.rawData=null,this.error=null,this.retryCount=0,this.lastUpdateTime=null,console.log('ğŸ—‘ï¸ å…¬å¯“æ•°æ®å·²æ¸…ç©º')},resetError(){this.error=null,this.retryCount=0},setData(e){this.rawData=e,this.lastUpdateTime=Date.now(),this.error=null,this.retryCount=0}}}),b=t('settings',{state:()=>({autoRefreshEnabled:r,refreshInterval:l,initialized:!1}),getters:{refreshIntervalSeconds(){return Math.floor(this.refreshInterval/1e3)},refreshIntervalMinutes(){return Math.floor(this.refreshInterval/6e4)},formattedRefreshInterval(){const e=this.refreshIntervalSeconds;if(e<60)return`${e}ç§’`;const t=this.refreshIntervalMinutes,a=e%60;return 0===a?`${t}åˆ†é’Ÿ`:`${t}åˆ†${a}ç§’`}},actions:{loadFromStorage(){try{const e=localStorage.getItem(d);if(e){const t=JSON.parse(e);this.autoRefreshEnabled=t.autoRefreshEnabled??r,this.refreshInterval=t.refreshInterval??l,console.log('âœ… è®¾ç½®å·²ä» localStorage åŠ è½½',t)}else console.log('â„¹ï¸ æœªæ‰¾åˆ°ä¿å­˜çš„è®¾ç½®ï¼Œä½¿ç”¨é»˜è®¤å€¼')}catch(e){console.error('âŒ åŠ è½½è®¾ç½®å¤±è´¥:',e),this.resetToDefaults()}finally{this.initialized=!0}},saveToStorage(){try{const e={autoRefreshEnabled:this.autoRefreshEnabled,refreshInterval:this.refreshInterval};localStorage.setItem(d,JSON.stringify(e)),console.log('ğŸ’¾ è®¾ç½®å·²ä¿å­˜åˆ° localStorage',e)}catch(e){console.error('âŒ ä¿å­˜è®¾ç½®å¤±è´¥:',e)}},toggleAutoRefresh(){this.autoRefreshEnabled=!this.autoRefreshEnabled,this.saveToStorage(),console.log('ğŸ”„ è‡ªåŠ¨åˆ·æ–°'+(this.autoRefreshEnabled?'å·²å¯ç”¨':'å·²ç¦ç”¨'))},enableAutoRefresh(){this.autoRefreshEnabled||(this.autoRefreshEnabled=!0,this.saveToStorage(),console.log('âœ… è‡ªåŠ¨åˆ·æ–°å·²å¯ç”¨'))},disableAutoRefresh(){this.autoRefreshEnabled&&(this.autoRefreshEnabled=!1,this.saveToStorage(),console.log('â¸ï¸ è‡ªåŠ¨åˆ·æ–°å·²ç¦ç”¨'))},setRefreshInterval(e){this.refreshInterval=Math.max(e,5e3),this.saveToStorage(),console.log(`â±ï¸ åˆ·æ–°é—´éš”å·²è®¾ç½®ä¸º ${this.formattedRefreshInterval}`)},setRefreshIntervalSeconds(e){this.setRefreshInterval(1e3*e)},setRefreshIntervalMinutes(e){this.setRefreshInterval(6e4*e)},resetToDefaults(){this.autoRefreshEnabled=r,this.refreshInterval=l,this.saveToStorage(),console.log('ğŸ”„ è®¾ç½®å·²é‡ç½®ä¸ºé»˜è®¤å€¼')},initialize(){this.initialized||this.loadFromStorage()},clearStorage(){try{localStorage.removeItem(d),this.resetToDefaults(),console.log('ğŸ—‘ï¸ å·²æ¸…é™¤ä¿å­˜çš„è®¾ç½®')}catch(e){console.error('âŒ æ¸…é™¤è®¾ç½®å¤±è´¥:',e)}},exportSettings(){return{autoRefreshEnabled:this.autoRefreshEnabled,refreshInterval:this.refreshInterval}},importSettings(e){void 0!==e.autoRefreshEnabled&&(this.autoRefreshEnabled=e.autoRefreshEnabled),void 0!==e.refreshInterval&&(this.refreshInterval=e.refreshInterval),this.saveToStorage(),console.log('ğŸ“¥ è®¾ç½®å·²å¯¼å…¥',e)}}});function h(e){try{const t=document.querySelector('#send_textarea');if(!t)return console.warn('âš ï¸ æœªæ‰¾åˆ°è¾“å…¥æ¡†å…ƒç´  #send_textarea'),void toastr?.warning('æœªæ‰¾åˆ°è¾“å…¥æ¡†');t.value=e;const a=new Event('input',{bubbles:!0,cancelable:!0});t.dispatchEvent(a),t.focus(),t.setSelectionRange(e.length,e.length),console.log('âœ… å‘½ä»¤å·²å¡«å……:',e)}catch(e){console.error('âŒ å¡«å……å‘½ä»¤å¤±è´¥:',e),toastr?.error('å¡«å……å‘½ä»¤å¤±è´¥')}}const x={class:'ngq-card',style:{'margin-top':'16px'}},q={class:'ngq-card-body'},y={class:'ngq-management-actions',style:{'margin-top':'12px'}},w=['disabled'],k={key:0},E={key:1},V=(0,a.defineComponent)({__name:'ManagementActions',setup(e){const t=n(),o=f(),r=b(),l=(0,a.computed)(()=>r.autoRefreshEnabled?'â±ï¸ è‡ªåŠ¨åˆ·æ–°: å¼€':'â±ï¸ è‡ªåŠ¨åˆ·æ–°: å…³'),i=()=>{t.openModal('recruitment')},s=()=>{h('è´­ç½®æ–°æ¥¼å±‚ï¼ˆéœ€åŒæ—¶å»ºé€ 4ä¸ªå…¬å¯“å•å…ƒï¼š01/02/03/04ï¼‰')},p=()=>{o.loadData()},d=()=>{r.toggleAutoRefresh()};return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',x,[t[1]||(t[1]=(0,a.createElementVNode)('div',{class:'ngq-card-title'},[(0,a.createElementVNode)('span',null,'ğŸ¢'),(0,a.createElementVNode)('span',null,'å°åŒºç®¡ç†')],-1)),(0,a.createElementVNode)('div',q,[(0,a.createElementVNode)('div',{class:'ngq-management-actions'},[(0,a.createElementVNode)('button',{class:'ngq-btn',onClick:i},'ğŸ‘¤ æ‹›å‹Ÿæ–°ç§Ÿå®¢'),(0,a.createElementVNode)('button',{class:'ngq-btn',onClick:s},'ğŸ—ï¸ è´­ç½®æ–°æ¥¼å±‚')]),(0,a.createElementVNode)('div',y,[(0,a.createElementVNode)('button',{class:'ngq-btn',onClick:p,disabled:(0,a.unref)(o).loading},[(0,a.unref)(o).loading?((0,a.openBlock)(),(0,a.createElementBlock)('span',k,'ğŸ”„ åŠ è½½ä¸­...')):((0,a.openBlock)(),(0,a.createElementBlock)('span',E,'ğŸ”„ åˆ·æ–°æ•°æ®'))],8,w),(0,a.createElementVNode)('button',{class:'ngq-btn',onClick:d},(0,a.toDisplayString)(l.value),1)]),t[0]||(t[0]=(0,a.createElementVNode)('div',{class:'ngq-hint'},' ğŸ’¡ æç¤ºï¼šè´­ç½®æ–°æ¥¼å±‚å°†åŒæ—¶å»ºé€ 4ä¸ªå…¬å¯“å•å…ƒï¼ˆå¦‚å››æ¥¼ï¼š401/402/403/404ï¼‰ ',-1))])]))}}),N={class:'ngq-room-name'},R={class:'ngq-room-occupant'},D=(0,a.defineComponent)({__name:'RoomCard',props:{room:{type:Object,required:!0}},setup(e){const t=e,o=n(),r=(0,a.computed)(()=>'æ‚¨çš„æˆ¿é—´'===t.room.type),l=(0,a.computed)(()=>'ç©ºæˆ¿é—´'===t.room.type),i=(0,a.computed)(()=>'å¥—é—´'===t.room.type),s=(0,a.computed)(()=>'å…¬å…±å®¢å…'===t.room.type),p=(0,a.computed)(()=>'å¥èº«æˆ¿'===t.room.type),d=(0,a.computed)(()=>'æ´—è¡£é—´'===t.room.type),c=(0,a.computed)(()=>s.value||p.value||d.value),g=(0,a.computed)(()=>!(i.value||r.value||l.value||c.value)),u=(0,a.computed)(()=>'æœªçŸ¥'===t.room.tenant&&i.value),m=(0,a.computed)(()=>({your:r.value,empty:l.value,'public-lounge':s.value,'public-gym':p.value,'public-laundry':d.value,'custom-functional':g.value,'bedroom vacant':u.value,bedroom:!u.value&&i.value,merged:t.room.isMerged})),v=(0,a.computed)(()=>r.value?'ğŸ‘‘':l.value?'ğŸ”§':s.value?'ğŸ›‹ï¸':p.value?'ğŸ’ª':d.value?'ğŸ§º':g.value?'ğŸ¢':'ğŸ '),f=(0,a.computed)(()=>{if(r.value)return'ğŸ”‘ æˆ¿ä¸œè‡ªä½';if(l.value)return'ğŸ”¨ æœªè£…ä¿®';if(c.value)return`âœ¨ ${t.room.type}`;if(g.value)return`ğŸ¨ ${t.room.type}`;if(t.room.tenant&&'æœªçŸ¥'!==t.room.tenant){return`ğŸ‘¤ ${'<user>'===t.room.tenant?'æˆ¿ä¸œ':t.room.tenant}`}return'ğŸ·ï¸ å¾…å‡ºç§Ÿ'}),b=()=>{l.value?o.openModal('renovate',{roomId:t.room.name}):o.openModal('room',{roomId:t.room.name})};return(t,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{class:(0,a.normalizeClass)(['ngq-room-card',m.value]),onClick:b},[(0,a.createElementVNode)('div',N,(0,a.toDisplayString)(v.value)+' '+(0,a.toDisplayString)(e.room.name),1),(0,a.createElementVNode)('div',R,(0,a.toDisplayString)(f.value),1)],2))}}),C={class:'ngq-floor-level'},B={class:'ngq-floor-level-title'},M={key:0,class:'ngq-floor-grid'},S={key:1,class:'ngq-empty',style:{padding:'20px'}},I=(0,a.defineComponent)({__name:'FloorView',props:{floor:{type:Object,required:!0}},setup(e){const t=e,n=f(),o=(0,a.computed)(()=>{const e=n.getRoomsByFloor(t.floor.name);e.sort((e,t)=>{const a=e=>e.includes('AåŒº')||e.includes('01')?1:e.includes('BåŒº')||e.includes('02')?2:e.includes('CåŒº')||e.includes('03')?3:e.includes('DåŒº')||e.includes('04')?4:0,n=a(e.position)-a(t.position);return 0!==n?n:e.name.localeCompare(t.name)});const a=[],o=new Set;for(let t=0;t<e.length;t++){if(o.has(t))continue;const n=e[t];if(['å…¬å…±å®¢å…','å¥èº«æˆ¿'].includes(n.type)&&t+1<e.length){const r=e[t+1];if(r.type===n.type){a.push({...n,name:`${n.name}-${r.name}`,isMerged:!0}),o.add(t+1);continue}}a.push(n)}return a});return(t,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',C,[(0,a.createElementVNode)('div',B,'ğŸ¢ '+(0,a.toDisplayString)(e.floor.name),1),o.value.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',M,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.value,e=>((0,a.openBlock)(),(0,a.createBlock)(D,{key:e.name,room:e},null,8,['room']))),128))])):((0,a.openBlock)(),(0,a.createElementBlock)('div',S,[...n[0]||(n[0]=[(0,a.createElementVNode)('div',{class:'ngq-empty-text'},'è¯¥æ¥¼å±‚æš‚æ— æˆ¿é—´',-1)])]))]))}}),T={class:'ngq-header-left'},P={class:'ngq-header-subtitle'},A={class:'ngq-content custom-scrollbar'},O={key:0,class:'ngq-loading'},j={key:1,class:'ngq-empty'},U={key:2},F={style:{display:'flex','flex-direction':'column',gap:'12px'}},Y=(0,a.defineComponent)({__name:'MainPanel',setup(e){const t=n(),r=f(),l=(0,a.ref)(null),i=(0,a.ref)(null),{position:s,savePosition:p,restorePosition:d}=c({key:'panel',defaultPosition:{left:window.innerWidth/2-450,top:window.innerHeight/2-325}}),{isDragging:g}=o({elementRef:l,handleRef:i,position:s,enabled:!0,onDragEnd:e=>{p(e)}}),u=(0,a.computed)(()=>({left:`${s.value.left}px`,top:`${s.value.top}px`})),m=(0,a.computed)(()=>{if(!r.hasData)return'ä¸œæµ·å¸‚Â·èŸèƒåŸ';const{date:e,time:t,location:a}=r.worldInfo;return`${a} | ${e} ${t}`}),v=()=>{t.closePanel()};return(0,a.onMounted)(()=>{d()}),(e,n)=>(0,a.unref)(t).isPanelVisible?((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:0,ref_key:'panelRef',ref:l,class:(0,a.normalizeClass)(['ngq-main-panel',{dragging:(0,a.unref)(g)}]),style:(0,a.normalizeStyle)(u.value)},[(0,a.createCommentVNode)(' å¤´éƒ¨ '),(0,a.createElementVNode)('div',{ref_key:'headerRef',ref:i,class:'ngq-header'},[(0,a.createElementVNode)('div',T,[n[0]||(n[0]=(0,a.createElementVNode)('div',{class:'ngq-header-title'},'ğŸ  ç½‘çº¢å°åŒº',-1)),(0,a.createElementVNode)('div',P,(0,a.toDisplayString)(m.value),1)]),(0,a.createElementVNode)('button',{class:'ngq-close-btn',title:'å…³é—­',onClick:v},'Ã—')],512),(0,a.createCommentVNode)(' æ ‡ç­¾é¡µ '),n[3]||(n[3]=(0,a.createStaticVNode)('<div class="ngq-tabs"><button class="ngq-tab active">æ€»è§ˆ</button><button class="ngq-tab">ç§Ÿå®¢</button><button class="ngq-tab">è´¢åŠ¡</button><button class="ngq-tab">è®¾ç½®</button></div>',1)),(0,a.createCommentVNode)(' å†…å®¹åŒºåŸŸ '),(0,a.createElementVNode)('div',A,[(0,a.unref)(r).loading?((0,a.openBlock)(),(0,a.createElementBlock)('div',O,[...n[1]||(n[1]=[(0,a.createElementVNode)('div',{class:'ngq-loading-icon'},'â³',-1),(0,a.createElementVNode)('div',{class:'ngq-loading-text'},'æ­£åœ¨åŠ è½½æ•°æ®...',-1)])])):(0,a.unref)(r).hasData?((0,a.openBlock)(),(0,a.createElementBlock)('div',U,[(0,a.createElementVNode)('div',F,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(r).floors,e=>((0,a.openBlock)(),(0,a.createBlock)(I,{key:e.key,floor:e},null,8,['floor']))),128))]),(0,a.createVNode)(V)])):((0,a.openBlock)(),(0,a.createElementBlock)('div',j,[...n[2]||(n[2]=[(0,a.createElementVNode)('div',{class:'ngq-empty-icon'},'ğŸ“­',-1),(0,a.createElementVNode)('div',{class:'ngq-empty-text'},'æœªèƒ½åŠ è½½æ•°æ®ï¼Œè¯·åœ¨æ¸¸æˆä¸­ç”Ÿæˆä¸€äº›å†…å®¹åé‡è¯•',-1)])]))])],6)):(0,a.createCommentVNode)('v-if',!0)}}),L={key:0,class:'ngq-modal-title'},W=(0,a.defineComponent)({__name:'BaseModal',props:{visible:{type:Boolean,required:!0},title:{type:String,default:''},maxWidth:{type:String,default:'420px'}},emits:['close'],setup(e,{emit:t}){const n=t,o=()=>{n('close')};(0,a.watch)(()=>props.visible,e=>{e?window.addEventListener('keydown',r):window.removeEventListener('keydown',r)});const r=e=>{'Escape'===e.key&&o()};return(t,n)=>((0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:'body'},[(0,a.createVNode)(a.Transition,{name:'modal-fade'},{default:(0,a.withCtx)(()=>[e.visible?((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:0,class:'ngq-modal-overlay',onClick:(0,a.withModifiers)(o,['self'])},[(0,a.createElementVNode)('div',{class:'ngq-modal-content',style:(0,a.normalizeStyle)({maxWidth:e.maxWidth})},[e.title?((0,a.openBlock)(),(0,a.createElementBlock)('h2',L,(0,a.toDisplayString)(e.title),1)):(0,a.createCommentVNode)('v-if',!0),(0,a.renderSlot)(t.$slots,'default')],4)])):(0,a.createCommentVNode)('v-if',!0)]),_:3})]))}}),H=(0,a.defineComponent)({__name:'RecruitmentModal',setup(e){const t=n(),o=(0,a.ref)(''),r=(0,a.ref)(null),l=()=>{t.closeModal()},i=()=>{if(!o.value.trim())return toastr?.warning('è¯·è¾“å…¥ç§Ÿå®¢ç‰¹å¾åå†ç¡®è®¤ã€‚'),void r.value?.focus();h(`æ‹›å‹Ÿä¸€åç¬¦åˆä»¥ä¸‹ç‰¹å¾çš„ç§Ÿå®¢ï¼š${o.value.trim()}`),l()};return(0,a.watch)(()=>t.activeModal,e=>{'recruitment'===e&&(o.value='',(0,a.nextTick)(()=>{r.value?.focus()}))}),(e,n)=>((0,a.openBlock)(),(0,a.createBlock)(W,{visible:'recruitment'===(0,a.unref)(t).activeModal,title:'ğŸ‘¤ æ‹›å‹Ÿæ–°ç§Ÿå®¢',onClose:l},{default:(0,a.withCtx)(()=>[n[1]||(n[1]=(0,a.createElementVNode)('p',{class:'ngq-modal-subtitle'},'ç½‘çº¢å°åŒºä¸“æ³¨äºå†…å®¹åˆ›ä½œè€…ï¼Œè¯·è¾“å…¥æ‚¨æœŸæœ›çš„ç§Ÿå®¢ç‰¹å¾',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{ref_key:'inputRef',ref:r,'onUpdate:modelValue':n[0]||(n[0]=e=>o.value=e),type:'text',class:'ngq-input',placeholder:'ä¾‹å¦‚ï¼šç¾å¦†åšä¸»ã€æ¸¸æˆä¸»æ’­ã€èˆè¹ˆUPä¸»',onKeypress:(0,a.withKeys)(i,['enter'])},null,544),[[a.vModelText,o.value]]),(0,a.createElementVNode)('div',{class:'ngq-modal-actions'},[(0,a.createElementVNode)('button',{class:'ngq-modal-btn ngq-modal-btn-cancel',onClick:l},'å–æ¶ˆ'),(0,a.createElementVNode)('button',{class:'ngq-modal-btn ngq-modal-btn-confirm',onClick:i},'ç¡®è®¤æ‹›å‹Ÿ')])]),_:1},8,['visible']))}}),J={class:'ngq-modal-subtitle'},K=(0,a.defineComponent)({__name:'RenovateModal',setup(e){const t=n(),o=(0,a.computed)(()=>t.modalData?.roomId||''),r=()=>{t.closeModal()},l=()=>{o.value&&(h(`å°† ${o.value} è£…ä¿®ä¸ºæ ‡å‡†å¥—é—´ï¼ˆä¸€å®¤ä¸€å…ä¸€å«ä¸€å¨ï¼Œ35-50ã¡ï¼‰`),r())},i=()=>{o.value&&t.openModal('functionalInput',{roomId:o.value})};return(e,n)=>((0,a.openBlock)(),(0,a.createBlock)(W,{visible:'renovate'===(0,a.unref)(t).activeModal,title:'ğŸ”¨ è£…ä¿®é€‰æ‹©','max-width':'450px',onClose:r},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('p',J,'é€‰æ‹©è¦å°† '+(0,a.toDisplayString)(o.value)+' è£…ä¿®ä¸ºä½•ç§ç±»å‹ï¼š',1),(0,a.createElementVNode)('div',{style:{display:'flex','flex-direction':'column',gap:'12px','margin-top':'16px'}},[(0,a.createElementVNode)('button',{class:'ngq-modal-btn ngq-modal-btn-confirm',style:{padding:'16px','font-size':'15px'},onClick:l},[...n[0]||(n[0]=[(0,a.createTextVNode)(' ğŸ  æ ‡å‡†å¥—é—´ ',-1),(0,a.createElementVNode)('div',{style:{'font-size':'12px',opacity:'0.8','margin-top':'4px'}},'ä¸€å®¤ä¸€å…ä¸€å«ä¸€å¨ï¼Œå¯å‡ºç§Ÿç»™ç§Ÿå®¢',-1)])]),(0,a.createElementVNode)('button',{class:'ngq-modal-btn ngq-modal-btn-confirm',style:{padding:'16px','font-size':'15px',background:'linear-gradient(135deg, #0891b2 0%, #06b6d4 100%)'},onClick:i},[...n[1]||(n[1]=[(0,a.createTextVNode)(' ğŸ”§ åŠŸèƒ½æ€§æˆ¿é—´ ',-1),(0,a.createElementVNode)('div',{style:{'font-size':'12px',opacity:'0.8','margin-top':'4px'}},'å…¬å…±è®¾æ–½ï¼ˆå®¢å…/å¥èº«æˆ¿/æ´—è¡£é—´ç­‰ï¼‰',-1)])])]),(0,a.createElementVNode)('div',{class:'ngq-modal-actions',style:{'margin-top':'16px'}},[(0,a.createElementVNode)('button',{class:'ngq-modal-btn ngq-modal-btn-cancel',style:{width:'100%'},onClick:r},'å–æ¶ˆ')])]),_:1},8,['visible']))}}),G={class:'ngq-modal-subtitle'},Q={style:{display:'flex','flex-direction':'column',gap:'12px','margin-top':'16px'}},X=(0,a.defineComponent)({__name:'FunctionalInputModal',setup(e){const t=n(),o=(0,a.ref)(''),r=(0,a.ref)(''),l=(0,a.ref)(null),i=(0,a.computed)(()=>t.modalData?.roomId||''),s=()=>{t.closeModal()},p=()=>{const e=o.value.trim(),t=r.value.trim();if(!e)return toastr?.warning('è¯·è¾“å…¥æˆ¿é—´åç§°'),void l.value?.focus();t?(h(`å°† ${i.value} è£…ä¿®ä¸ºåŠŸèƒ½æ€§æˆ¿é—´ã€${e}ã€‘ï¼Œä½œç”¨ï¼š${t}`),s()):toastr?.warning('è¯·è¾“å…¥æˆ¿é—´ä½œç”¨')};return(0,a.watch)(()=>t.activeModal,e=>{'functionalInput'===e&&(o.value='',r.value='',(0,a.nextTick)(()=>{l.value?.focus()}))}),(e,n)=>((0,a.openBlock)(),(0,a.createBlock)(W,{visible:'functionalInput'===(0,a.unref)(t).activeModal,title:'ğŸ”§ åŠŸèƒ½æ€§æˆ¿é—´è¯¦æƒ…','max-width':'450px',onClose:s},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)('p',G,'è¯·è¾“å…¥ '+(0,a.toDisplayString)(i.value)+' çš„è¯¦ç»†ä¿¡æ¯ï¼š',1),(0,a.createElementVNode)('div',Q,[(0,a.createElementVNode)('div',null,[n[2]||(n[2]=(0,a.createElementVNode)('label',{class:'ngq-modal-label'},'æˆ¿é—´åç§°',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{ref_key:'nameInputRef',ref:l,'onUpdate:modelValue':n[0]||(n[0]=e=>o.value=e),type:'text',class:'ngq-input',placeholder:'ä¾‹å¦‚ï¼šå¥èº«æˆ¿ã€å½±éŸ³å®¤ã€èŒ¶å®¤'},null,512),[[a.vModelText,o.value]])]),(0,a.createElementVNode)('div',null,[n[3]||(n[3]=(0,a.createElementVNode)('label',{class:'ngq-modal-label'},'æˆ¿é—´ä½œç”¨',-1)),(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':n[1]||(n[1]=e=>r.value=e),type:'text',class:'ngq-input',placeholder:'ä¾‹å¦‚ï¼šé…å¤‡è·‘æ­¥æœºå’Œç‘œä¼½å«ï¼Œä¾›ç§Ÿå®¢å…è´¹ä½¿ç”¨',onKeypress:(0,a.withKeys)(p,['enter'])},null,544),[[a.vModelText,r.value]])])]),(0,a.createElementVNode)('div',{class:'ngq-modal-actions'},[(0,a.createElementVNode)('button',{class:'ngq-modal-btn ngq-modal-btn-cancel',onClick:s},'å–æ¶ˆ'),(0,a.createElementVNode)('button',{class:'ngq-modal-btn ngq-modal-btn-confirm',onClick:p},'ç¡®è®¤è£…ä¿®')])]),_:1},8,['visible']))}}),Z={key:0},ee={key:1},te={class:'ngq-info-section'},ae={class:'ngq-info-row'},ne={class:'ngq-info-value'},oe={class:'ngq-info-row'},re={class:'ngq-info-value'},le={class:'ngq-info-row'},ie={class:'ngq-info-value'},se={key:0,class:'ngq-info-block'},pe={class:'ngq-info-value'},de={key:0,class:'ngq-info-section tenant-section'},ce={class:'ngq-info-row'},ge={class:'ngq-info-value'},ue={class:'ngq-info-row'},me={class:'ngq-info-value'},ve={class:'ngq-info-row'},fe={class:'ngq-info-value'},be={class:'ngq-info-row'},he={class:'ngq-info-value'},xe={class:'ngq-info-block'},qe={class:'ngq-progress-bar'},ye={class:'ngq-info-block'},we={class:'ngq-progress-bar'},ke={class:'ngq-info-block'},Ee={class:'ngq-info-value'},Ve={class:'ngq-info-block'},Ne={class:'ngq-info-value'},Re={class:'ngq-info-block'},De={class:'ngq-info-value'},Ce={class:'ngq-info-block'},Be={class:'ngq-info-value'},Me={class:'ngq-info-row'},Se={class:'ngq-info-value'},ze={key:2,class:'ngq-empty-subtle'},Ie={key:0,class:'ngq-modal-actions',style:{'margin-top':'8px'}},_e=(0,a.defineComponent)({__name:'RoomModal',setup(e){const t=n(),o=f(),r=(0,a.computed)(()=>t.modalData?.roomId||null),l=(0,a.computed)(()=>r.value?o.getRoomById(r.value):null),i=(0,a.computed)(()=>l.value?.tenant&&'æœªçŸ¥'!==l.value.tenant?o.getTenantByName(l.value.tenant):null),s=(0,a.computed)(()=>{if(!l.value)return'æˆ¿é—´è¯¦æƒ…';return`${'æ‚¨çš„æˆ¿é—´'===l.value.type?'ğŸ‘‘':'ğŸ '} ${l.value.name}`}),p=(0,a.computed)(()=>{if(!l.value)return!1;const e='æ‚¨çš„æˆ¿é—´'===l.value.type,t=['101','102','103','104','204','304'].includes(l.value.name),a='å¥—é—´'===l.value.type&&'æœªçŸ¥'!==l.value.tenant;return!e&&!t&&!a}),d=()=>{t.closeModal()},c=()=>{if(!p.value||!l.value)return;confirm(`ç¡®å®šè¦æ‹†é™¤ ${l.value.name} å—ï¼Ÿ\næ‹†é™¤åå°†å˜ä¸ºç©ºæˆ¿é—´ï¼Œéœ€è¦é‡æ–°è£…ä¿®æ‰èƒ½ä½¿ç”¨ã€‚`)&&(h(`æ‹†é™¤ ${l.value.name}ï¼Œå°†å…¶è¿˜åŸä¸ºç©ºæˆ¿é—´çŠ¶æ€`),d())};return(e,n)=>((0,a.openBlock)(),(0,a.createBlock)(W,{visible:'room'===(0,a.unref)(t).activeModal,title:s.value,'max-width':'500px',onClose:d},{actions:(0,a.withCtx)(()=>[(0,a.createElementVNode)('div',{class:'ngq-modal-actions'},[(0,a.createElementVNode)('button',{class:'ngq-modal-btn ngq-modal-btn-confirm',onClick:d},'å…³é—­')]),p.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',Ie,[(0,a.createElementVNode)('button',{class:'ngq-modal-btn demolish-btn',onClick:c},'ğŸ—‘ï¸ æ‹†é™¤æˆ¿é—´')])):(0,a.createCommentVNode)('v-if',!0)]),default:(0,a.withCtx)(()=>[l.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',ee,[(0,a.createCommentVNode)(' æˆ¿é—´åŸºæœ¬ä¿¡æ¯ '),(0,a.createElementVNode)('div',te,[(0,a.createElementVNode)('div',ae,[n[1]||(n[1]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'æˆ¿é—´ç±»å‹',-1)),(0,a.createElementVNode)('span',ne,(0,a.toDisplayString)(l.value.type),1)]),(0,a.createElementVNode)('div',oe,[n[2]||(n[2]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'æ‰€åœ¨æ¥¼å±‚',-1)),(0,a.createElementVNode)('span',re,(0,a.toDisplayString)(l.value.floor),1)]),(0,a.createElementVNode)('div',le,[n[3]||(n[3]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'ä½ç½®',-1)),(0,a.createElementVNode)('span',ie,(0,a.toDisplayString)(l.value.position),1)]),l.value.description?((0,a.openBlock)(),(0,a.createElementBlock)('div',se,[n[4]||(n[4]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'æˆ¿é—´æè¿°',-1)),(0,a.createElementVNode)('div',pe,(0,a.toDisplayString)(l.value.description),1)])):(0,a.createCommentVNode)('v-if',!0)]),(0,a.createCommentVNode)(' ç§Ÿå®¢ä¿¡æ¯ '),i.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',de,[n[16]||(n[16]=(0,a.createElementVNode)('div',{class:'ngq-section-title'},'ğŸ‘¤ ç§Ÿå®¢ä¿¡æ¯',-1)),(0,a.createElementVNode)('div',ce,[n[5]||(n[5]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'å§“å',-1)),(0,a.createElementVNode)('span',ge,(0,a.toDisplayString)(i.value.name),1)]),(0,a.createElementVNode)('div',ue,[n[6]||(n[6]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'å¹´é¾„',-1)),(0,a.createElementVNode)('span',me,(0,a.toDisplayString)(i.value.age)+'å²',1)]),(0,a.createElementVNode)('div',ve,[n[7]||(n[7]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'èŒä¸š',-1)),(0,a.createElementVNode)('span',fe,'ğŸ“± '+(0,a.toDisplayString)(i.value.job),1)]),(0,a.createElementVNode)('div',be,[n[8]||(n[8]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'åˆ›ä½œå†…å®¹',-1)),(0,a.createElementVNode)('span',he,'âœ¨ '+(0,a.toDisplayString)(i.value.creatorType),1)]),(0,a.createCommentVNode)(' è¿›åº¦æ¡ '),(0,a.createElementVNode)('div',xe,[n[9]||(n[9]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'â¤ï¸ å¥½æ„Ÿåº¦',-1)),(0,a.createElementVNode)('div',qe,[(0,a.createElementVNode)('div',{class:'ngq-progress-fill favor',style:(0,a.normalizeStyle)({width:i.value.favor+'%'})},(0,a.toDisplayString)(i.value.favor),5)])]),(0,a.createElementVNode)('div',ye,[n[10]||(n[10]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'ğŸ”¥ æ€§æ¬²',-1)),(0,a.createElementVNode)('div',we,[(0,a.createElementVNode)('div',{class:'ngq-progress-fill lust',style:(0,a.normalizeStyle)({width:i.value.lust+'%'})},(0,a.toDisplayString)(i.value.lust),5)])]),(0,a.createCommentVNode)(' é•¿æ–‡æœ¬ä¿¡æ¯ '),(0,a.createElementVNode)('div',ke,[n[11]||(n[11]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'å¤–è²Œç‰¹å¾',-1)),(0,a.createElementVNode)('div',Ee,(0,a.toDisplayString)(i.value.appearance),1)]),(0,a.createElementVNode)('div',Ve,[n[12]||(n[12]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'æ€§æ ¼',-1)),(0,a.createElementVNode)('div',Ne,(0,a.toDisplayString)(i.value.personality),1)]),(0,a.createElementVNode)('div',Re,[n[13]||(n[13]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'å½“å‰çŠ¶æ€',-1)),(0,a.createElementVNode)('div',De,(0,a.toDisplayString)(i.value.status),1)]),(0,a.createElementVNode)('div',Ce,[n[14]||(n[14]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'å†…å¿ƒæƒ³æ³•',-1)),(0,a.createElementVNode)('div',Be,(0,a.toDisplayString)(i.value.mood),1)]),(0,a.createElementVNode)('div',Me,[n[15]||(n[15]=(0,a.createElementVNode)('span',{class:'ngq-info-label'},'å…¥ä½å¤©æ•°',-1)),(0,a.createElementVNode)('span',Se,'ğŸ“… '+(0,a.toDisplayString)(i.value.daysStayed)+'å¤©',1)])])):'å¥—é—´'===l.value.type?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createCommentVNode)(' ç©ºæˆ¿é—´/è‡ªä½æˆ¿æç¤º '),n[17]||(n[17]=(0,a.createElementVNode)('div',{class:'ngq-empty-subtle'},'ğŸ  è¯¥å¥—é—´æš‚æ— ç§Ÿå®¢å…¥ä½',-1))],2112)):'æ‚¨çš„æˆ¿é—´'===l.value.type?((0,a.openBlock)(),(0,a.createElementBlock)('div',ze,'ğŸ‘‘ è¿™æ˜¯æ‚¨çš„ç§äººå¥—é—´')):(0,a.createCommentVNode)('v-if',!0)])):((0,a.openBlock)(),(0,a.createElementBlock)('div',Z,[...n[0]||(n[0]=[(0,a.createElementVNode)('div',{class:'ngq-empty'},[(0,a.createElementVNode)('div',{class:'ngq-empty-icon'},'â“'),(0,a.createElementVNode)('div',null,'æˆ¿é—´æ•°æ®ä¸å­˜åœ¨')],-1)])]))]),_:1},8,['visible','title']))}}),$e={class:'ngq-vue-app'},Te=(0,a.defineComponent)({__name:'App',setup(e){const t=f(),o=n(),r=b();return(0,a.onMounted)(()=>{console.log('âœ… App ç»„ä»¶å·²æŒ‚è½½'),r.initialize(),o.isPanelVisible&&t.loadData(),(0,a.watch)(()=>o.isPanelVisible,e=>{e&&!t.hasData&&t.loadData()}),console.log('ğŸ¢ ç½‘çº¢å°åŒº Vue ç‰ˆå·²å¯åŠ¨')}),(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',$e,[(0,a.createCommentVNode)(' æ‹–åŠ¨æŒ‰é’® '),(0,a.createVNode)(u),(0,a.createCommentVNode)(' ä¸»é¢æ¿ '),(0,a.createVNode)(Y),(0,a.createCommentVNode)(' æ¨¡æ€æ¡† '),(0,a.createVNode)(H),(0,a.createVNode)(K),(0,a.createVNode)(X),(0,a.createVNode)(_e)]))}});function Pe(){try{const t=window.top?.document||document;if(t.getElementById('ngq-vue-app'))return void console.warn('âš ï¸ åº”ç”¨å·²ç»åˆå§‹åŒ–ï¼Œè·³è¿‡é‡å¤åˆå§‹åŒ–');const n=t.createElement('style');n.id='ngq-vue-styles',n.textContent='\n  :root{--apt-primary:#ff6b9d;--apt-secondary:#c44569;--apt-bg:#1a1a2e;--apt-card:#16213e;--apt-border:rgba(255,107,157,0.2);--apt-text:#e8eaf6;--apt-dim:#e5e7eb;--apt-shadow-sm:0 2px 8px rgba(0,0,0,0.2);--apt-shadow-md:0 6px 20px rgba(255,107,157,0.4);--apt-shadow-lg:0 8px 32px rgba(0,0,0,0.4);--apt-gradient-primary:linear-gradient(135deg,#ff6b9d 0%,#c44569 100%);--apt-gradient-bg:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);--apt-radius-sm:8px;--apt-radius-md:12px;--apt-radius-lg:16px;--apt-radius-full:50%;--apt-spacing-xs:4px;--apt-spacing-sm:8px;--apt-spacing-md:12px;--apt-spacing-lg:16px;--apt-spacing-xl:20px;--apt-transition-fast:0.15s ease;--apt-transition-normal:0.2s ease;--apt-transition-slow:0.3s ease;--apt-z-button:10000;--apt-z-button-dragging:10001;--apt-z-panel:9999;--apt-z-modal:10002}\n\n\n  @keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}@keyframes slideInDown{from{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes slideInUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes scaleIn{from{transform:scale(0.9);opacity:0}to{transform:scale(1);opacity:1}}@keyframes scaleOut{from{transform:scale(1);opacity:1}to{transform:scale(0.9);opacity:0}}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}.animate-spin{animation:spin 1s linear infinite}.animate-fade-in{animation:fadeIn 0.3s ease}.animate-fade-out{animation:fadeOut 0.3s ease}.animate-slide-in-down{animation:slideInDown 0.3s ease}.animate-slide-in-up{animation:slideInUp 0.3s ease}.animate-scale-in{animation:scaleIn 0.2s ease}.animate-scale-out{animation:scaleOut 0.2s ease}.animate-pulse{animation:pulse 2s ease-in-out infinite}\n\n\n  /*! tailwindcss v4.1.15 | MIT License | https://tailwindcss.com */:root{--apt-primary:#ff6b9d;--apt-secondary:#c44569;--apt-bg:#1a1a2e;--apt-card:#16213e;--apt-border:rgba(255,107,157,0.2);--apt-text:#e8eaf6;--apt-dim:#e5e7eb;--apt-shadow-sm:0 2px 8px rgba(0,0,0,0.2);--apt-shadow-md:0 6px 20px rgba(255,107,157,0.4);--apt-shadow-lg:0 8px 32px rgba(0,0,0,0.4);--apt-gradient-primary:linear-gradient(135deg,#ff6b9d 0%,#c44569 100%);--apt-gradient-bg:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);--apt-radius-sm:8px;--apt-radius-md:12px;--apt-radius-lg:16px;--apt-radius-full:50%;--apt-spacing-xs:4px;--apt-spacing-sm:8px;--apt-spacing-md:12px;--apt-spacing-lg:16px;--apt-spacing-xl:20px;--apt-transition-fast:0.15s ease;--apt-transition-normal:0.2s ease;--apt-transition-slow:0.3s ease;--apt-z-button:10000;--apt-z-button-dragging:10001;--apt-z-panel:9999;--apt-z-modal:10002}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}@keyframes slideInDown{from{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes slideInUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes scaleIn{from{transform:scale(0.9);opacity:0}to{transform:scale(1);opacity:1}}@keyframes scaleOut{from{transform:scale(1);opacity:1}to{transform:scale(0.9);opacity:0}}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}.animate-spin{animation:spin 1s linear infinite}.animate-fade-in{animation:fadeIn 0.3s ease}.animate-fade-out{animation:fadeOut 0.3s ease}.animate-slide-in-down{animation:slideInDown 0.3s ease}.animate-slide-in-up{animation:slideInUp 0.3s ease}.animate-scale-in{animation:scaleIn 0.2s ease}.animate-scale-out{animation:scaleOut 0.2s ease}.animate-pulse{animation:pulse 2s ease-in-out infinite}#ngq-vue-app *{box-sizing:border-box}#ngq-vue-app .user-select-none{user-select:none;-webkit-user-select:none}#ngq-vue-app .touch-action-none{touch-action:none}#ngq-vue-app .flex{display:flex}#ngq-vue-app .flex-col{display:flex;flex-direction:column}#ngq-vue-app .items-center{align-items:center}#ngq-vue-app .justify-center{justify-content:center}#ngq-vue-app .justify-between{justify-content:space-between}#ngq-vue-app .flex-1{flex:1}#ngq-vue-app .flex-shrink-0{flex-shrink:0}#ngq-vue-app .text-center{text-align:center}#ngq-vue-app .text-left{text-align:left}#ngq-vue-app .text-right{text-align:right}#ngq-vue-app .font-bold{font-weight:600}#ngq-vue-app .text-sm{font-size:12px}#ngq-vue-app .text-base{font-size:14px}#ngq-vue-app .text-lg{font-size:16px}#ngq-vue-app .gap-xs{gap:var(--apt-spacing-xs)}#ngq-vue-app .gap-sm{gap:var(--apt-spacing-sm)}#ngq-vue-app .gap-md{gap:var(--apt-spacing-md)}#ngq-vue-app .gap-lg{gap:var(--apt-spacing-lg)}#ngq-vue-app .rounded-sm{border-radius:var(--apt-radius-sm)}#ngq-vue-app .rounded-md{border-radius:var(--apt-radius-md)}#ngq-vue-app .rounded-lg{border-radius:var(--apt-radius-lg)}#ngq-vue-app .rounded-full{border-radius:var(--apt-radius-full)}#ngq-vue-app .shadow-sm{box-shadow:var(--apt-shadow-sm)}#ngq-vue-app .shadow-md{box-shadow:var(--apt-shadow-md)}#ngq-vue-app .shadow-lg{box-shadow:var(--apt-shadow-lg)}#ngq-vue-app .transition{transition:all var(--apt-transition-normal)}#ngq-vue-app .transition-fast{transition:all var(--apt-transition-fast)}#ngq-vue-app .transition-slow{transition:all var(--apt-transition-slow)}#ngq-vue-app .transition-none{transition:none !important}#ngq-vue-app .cursor-pointer{cursor:pointer}#ngq-vue-app .cursor-grab{cursor:grab}#ngq-vue-app .cursor-grabbing{cursor:grabbing}#ngq-vue-app .overflow-hidden{overflow:hidden}#ngq-vue-app .overflow-auto{overflow:auto}#ngq-vue-app .overflow-y-auto{overflow-y:auto}#ngq-vue-app .custom-scrollbar::-webkit-scrollbar{width:8px;height:8px}#ngq-vue-app .custom-scrollbar::-webkit-scrollbar-track{background:rgba(255,255,255,0.05);border-radius:4px}#ngq-vue-app .custom-scrollbar::-webkit-scrollbar-thumb{background:var(--apt-primary);border-radius:4px}#ngq-vue-app .custom-scrollbar::-webkit-scrollbar-thumb:hover{background:var(--apt-secondary)}#ngq-vue-app .ngq-btn{padding:10px 20px;background:var(--apt-gradient-primary);color:white;border:none;border-radius:var(--apt-radius-sm);cursor:pointer;font-size:14px;font-weight:500;transition:all var(--apt-transition-normal);user-select:none;-webkit-user-select:none}#ngq-vue-app .ngq-btn:hover{transform:translateY(-2px);box-shadow:var(--apt-shadow-md)}#ngq-vue-app .ngq-btn:active{transform:translateY(0)}#ngq-vue-app .ngq-btn:disabled{opacity:0.5;cursor:not-allowed}#ngq-vue-app .ngq-btn-secondary{background:rgba(255,255,255,0.1);border:1px solid var(--apt-border)}#ngq-vue-app .ngq-btn-secondary:hover{background:rgba(255,255,255,0.15)}#ngq-vue-app .ngq-btn-small{padding:6px 12px;font-size:12px}#ngq-vue-app .ngq-btn-large{padding:14px 28px;font-size:16px}#ngq-vue-app .ngq-input{width:100%;padding:10px 12px;background:rgba(255,255,255,0.05);border:1px solid var(--apt-border);border-radius:var(--apt-radius-sm);color:var(--apt-text);font-size:14px;transition:all var(--apt-transition-normal)}#ngq-vue-app .ngq-input:focus{outline:none;border-color:var(--apt-primary);background:rgba(255,255,255,0.08)}#ngq-vue-app .ngq-input::placeholder{color:rgba(255,255,255,0.3)}#ngq-vue-app .ngq-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:var(--apt-dim)}#ngq-vue-app .ngq-empty-icon{font-size:48px;margin-bottom:16px;opacity:0.5}#ngq-vue-app .ngq-empty-text{font-size:14px;opacity:0.7}#ngq-vue-app .ngq-loading{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;color:var(--apt-text)}#ngq-vue-app .ngq-loading-icon{font-size:32px;margin-bottom:12px;animation:spin 1s linear infinite}#ngq-vue-app .ngq-loading-text{font-size:14px;opacity:0.7}\n\n\n  #ngq-vue-app .ngq-vue-app{position:relative}#ngq-vue-app .ngq-debug-panel{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:400px;max-width:90vw;background:var(--apt-bg);border:2px solid var(--apt-primary);border-radius:var(--apt-radius-lg);padding:20px;z-index:10003;color:var(--apt-text);box-shadow:var(--apt-shadow-lg);font-family:\'Microsoft YaHei\',\'Segoe UI\',sans-serif}#ngq-vue-app .ngq-debug-panel h3{margin:0 0 16px 0;color:var(--apt-primary);font-size:18px}#ngq-vue-app .ngq-debug-panel h4{margin:12px 0 8px 0;color:var(--apt-text);font-size:14px;font-weight:600}#ngq-vue-app .debug-section{margin-bottom:16px;padding:12px;background:rgba(255,255,255,0.05);border-radius:var(--apt-radius-sm)}#ngq-vue-app .debug-section p{margin:4px 0;font-size:13px;color:var(--apt-dim)}#ngq-vue-app .debug-section button{margin:4px 4px 4px 0}#ngq-vue-app .ngq-debug-toggle{position:fixed;bottom:20px;right:20px;width:48px;height:48px;background:var(--apt-gradient-primary);border:2px solid rgba(255,255,255,0.3);border-radius:50%;font-size:24px;cursor:pointer;z-index:10000;box-shadow:var(--apt-shadow-md);transition:all var(--apt-transition-normal);display:flex;align-items:center;justify-content:center}#ngq-vue-app .ngq-debug-toggle:hover{transform:scale(1.1);box-shadow:var(--apt-shadow-lg)}\n\n  #ngq-vue-app .ngq-toggle-btn{position:fixed !important;width:64px;height:64px;background:var(--apt-gradient-primary);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:grab;z-index:var(--apt-z-button) !important;box-shadow:var(--apt-shadow-md);user-select:none;-webkit-user-select:none;touch-action:none;font-size:28px;border:3px solid rgba(255,255,255,0.3);color:#fff;transition:transform var(--apt-transition-normal),box-shadow var(--apt-transition-normal),opacity var(--apt-transition-normal)}#ngq-vue-app .ngq-toggle-btn:hover{transform:scale(1.05)}#ngq-vue-app .ngq-toggle-btn.dragging{cursor:grabbing !important;opacity:0.9;z-index:var(--apt-z-button-dragging) !important;transition:none !important}\n\n  #ngq-vue-app .ngq-main-panel{position:fixed !important;width:90vw !important;max-width:900px !important;height:85vh !important;max-height:650px !important;background:var(--apt-gradient-bg);border:2px solid var(--apt-primary);border-radius:var(--apt-radius-lg);box-shadow:var(--apt-shadow-lg);z-index:var(--apt-z-panel) !important;display:flex;flex-direction:column;overflow:hidden;color:var(--apt-text);font-family:\'Microsoft YaHei\',\'Segoe UI\',sans-serif}#ngq-vue-app .ngq-main-panel.dragging{transition:none !important}#ngq-vue-app .ngq-header{flex-shrink:0;padding:16px 20px;background:var(--apt-gradient-primary);color:white;display:flex;align-items:center;justify-content:space-between;font-weight:600;box-shadow:var(--apt-shadow-sm);cursor:move;user-select:none;-webkit-user-select:none;touch-action:none !important}#ngq-vue-app .ngq-header-left{display:flex;flex-direction:column;gap:4px}#ngq-vue-app .ngq-header-title{font-size:18px;font-weight:700}#ngq-vue-app .ngq-header-subtitle{font-size:12px;opacity:0.9}#ngq-vue-app .ngq-close-btn{background:transparent;border:none;color:white;font-size:32px;cursor:pointer;line-height:1;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;transition:transform var(--apt-transition-normal)}#ngq-vue-app .ngq-close-btn:hover{transform:scale(1.1)}#ngq-vue-app .ngq-tabs{display:flex;flex-shrink:0;border-bottom:2px solid rgba(255,255,255,0.1)}#ngq-vue-app .ngq-tab{flex:1;padding:12px 16px;background:transparent;border:none;color:rgba(255,255,255,0.6);font-size:14px;cursor:pointer;transition:all var(--apt-transition-normal);border-bottom:2px solid transparent;text-align:center}#ngq-vue-app .ngq-tab:hover{background:rgba(255,255,255,0.05);color:rgba(255,255,255,0.9)}#ngq-vue-app .ngq-tab.active{color:var(--apt-primary);border-bottom-color:var(--apt-primary)}#ngq-vue-app .ngq-tab-badge{display:inline-block;margin-left:6px;padding:2px 6px;background:var(--apt-primary);border-radius:10px;font-size:11px;font-weight:700;color:#fff}#ngq-vue-app .ngq-content{flex:1;padding:20px;overflow-y:auto;-webkit-overflow-scrolling:touch}\n\n  #ngq-vue-app .ngq-card{background:var(--apt-card);border:1px solid var(--apt-border);border-radius:var(--apt-radius-md);margin-bottom:16px;overflow:hidden}#ngq-vue-app .ngq-card-title{display:flex;align-items:center;gap:var(--apt-spacing-sm);padding:12px 16px;background:rgba(255,107,157,0.15);font-weight:600;font-size:16px}#ngq-vue-app .ngq-card-body{padding:16px}#ngq-vue-app .ngq-management-actions{display:flex;flex-direction:row;gap:12px}#ngq-vue-app .ngq-management-actions .ngq-btn{flex:1}@media (max-width:768px) and (orientation:portrait){#ngq-vue-app .ngq-management-actions{flex-direction:column}#ngq-vue-app .ngq-management-actions .ngq-btn{width:100%}}#ngq-vue-app .ngq-hint{margin-top:12px;padding:12px;background:rgba(255,107,157,0.1);border-radius:var(--apt-radius-sm);font-size:13px;color:var(--apt-dim);line-height:1.5}\n\n  #ngq-vue-app .ngq-floor-level{background:var(--apt-card);border:1px solid var(--apt-border);border-radius:var(--apt-radius-lg);padding:16px;margin-bottom:16px;box-shadow:0 4px 12px rgba(0,0,0,0.06)}#ngq-vue-app .ngq-floor-level-title{font-size:1.1em;font-weight:600;margin-bottom:12px;color:var(--apt-text);display:flex;align-items:center;gap:var(--apt-spacing-sm)}#ngq-vue-app .ngq-floor-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;width:100%}\n\n  #ngq-vue-app .ngq-room-card{border-radius:10px;padding:18px 12px;min-height:90px;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;font-weight:600;font-size:0.9em;border:2px solid rgba(255,255,255,0.3);box-shadow:var(--apt-shadow-sm);cursor:pointer;transition:all var(--apt-transition-normal)}#ngq-vue-app .ngq-room-card:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(255,107,157,0.3);border-color:var(--apt-primary)}#ngq-vue-app .ngq-room-card.bedroom{background:linear-gradient(135deg,#592e39 0%,#7a4053 100%)}#ngq-vue-app .ngq-room-card.bedroom.vacant{background:linear-gradient(135deg,rgba(255,182,193,0.6) 0%,rgba(255,192,203,0.7) 100%);border-color:rgba(255,182,193,0.8);backdrop-filter:blur(2px)}#ngq-vue-app .ngq-room-card.empty{background:linear-gradient(135deg,#3d3f47 0%,#4a4f5a 100%);border-color:#5a5f6b;opacity:0.7}#ngq-vue-app .ngq-room-card.your{background:linear-gradient(135deg,#2e5266 0%,#3a6d8c 100%);border-color:#5dade2}#ngq-vue-app .ngq-room-card.public-lounge{background:linear-gradient(135deg,#d97706 0%,#f59e0b 100%);border-color:#fbbf24}#ngq-vue-app .ngq-room-card.public-gym{background:linear-gradient(135deg,#059669 0%,#10b981 100%);border-color:#34d399}#ngq-vue-app .ngq-room-card.public-laundry{background:linear-gradient(135deg,#0284c7 0%,#0ea5e9 100%);border-color:#38bdf8}#ngq-vue-app .ngq-room-card.custom-functional{background:linear-gradient(135deg,rgba(16,185,129,0.6) 0%,rgba(52,211,153,0.7) 100%);border-color:rgba(52,211,153,0.8);opacity:0.95}#ngq-vue-app .ngq-room-card.merged{grid-column:span 2}#ngq-vue-app .ngq-room-name{font-weight:bold;font-size:0.95em}#ngq-vue-app .ngq-room-occupant{font-size:0.75em;color:var(--apt-dim);margin-top:4px}\n\n  .ngq-modal-overlay{position:fixed !important;top:0 !important;left:0 !important;width:100vw !important;height:100vh !important;background:rgba(0,0,0,0.5);backdrop-filter:blur(4px);display:flex;justify-content:center;align-items:center;z-index:var(--apt-z-modal) !important}.ngq-modal-content{background:var(--apt-card);color:var(--apt-text);padding:28px;border-radius:20px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:var(--apt-shadow-lg);display:flex;flex-direction:column;gap:16px;border:2px solid var(--apt-border)}.ngq-modal-title{margin:0;font-size:1.4em;font-weight:700;color:var(--apt-primary)}.ngq-modal-subtitle{color:var(--apt-dim);margin:0;font-size:0.95em;line-height:1.5}.ngq-modal-actions{display:flex;gap:12px;margin-top:8px}.ngq-modal-btn{flex:1;padding:12px 16px;border:none;border-radius:var(--apt-radius-sm);font-size:14px;font-weight:600;cursor:pointer;transition:all var(--apt-transition-normal)}.ngq-modal-btn-confirm{background:var(--apt-primary);color:#fff}.ngq-modal-btn-confirm:hover{background:var(--apt-secondary);transform:translateY(-1px)}.ngq-modal-btn-cancel{background:rgba(255,255,255,0.1);color:var(--apt-text)}.ngq-modal-btn-cancel:hover{background:rgba(255,255,255,0.15)}.modal-fade-enter-active,.modal-fade-leave-active{transition:opacity var(--apt-transition-normal)}.modal-fade-enter-from,.modal-fade-leave-to{opacity:0}\n\n  #ngq-vue-app .ngq-modal-label{display:block;margin-bottom:6px;color:var(--apt-dim);font-size:14px}\n\n  .ngq-info-section{margin-bottom:16px;border-bottom:1px solid var(--apt-border)}.ngq-info-section:last-child{border-bottom:none;margin-bottom:0}.tenant-section{border-top:1px solid var(--apt-border);padding-top:16px;margin-top:8px}.ngq-section-title{font-size:1.1em;font-weight:600;margin-bottom:12px;color:var(--apt-primary)}.ngq-info-row{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.05)}.ngq-info-row:last-child{border-bottom:none}.ngq-info-block{display:block;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.05)}.ngq-info-block:last-child{border-bottom:none}.ngq-info-label{color:var(--apt-dim);font-size:14px}.ngq-info-block .ngq-info-label{display:block;margin-bottom:6px}.ngq-info-value{color:var(--apt-text);font-weight:500;text-align:right;line-height:1.5}.ngq-info-block .ngq-info-value{text-align:left}.ngq-progress-bar{width:100%;height:20px;background:rgba(255,255,255,0.1);border-radius:10px;overflow:hidden;position:relative;margin-top:6px}.ngq-progress-fill{height:100%;border-radius:10px;transition:width 0.3s ease;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:600;color:white;text-shadow:0 1px 2px rgba(0,0,0,0.3)}.ngq-progress-fill.favor{background:linear-gradient(90deg,#ff6b9d 0%,#ff8fab 100%)}.ngq-progress-fill.lust{background:linear-gradient(90deg,#ff4757 0%,#ff6348 100%)}.ngq-empty-subtle{text-align:center;padding:20px;color:var(--apt-dim)}.demolish-btn{width:100%;background:linear-gradient(135deg,#dc2626 0%,#ef4444 100%)}\n\n',t.head.appendChild(n),console.log('âœ… æ ·å¼å·²æ‰‹åŠ¨æ³¨å…¥');const o=function(){const t=(0,a.createApp)(Te),n=e();return t.use(n),t}(),r=function(e){const t=e.createElement('div');return t.id='ngq-vue-app',t.setAttribute('data-script-id','file:///D:/VScode/SillyTavern/tavern_helper_template_forkforme/src/%E7%BD%91%E7%BA%A2%E5%B0%8F%E5%8C%BAvue%E7%89%88/index.ts'.match(/ç½‘çº¢å°åŒºvueç‰ˆ/)?'ç½‘çº¢å°åŒºvueç‰ˆ':'ngq-vue'),t}(t);t.body.appendChild(r),o.mount(r),console.log('âœ… ç½‘çº¢å°åŒº Vue ç‰ˆåˆå§‹åŒ–æˆåŠŸ'),$(window).on('pagehide',()=>{!function(e,t){try{e.unmount(),function(e){const t=e.getElementById('ngq-vue-app');t&&(t.remove(),console.log('ğŸ—‘ï¸ æŒ‚è½½å®¹å™¨å·²ç§»é™¤'));const a=e.getElementById('ngq-vue-styles');a&&(a.remove(),console.log('ğŸ—‘ï¸ æ ·å¼å·²ç§»é™¤'))}(t),console.log('ğŸ§¹ ç½‘çº¢å°åŒº Vue ç‰ˆå·²æ¸…ç†')}catch(e){console.error('âŒ æ¸…ç†å¤±è´¥:',e)}}(o,t)})}catch(e){console.error('âŒ ç½‘çº¢å°åŒº Vue ç‰ˆåˆå§‹åŒ–å¤±è´¥:',e),toastr?.error('ç½‘çº¢å°åŒºæ’ä»¶åˆå§‹åŒ–å¤±è´¥')}}console.log('ğŸ¢ ç½‘çº¢å°åŒº Vue ç‰ˆæ­£åœ¨åˆå§‹åŒ–...'),$(()=>{Pe()});
//# sourceMappingURL=index.js.map