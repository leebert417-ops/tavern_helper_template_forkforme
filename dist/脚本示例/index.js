(()=>{'use strict';var e,t,n,r,a,s={15:e=>{e.exports=import('https://testingcf.jsdelivr.net/npm/klona/+esm')},28:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.d(t,{A:()=>o});var a=n(880),s=e([a]);a=(s.then?(await s)():s)[0];const o=a.A;r()}catch(e){r(e)}})},35:e=>{e.exports=import('https://testingcf.jsdelivr.net/npm/pinia/+esm')},49:(e,t,n)=>{n.a(e,async(e,t)=>{try{var r=n(28),a=n(61),s=n(35),o=e([r,s]);[r,s]=o.then?(await o)():o;const i=(0,a.createApp)(r.A).use((0,s.createPinia)());function c(){if($(`head > div[script_id="${getScriptId()}"]`).length>0)return;const e=$('<div>').attr('script_id',getScriptId()).append($('head > style',document).clone());$('head').append(e)}$(()=>{const e=$('<div>').attr('script_id',getScriptId());$('#extensions_settings2').append(e),c(),i.mount(e[0])}),$(window).on('pagehide',()=>{i.unmount(),$(`head > div[script_id="${getScriptId()}"]`).remove(),$(`div[script_id="${getScriptId()}"]`).remove()}),t()}catch(d){t(d)}})},61:e=>{e.exports=Vue},107:(e,t,n)=>{n.a(e,async(e,t)=>{try{n(289),n(621);var r=n(49),a=(n(718),n(863)),s=e([r,a]);[r,a]=s.then?(await s)():s,t()}catch(e){t(e)}})},289:()=>{$(()=>{toastr.success('你已经成功加载示例脚本!','恭喜你!')}),$(window).on('pagehide',()=>{toastr.info('你已经卸载示例脚本!','再见!')})},500:e=>{e.exports=import('https://testingcf.jsdelivr.net/npm/dedent/+esm')},621:()=>{$(()=>{replaceScriptButtons([{name:'晚上好',visible:!0}]),eventOn(getButtonEvent('晚上好'),()=>{toastr.warning('晚安, 络络')})})},707:e=>{e.exports=z},718:()=>{eventOn(tavern_events.MESSAGE_UPDATED,e=>{toastr.error(`谁让你动我第 ${e} 楼消息的😡`,'干什么!')})},733:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.d(t,{A:()=>u});var a=n(61),s=n(35),o=n(842),i=e([s,o]);[s,o]=i.then?(await i)():i;const c={class:'example-extension-settings'},d={class:'inline-drawer'},l={class:'inline-drawer-content'},p={class:'example-extension_block flex-container'},u=(0,a.defineComponent)({__name:'设置界面',setup(e){const{settings:t}=(0,s.storeToRefs)((0,o.C)()),n=()=>{toastr.success('你好呀!')};return(e,r)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',c,[(0,a.createElementVNode)('div',d,[r[3]||(r[3]=(0,a.createElementVNode)('div',{class:'inline-drawer-toggle inline-drawer-header'},[(0,a.createElementVNode)('b',null,(0,a.toDisplayString)('脚本示例')),(0,a.createElementVNode)('div',{class:'inline-drawer-icon fa-solid fa-circle-chevron-down down'})],-1)),(0,a.createElementVNode)('div',l,[(0,a.createElementVNode)('div',{class:'example-extension_block flex-container'},[(0,a.createElementVNode)('input',{class:'menu_button',type:'submit',value:'示例按钮',onClick:n})]),(0,a.createElementVNode)('div',p,[(0,a.withDirectives)((0,a.createElementVNode)('input',{'onUpdate:modelValue':r[0]||(r[0]=e=>(0,a.unref)(t).button_selected=e),type:'checkbox'},null,512),[[a.vModelCheckbox,(0,a.unref)(t).button_selected]]),r[1]||(r[1]=(0,a.createElementVNode)('label',{for:'example_setting'},(0,a.toDisplayString)('示例开关'),-1))]),r[2]||(r[2]=(0,a.createElementVNode)('hr',{class:'sysHR'},null,-1))])])]))}});r()}catch(e){r(e)}})},842:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.d(t,{C:()=>l});var a=n(707),s=n(35),o=n(61),i=n(15),c=e([s,i]);[s,i]=c.then?(await c)():c;const d=a.z.object({button_selected:a.z.boolean().default(!1)}).prefault({}),l=(0,s.defineStore)('settings',()=>{const e=(0,o.ref)(p(d,getVariables({type:'script',script_id:getScriptId()})));return(0,o.watch)(e,e=>{insertOrAssignVariables((0,i.klona)(e),{type:'script',script_id:getScriptId()})},{immediate:!0,deep:!0}),{settings:e}});function p(e,t){const n=u(e,t);return _.assign(t,n)}function u(e,t){const n=e.safeParse(t);if(!n.success)throw Error(a.z.prettifyError(n.error));return n.data}r()}catch(m){r(m)}})},863:(e,t,n)=>{n.a(e,async(e,t)=>{try{var r=n(500),a=e([r]),s=a.then?(await a)():a;r=s[0],$(async()=>{0===getLastMessageId()&&await createChatMessages([{role:'assistant',message:(0,r.default)('\n                   [查看日记: 这是第二次看我的日记了呢~]\n                   <roleplay_options>\n                   接受日记本并翻阅: 青空黎接过她递来的粉色日记本，在天台阳光下缓缓翻开第一页\n                   保持沉默盯着她看: 青空黎没有接本子，只是盯着她略显紧张的表情和轻颤的声音\n                   坐到她身边: 青空黎没有立刻回应，而是缓缓走到络络身边坐下，等待她自己继续说\n                   开玩笑化解气氛: 青空黎微微一笑，开玩笑地说「所以，是要让我当监督官啦？」\n                   跳过时间: 青空黎接过日记本，安静地翻了几页，时间悄然流逝至黄昏深处\n                   和络络聊天: 青空黎试探性地问：「这本是从哪天开始写的？都写些什么呀？」\n                   </roleplay_options>\n                 ')},{role:'assistant',message:(0,r.default)('\n                   [查看日记: 真是的, 就这么喜欢看吗(v〃ω〃)]\n                   <roleplay_options>\n                   阅读日记第一页：青空黎打开粉色的日记本，从第一页开始认真阅读络络的记录内容。\n                   问她封面上的兔子贴纸：青空黎好奇那枚蓝色兔子贴纸的来历，转头向络络询问。\n                   观察络络的小动作：青空黎不急着翻开日记，而是注意到络络表情里一丝期待与不安。\n                   和她闲聊天气：青空黎随口聊起傍晚风有点凉，试图舒缓紧张气氛。\n                   调侃她：“有哪页是‘不许看’的？”青空黎轻松地试图化解她的小慌乱。\n                   转身回教室：青空黎接过日记却并未立刻翻开，而是表示回教室再看，打算慢慢阅读。\n                   </roleplay_options>\n                 ')}],{refresh:'all'})}),t()}catch(e){t(e)}})},880:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.d(t,{A:()=>a.A});var a=n(733),s=e([a]),o=s.then?(await s)():s;a=o[0],r()}catch(e){r(e)}})}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return s[e](n,n.exports,i),n.exports}e='function'==typeof Symbol,t=e?Symbol('webpack queues'):'__webpack_queues__',n=e?Symbol('webpack exports'):'__webpack_exports__',r=e?Symbol('webpack error'):'__webpack_error__',a=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},i.a=(e,s,o)=>{var i;o&&((i=[]).d=-1);var c,d,l,p=new Set,u=e.exports,m=new Promise((e,t)=>{l=t,d=e});m[n]=u,m[t]=e=>(i&&e(i),p.forEach(e),m.catch(e=>{})),e.exports=m,s(e=>{var s;c=(e=>e.map(e=>{if(null!==e&&'object'==typeof e){if(e[t])return e;if(e.then){var s=[];s.d=0,e.then(e=>{o[n]=e,a(s)},e=>{o[r]=e,a(s)});var o={};return o[t]=e=>e(s),o}}var i={};return i[t]=e=>{},i[n]=e,i}))(e);var o=()=>c.map(e=>{if(e[r])throw e[r];return e[n]}),d=new Promise(e=>{(s=()=>e(o)).r=0;var n=e=>e!==i&&!p.has(e)&&(p.add(e),e&&!e.d&&(s.r++,e.push(s)));c.map(e=>e[t](n))});return s.r?d:o()},e=>(e?l(m[r]=e):d(u),a(i))),i&&i.d<0&&(i.d=0)},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);i(107)})();
//# sourceMappingURL=index.js.map