# 🌙 江畔夜总会 - 悬浮状态栏插件安装说明

## 📦 文件说明

项目包含以下插件文件：

### 1. `江畔夜总会-悬浮状态栏.json` ⭐ **推荐使用**

- **格式**: SillyTavern 酒馆助手脚本配置文件
- **加载方式**: 通过酒馆助手插件自动加载
- **优点**:
  - ✅ 自动显示悬浮按钮
  - ✅ 无需手动操作
  - ✅ 刷新页面后自动恢复
  - ✅ 可在插件管理界面启用/禁用

### 2. `状态栏插件.js`

- **格式**: 纯 JavaScript 文件
- **加载方式**: 需要手动通过浏览器控制台加载
- **优点**:
  - ✅ 可直接阅读代码
  - ✅ 方便二次开发
- **缺点**:
  - ❌ 每次刷新页面后需要重新加载
  - ❌ 不会自动显示悬浮按钮

---

## 🚀 推荐安装方法：使用 JSON 配置文件

### 第 1 步：安装酒馆助手插件

1. 打开 SillyTavern
2. 进入 **Extensions（扩展）** 选项卡
3. 找到并启用 **Tavern Helper（酒馆助手）** 插件
   - 如果没有，需要先安装此插件

### 第 2 步：导入脚本配置

#### 方法 A：通过界面导入（推荐）

1. 打开酒馆助手插件界面
2. 找到 **Scripts（脚本）** 部分
3. 点击 **Import（导入）** 按钮
4. 选择 `江畔夜总会-悬浮状态栏.json` 文件
5. 确认导入

#### 方法 B：手动复制（如果没有导入功能）

1. 打开 SillyTavern 安装目录
2. 找到酒馆助手的脚本配置文件（通常在 `data/default-user/scripts/` 目录）
3. 将 `江畔夜总会-悬浮状态栏.json` 复制到该目录
4. 刷新 SillyTavern 页面

### 第 3 步：启用脚本

1. 在酒馆助手的脚本列表中找到 **"江畔夜总会-悬浮状态栏"**
2. 确保脚本的开关是 **启用（Enabled）** 状态
3. 刷新页面

### 第 4 步：验证安装

刷新 SillyTavern 页面后，你应该看到：

- 右下角出现一个 **🌙 月亮图标** 的悬浮按钮
- 按钮可以拖动到任意位置
- 点击按钮打开江畔夜总会管理面板

---

## 🔧 备用方法：手动加载 JS 文件

如果你想使用 `状态栏插件.js` 文件（不推荐，除非你需要修改代码）：

### 手动加载步骤

1. 打开 SillyTavern
2. 按 `F12` 打开浏览器开发者工具
3. 切换到 **Console（控制台）** 选项卡
4. 打开 `状态栏插件.js` 文件，复制所有内容
5. 粘贴到控制台并按 `Enter`
6. 悬浮按钮应该立即出现

### 缺点

- ❌ 每次刷新页面后都需要重新执行上述步骤
- ❌ 比较麻烦，不推荐日常使用

---

## 📝 使用说明

### 悬浮按钮功能

- **点击**: 打开/关闭管理面板
- **拖动**: 移动按钮到任意位置（位置会自动保存）

### 管理面板内容

管理面板实时显示江畔夜总会的运营状况：

1. **⏰ 时空信息**
   - 当前日期、时间
   - 当前位置
   - 营业状态

2. **💼 经营概况**
   - 本月营收
   - 在职员工数
   - VIP客户数
   - 待处理订单

3. **🎓 工坊培养状况**
   - 当前培养人数
   - 每个培养对象的详细信息和进度

4. **📚 已归档艺人**
   - 归档总数
   - 最近归档的艺人列表

5. **🎬 鹿忧传媒联系**
   - 可调派艺人数
   - 本月已调派人数

---

## ❓ 常见问题

### Q1: 悬浮按钮没有出现？

**检查清单：**

1. 确认酒馆助手插件已启用
2. 确认脚本在酒馆助手中已启用
3. 刷新页面
4. 检查浏览器控制台是否有错误信息（按 F12 查看）

### Q2: 管理面板显示"无法加载状态数据"？

**可能原因：**

1. MVU 变量系统未初始化
2. 变量初始化文件格式有误
3. 角色卡中没有加载变量初始化条目

**解决方法：**

1. 确保 `变量初始化_beta.xyaml` 文件已正确配置
2. 确保在世界书中添加了 `[InitVar]` 条目
3. 检查 MVU 插件是否正确加载

### Q3: 如何卸载插件？

**方法 A：通过界面**

1. 打开酒馆助手
2. 找到"江畔夜总会-悬浮状态栏"脚本
3. 点击删除或禁用

**方法 B：手动删除**

1. 找到酒馆助手的脚本配置目录
2. 删除 `江畔夜总会-悬浮状态栏.json` 文件
3. 刷新页面

---

## 🔄 更新插件

如果插件有新版本：

1. 删除旧的脚本配置
2. 重新导入新的 JSON 文件
3. 刷新页面

---

## 🎨 自定义修改

如果你想修改插件样式或功能：

1. 打开 `状态栏插件.js` 文件进行编辑
2. 修改完成后，将代码复制到 JSON 文件的 `content` 字段
3. 重新导入 JSON 文件到酒馆助手

**提示**: JSON 文件中的 `content` 字段包含完整的 JavaScript 代码，可以直接修改。

---

## 📞 技术支持

如果遇到问题：

1. 检查浏览器控制台的错误信息（F12 → Console）
2. 确认 MVU 系统已正确配置
3. 查看 `变量初始化_beta.xyaml` 文件格式是否正确

---

## 📄 文件清单

项目包含以下文件：

```
性爱夜总会/
├── 江畔夜总会-悬浮状态栏.json    ⭐ 推荐使用（JSON 配置文件）
├── 状态栏插件.js                  （纯 JS 文件，用于开发）
├── 快速加载插件.js                （简化测试版）
├── 插件使用说明.md                （旧版说明）
├── 插件安装说明.md                （本文件）
├── 变量初始化_beta.xyaml         （MVU 变量初始化）
├── 变量更新规则.xyaml             （MVU 变量规则）
├── 变量处理指令集_beta.xyaml     （MVU 指令集）
└── 其他配置文件...
```

---

**享受你的江畔夜总会管理体验吧！** 🌙✨
