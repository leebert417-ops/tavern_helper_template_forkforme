### 网红小区 TODO（实施计划）

- **目标**: 在不改动 `src/房东基建` 的前提下，为“网红小区”新增一套世界书与可选前端，复用 MVU 规范并扩展“创作内容/外貌细分/网红语境”字段，形成可玩闭环：招募 → 档案 → 入住/基建 → 互动 → 分阶段展示 → 事件/成就。

### 产物清单（新增文件，均置于 `src/网红小区`）

- `变量初始化.xyaml`（必要）/ `变量初始化_beta.xyaml`（可选）
- `变量更新规则.xyaml`（必要）
- `变量处理指令集.xyaml`、`变量处理指令集_beta.xyaml`（必要/可选）
- `招募租客.xyaml`、`租客档案.xyaml`（必要）
- `好感度分阶段规则.xyaml`（必要）
- `性欲分阶段规则.xyaml`（可选，默认不启用成人向）
- `基建与租客.xyaml`（必要，六套连层定制铁则）
- （替代）`悬浮脚本.js`（可选，参考 `src/房东基建/参考.js` 风格的悬浮UI）
- `背景设定.xyaml`（基于基础模板/Z.1）
- `开场白.md`（基于基础模板/Z.3）
- `玩家角色_{{user}}.xyaml`（基于基础模板/Z.6）

### 实施步骤

1. 变量初始化（[InitVar] JSON5）
   - 世界：年份/日期/星期/时间/地点（东海市·荟萃城）。
   - 公寓：六套连层房源（顶→底编号），每套含房间列表（空房间/卧室/功能房），住户=未知。
   - 租客列表：空对象。
   - 扩展字段：租客“创作内容”（必填）、外貌细分（面容/体态曲线/胸部/臀部/特色）、标签（网红/外围艺人等）。
   - Beta（可选）：根与关键对象加 `$meta`，可扩展数组放 `$__META_EXTENSIBLE__$`。

2. 变量更新规则（YAML）
   - 时间联动：日/周/月切换；月切换重置"本月已缴租"；日期变更使"入住天数+1"。
   - 基建状态机：空白 → 空房间 → 卧室/功能房；入住/退租/拆除/删除约束（仅卧室且住户=未知可入住）。
   - 字段约束：好感度/性欲 0-100；当前位置为有效房间名或"外出"；"创作内容/外貌细分"为字符串并符合语境。

3. 变量处理指令集（模板）
   - 注入 `<status_current_variables>`；7 步分析骨架；严格 `[0]` 取值；无多余引号。
   - 命令：`_.set/_.add/_.insert/_.remove`；示例替换为“网红小区”字段（含“创作内容/外貌细分”），Yes 项 ≤ 3。
   - 提供稳定版+Beta版（支持结构性变更校验）。

4. 招募与档案
   - 招募触发语：“招募一名符合以下特征的租客：xxx”，输出 5 位候选（单一 `<companion>` 包裹），贴合网红/艺人语境（职业/穿搭/风格/创作方向）。
   - 租客档案（TenantLore）：固定信息五段并新增“创作内容”；两阶段流程，用户“确认入住”后才执行 MVU（插入租客、分配卧室、事件/成就）。

5. 分阶段内容（EJS）
   - 好感度分阶段：沿用模板，措辞改为网红社交风格与边界感。
   - 性欲分阶段：可选；如开启成人向再提供，对接数值增减参考。

6. 基建与租客铁则
   - 按“六套连层”定制房间位置/面积/室外标记与三态流转；入住与拆除限制；新增与“购置下层房间”的约束说明（可扩展）。

7. 悬浮脚本（可选，参考.js 风格）
   - 目标：以悬浮按钮 + 面板形式展示与操作（时间/房间/招募/事件/成就/关系）。
   - 做法：复用 `src/房东基建/参考.js` 的结构与交互，按“网红小区”定制主题文案与按钮，读取 MVU `stat_data` 进行渲染与态校验。
   - 注意：不改动原 `src/房东基建/参考.js` 文件，另建独立脚本供注入与加载。

8. 作品三件套（角色卡基础文件）
   - 背景设定：基于 `基础模板/Z.1.背景模板.md` 生成 `背景设定.xyaml`，覆盖东海市·荟萃城、网红聚居、六套连层等核心设定。
   - 开场白：基于 `基础模板/Z.3.开场白.md` 创作 `开场白.md`，以入住前后为切入场景，嵌入管理与互动钩子。
   - 玩家模板：基于 `基础模板/Z.6.玩家模板.md` 生成 `玩家角色_{{user}}.xyaml`，身份为六套连层房东，保留可塑空间。

### 验收与测试

- 对话脚本验证：招募 → 档案 → 确认入住 → 分配卧室 → 好感度变化 → 状态栏显示。
- 关键检查：
  - `[0]` 后缀一致；字符串无多余引号；数值在范围内。
  - 仅卧室且住户=未知可入住。

### 版本策略

- 优先提供稳定版；如需结构保护，追加 Beta 版本（含 `$meta`/`$__META_EXTENSIBLE__$`）。

### 命名与位置

- 所有文件置于 `src/网红小区`；文件名与上文一致，便于识别与替换。

管理员的窥视
装监控、福利群、直播
