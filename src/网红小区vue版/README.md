# ç½‘çº¢å°åŒº Vue ç‰ˆ

åŸºäº Vue 3 + TypeScript + Pinia çš„æ¨¡å—åŒ–é‡æ„ç‰ˆæœ¬ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/ç½‘çº¢å°åŒºvueç‰ˆ/
â”œâ”€â”€ index.ts                          # ä¸»å…¥å£æ–‡ä»¶ï¼ˆæŒ‚è½½ Vue åº”ç”¨ï¼‰
â”œâ”€â”€ App.vue                           # æ ¹ç»„ä»¶
â”œâ”€â”€ components/                       # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ ToggleButton.vue             # æ‹–åŠ¨æŒ‰é’®ç»„ä»¶
â”‚   â”œâ”€â”€ MainPanel.vue                # ä¸»é¢æ¿å®¹å™¨ç»„ä»¶
â”‚   â”œâ”€â”€ FloorView.vue                # æ¥¼å±‚è§†å›¾ç»„ä»¶
â”‚   â”œâ”€â”€ RoomCard.vue                 # æˆ¿é—´å¡ç‰‡ç»„ä»¶
â”‚   â”œâ”€â”€ ManagementActions.vue        # ç®¡ç†æ“ä½œæŒ‰é’®ç»„ä»¶
â”‚   â””â”€â”€ modals/                      # æ¨¡æ€æ¡†ç»„ä»¶ç›®å½•
â”‚       â”œâ”€â”€ RoomModal.vue            # æˆ¿é—´è¯¦æƒ…æ¨¡æ€æ¡†
â”‚       â”œâ”€â”€ RecruitmentModal.vue     # æ‹›å‹Ÿç§Ÿå®¢æ¨¡æ€æ¡†
â”‚       â”œâ”€â”€ RenovateModal.vue        # è£…ä¿®é€‰æ‹©æ¨¡æ€æ¡†
â”‚       â””â”€â”€ FunctionalInputModal.vue # åŠŸèƒ½æ€§æˆ¿é—´è¾“å…¥æ¨¡æ€æ¡†
â”œâ”€â”€ composables/                      # ç»„åˆå¼å‡½æ•°ç›®å½•
â”‚   â”œâ”€â”€ useDrag.ts                   # æ‹–åŠ¨åŠŸèƒ½ Hook
â”‚   â”œâ”€â”€ useMVUData.ts                # MVU æ•°æ®åŠ è½½ Hook
â”‚   â”œâ”€â”€ usePosition.ts               # ä½ç½®ä¿å­˜/æ¢å¤ Hook
â”‚   â””â”€â”€ useAutoRefresh.ts            # è‡ªåŠ¨åˆ·æ–° Hook
â”œâ”€â”€ stores/                           # Pinia çŠ¶æ€ç®¡ç†ç›®å½•
â”‚   â”œâ”€â”€ apartment.ts                 # å…¬å¯“æ•°æ® Store
â”‚   â”œâ”€â”€ ui.ts                        # UI çŠ¶æ€ Store
â”‚   â””â”€â”€ settings.ts                  # è®¾ç½® Store
â”œâ”€â”€ types/                            # TypeScript ç±»å‹å®šä¹‰ç›®å½•
â”‚   â””â”€â”€ index.ts                     # âœ… ç±»å‹å®šä¹‰æ–‡ä»¶
â”œâ”€â”€ styles/                           # æ ·å¼æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ variables.css                # âœ… CSS å˜é‡å®šä¹‰
â”‚   â”œâ”€â”€ common.css                   # âœ… é€šç”¨æ ·å¼
â”‚   â””â”€â”€ animations.css               # âœ… åŠ¨ç”»æ ·å¼
â”œâ”€â”€ utils/                            # å·¥å…·å‡½æ•°ç›®å½•
â”‚   â”œâ”€â”€ mvuHelper.ts                 # âœ… MVU æ•°æ®å¤„ç†å·¥å…·
â”‚   â””â”€â”€ commandHelper.ts             # âœ… å‘½ä»¤å¡«å……å·¥å…·
â”œâ”€â”€ to_do.md                          # âœ… ä»»åŠ¡æ¸…å•
â””â”€â”€ README.md                         # âœ… é¡¹ç›®è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

## âœ… å·²å®Œæˆ

### é˜¶æ®µ 1ï¼šåŸºç¡€æ¶æ„æ­å»º âœ…

- [x] **ç±»å‹å®šä¹‰** (`types/index.ts`)
  - MVU æ•°æ®ç±»å‹
  - æˆ¿é—´ã€æ¥¼å±‚ã€ç§Ÿå®¢ç±»å‹
  - æ‹–åŠ¨ã€ä½ç½®æ•°æ®ç±»å‹
  - UI çŠ¶æ€ç±»å‹
  - å…¨å±€ç±»å‹å£°æ˜

- [x] **å·¥å…·å‡½æ•°** (`utils/`)
  - `mvuHelper.ts` - MVU æ•°æ®å¤„ç†å·¥å…·
    - `safeGetValue()` - å®‰å…¨è·å–æ·±å±‚å±æ€§
    - `unwrapMVU()` - è§£åŒ… MVU æ•°ç»„
    - `getMVUInstance()` - è·å– MVU å®ä¾‹
    - `formatProgress()` - æ ¼å¼åŒ–è¿›åº¦æ˜¾ç¤º
  - `commandHelper.ts` - å‘½ä»¤å¡«å……å·¥å…·
    - `fillCommand()` - å¡«å……å‘½ä»¤åˆ°è¾“å…¥æ¡†
    - `generateXxxCommand()` - ç”Ÿæˆå„ç±»å‘½ä»¤

- [x] **æ ·å¼æ–‡ä»¶** (`styles/`)
  - `variables.css` - CSS å˜é‡ï¼ˆé¢œè‰²ã€é—´è·ã€é˜´å½±ç­‰ï¼‰
  - `animations.css` - åŠ¨ç”»å®šä¹‰ï¼ˆæ—‹è½¬ã€æ·¡å…¥æ·¡å‡ºç­‰ï¼‰
  - `common.css` - é€šç”¨æ ·å¼ï¼ˆæŒ‰é’®ã€è¾“å…¥æ¡†ã€å·¥å…·ç±»ç­‰ï¼‰

### é˜¶æ®µ 2ï¼šçŠ¶æ€ç®¡ç†ï¼ˆPinia Storesï¼‰ âœ…

- [x] **å…¬å¯“æ•°æ® Store** (`stores/apartment.ts`)
  - ç®¡ç† MVU åŸå§‹æ•°æ®
  - æä¾›æ¥¼å±‚ã€æˆ¿é—´ã€ç§Ÿå®¢çš„ getters
  - å®ç°æ•°æ®åŠ è½½ã€åˆ·æ–°ã€é‡è¯•é€»è¾‘
  - ç»Ÿè®¡ä¿¡æ¯ï¼ˆæˆ¿é—´æ•°ã€å‡ºç§Ÿç‡ç­‰ï¼‰

- [x] **UI çŠ¶æ€ Store** (`stores/ui.ts`)
  - ç®¡ç†é¢æ¿æ˜¾ç¤ºçŠ¶æ€
  - ç®¡ç†æ¨¡æ€æ¡†çŠ¶æ€
  - ç®¡ç†å½“å‰é€‰ä¸­æˆ¿é—´
  - æä¾›æ‰“å¼€/å…³é—­å„ç±»æ¨¡æ€æ¡†çš„æ–¹æ³•

- [x] **è®¾ç½® Store** (`stores/settings.ts`)
  - ç®¡ç†è‡ªåŠ¨åˆ·æ–°è®¾ç½®
  - localStorage æŒä¹…åŒ–
  - æä¾›è®¾ç½®å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½

### é˜¶æ®µ 3ï¼šç»„åˆå¼å‡½æ•°ï¼ˆComposablesï¼‰ âœ…

- [x] **æ‹–åŠ¨åŠŸèƒ½** (`composables/useDrag.ts`)
  - æ”¯æŒé¼ æ ‡å’Œè§¦æ‘¸äº‹ä»¶
  - æ”¯æŒè¾¹ç•Œé™åˆ¶
  - æ”¯æŒç‚¹å‡»æ£€æµ‹ï¼ˆç§»åŠ¨è·ç¦» < 5pxï¼‰
  - æä¾›æ‹–åŠ¨å¼€å§‹/ç§»åŠ¨/ç»“æŸå›è°ƒ

- [x] **MVU æ•°æ®åŠ è½½** (`composables/useMVUData.ts`)
  - å°è£… Apartment Store çš„æ•°æ®è®¿é—®
  - æä¾›å“åº”å¼æ•°æ®å¼•ç”¨
  - ç®€åŒ–ç»„ä»¶ä¸­çš„æ•°æ®ä½¿ç”¨

- [x] **ä½ç½®ä¿å­˜/æ¢å¤** (`composables/usePosition.ts`)
  - localStorage æŒä¹…åŒ–ä½ç½®
  - æ”¯æŒå¤šä¸ªå…ƒç´ ç‹¬ç«‹ä¿å­˜
  - è‡ªåŠ¨éªŒè¯ä½ç½®åœ¨è§†å£å†…
  - æ”¯æŒè‡ªåŠ¨ä¿å­˜æ¨¡å¼

- [x] **è‡ªåŠ¨åˆ·æ–°** (`composables/useAutoRefresh.ts`)
  - å®šæ—¶åˆ·æ–°é€»è¾‘
  - ä¸è®¾ç½® Store é›†æˆ
  - æ”¯æŒå¯åŠ¨/åœæ­¢/åˆ‡æ¢
  - è‡ªåŠ¨æ¸…ç†å®šæ—¶å™¨

### æµ‹è¯•é˜¶æ®µï¼šéªŒè¯æ¶æ„ âœ…

- [x] **å…¥å£æ–‡ä»¶** (`index.ts`)
  - Vue åº”ç”¨åˆ›å»ºå’ŒæŒ‚è½½
  - å…¨å±€æ ·å¼å¯¼å…¥
  - ç”Ÿå‘½å‘¨æœŸç®¡ç†
  - é”™è¯¯å¤„ç†

- [x] **æ ¹ç»„ä»¶** (`App.vue`)
  - é›†æˆ ToggleButton ç»„ä»¶
  - è°ƒè¯•é¢æ¿ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰
  - Stores çŠ¶æ€æ˜¾ç¤º
  - æµ‹è¯•æ“ä½œæŒ‰é’®

- [x] **ToggleButton ç»„ä»¶** (`components/ToggleButton.vue`)
  - æ‹–åŠ¨åŠŸèƒ½é›†æˆ
  - ä½ç½®ä¿å­˜/æ¢å¤
  - ç‚¹å‡»æ£€æµ‹ï¼ˆ< 5pxï¼‰
  - UI Store é›†æˆ

- [x] **æ„å»ºæµ‹è¯•**
  - âœ… Webpack ç¼–è¯‘æˆåŠŸ
  - âœ… ç”Ÿæˆ `dist/ç½‘çº¢å°åŒºvueç‰ˆ/index.js`
  - âœ… ç”Ÿæˆ Source Map
  - âœ… æ— ç¼–è¯‘é”™è¯¯

## ğŸ‰ æµ‹è¯•ç»“æœ

### âœ… ç¼–è¯‘æˆåŠŸ

```
webpack 5.102.1 compiled successfully in 7533 ms
```

**ç”Ÿæˆæ–‡ä»¶ï¼š**
- `dist/ç½‘çº¢å°åŒºvueç‰ˆ/index.js` - å‹ç¼©åçš„ä¸»æ–‡ä»¶
- `dist/ç½‘çº¢å°åŒºvueç‰ˆ/index.js.map` - Source Map

**ç¼–è¯‘ç»Ÿè®¡ï¼š**
- æ¨¡å—æ•°é‡ï¼š84.9 KiB
- Vue ç»„ä»¶ï¼š2 ä¸ªï¼ˆApp.vue, ToggleButton.vueï¼‰
- æ ·å¼æ–‡ä»¶ï¼šå·²é›†æˆåˆ° JS ä¸­
- æ— ç¼–è¯‘é”™è¯¯ âœ…

### ğŸ§ª æµ‹è¯•åŠŸèƒ½

å·²å®ç°çš„æµ‹è¯•åŠŸèƒ½ï¼š
1. **æ‹–åŠ¨æŒ‰é’®** - å¯æ‹–åŠ¨ï¼Œä½ç½®ä¿å­˜
2. **ç‚¹å‡»æ£€æµ‹** - ç§»åŠ¨ < 5px è§†ä¸ºç‚¹å‡»
3. **é¢æ¿åˆ‡æ¢** - ç‚¹å‡»æŒ‰é’®åˆ‡æ¢é¢æ¿çŠ¶æ€
4. **è°ƒè¯•é¢æ¿** - æ˜¾ç¤º Stores çŠ¶æ€å’Œæµ‹è¯•æŒ‰é’®
5. **æ•°æ®åŠ è½½** - æµ‹è¯• MVU æ•°æ®åŠ è½½
6. **è‡ªåŠ¨åˆ·æ–°** - æµ‹è¯•è‡ªåŠ¨åˆ·æ–°å¼€å…³

## ğŸš€ ä¸‹ä¸€æ­¥

### é˜¶æ®µ 4ï¼šæ ¸å¿ƒç»„ä»¶

- [ ] `components/MainPanel.vue` - ä¸»é¢æ¿
- [ ] `components/FloorView.vue` - æ¥¼å±‚è§†å›¾
- [ ] `components/RoomCard.vue` - æˆ¿é—´å¡ç‰‡
- [ ] `components/ManagementActions.vue` - ç®¡ç†æ“ä½œ

### é˜¶æ®µ 5ï¼šæ¨¡æ€æ¡†ç»„ä»¶

- [ ] `components/modals/RoomModal.vue` - æˆ¿é—´è¯¦æƒ…
- [ ] `components/modals/RecruitmentModal.vue` - æ‹›å‹Ÿç§Ÿå®¢
- [ ] `components/modals/RenovateModal.vue` - è£…ä¿®é€‰æ‹©
- [ ] `components/modals/FunctionalInputModal.vue` - åŠŸèƒ½æ€§æˆ¿é—´è¾“å…¥

### é˜¶æ®µ 6ï¼šæ ¹ç»„ä»¶å’Œå…¥å£

- [ ] `App.vue` - æ ¹ç»„ä»¶
- [ ] `index.ts` - å…¥å£æ–‡ä»¶

## ğŸ¯ æŠ€æœ¯æ ˆ

- **Vue 3** - ä½¿ç”¨ Composition API
- **TypeScript** - å®Œæ•´ç±»å‹æ”¯æŒ
- **Pinia** - çŠ¶æ€ç®¡ç†
- **VueUse** - ç»„åˆå¼å·¥å…·åº“ï¼ˆè‡ªåŠ¨å¯¼å…¥ï¼‰
- **CSS3** - æ ·å¼ï¼ˆæ”¯æŒ SCSSï¼‰

## ğŸ“š å¼€å‘è§„èŒƒ

### å‘½åè§„èŒƒ

- **ç»„ä»¶æ–‡ä»¶**ï¼šPascalCaseï¼ˆå¦‚ `ToggleButton.vue`ï¼‰
- **ç»„åˆå¼å‡½æ•°**ï¼šuse å‰ç¼€ + camelCaseï¼ˆå¦‚ `useDrag.ts`ï¼‰
- **Store æ–‡ä»¶**ï¼šcamelCaseï¼ˆå¦‚ `apartment.ts`ï¼‰
- **å·¥å…·å‡½æ•°**ï¼šcamelCaseï¼ˆå¦‚ `mvuHelper.ts`ï¼‰
- **CSS ç±»å**ï¼škebab-caseï¼Œngq å‰ç¼€ï¼ˆå¦‚ `.ngq-toggle-btn`ï¼‰
- **CSS å˜é‡**ï¼škebab-caseï¼Œapt å‰ç¼€ï¼ˆå¦‚ `--apt-primary`ï¼‰

### ä»£ç é£æ ¼

- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- ä¼˜å…ˆä½¿ç”¨ Composition API
- ç»„ä»¶ä½¿ç”¨ `<script setup>` è¯­æ³•
- æ ·å¼ä½¿ç”¨ `<style scoped>`
- æ·»åŠ  JSDoc æ³¨é‡Š

### Git æäº¤è§„èŒƒ

- `feat:` æ–°åŠŸèƒ½
- `fix:` ä¿®å¤ bug
- `refactor:` é‡æ„
- `style:` æ ·å¼è°ƒæ•´
- `docs:` æ–‡æ¡£æ›´æ–°
- `chore:` æ„å»º/å·¥å…·å˜åŠ¨

## ğŸ”§ å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# ç±»å‹æ£€æŸ¥
npm run type-check
```

## ğŸ“– å‚è€ƒèµ„æ–™

- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://vuejs.org/)
- [Pinia å®˜æ–¹æ–‡æ¡£](https://pinia.vuejs.org/)
- [VueUse æ–‡æ¡£](https://vueuse.org/)
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/)

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **MVU æ•°æ®æ ¼å¼**ï¼šæ³¨æ„ MVU æ¡†æ¶çš„æ•°ç»„åŒ…è£…æ ¼å¼ `[value]`
2. **å…¨å±€æ³¨å…¥**ï¼šç»„ä»¶æŒ‚è½½åˆ° `window.top.document.body`
3. **äº‹ä»¶æ¸…ç†**ï¼šç»„ä»¶å¸è½½æ—¶æ¸…ç†æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨
4. **ä½ç½®ä¿å­˜**ï¼šä½¿ç”¨ localStorage æŒä¹…åŒ–æŒ‰é’®å’Œé¢æ¿ä½ç½®
5. **æ‹–åŠ¨æ£€æµ‹**ï¼šç§»åŠ¨è·ç¦» < 5px è§†ä¸ºç‚¹å‡»ï¼Œå¦åˆ™è§†ä¸ºæ‹–åŠ¨

## ğŸ“„ License

MIT

